<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Introduction to Data Science - 4&nbsp; Working with strings</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./publishing_with_r.html" rel="next">
<link href="./reading_and_tidying_data.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Working with strings</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Introduction to Data Science</a> 
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Course overview</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">What is data science?</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./getting_started_with_R.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Getting started with R</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./reading_and_tidying_data.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Reading and tidying data</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./working_with_strings.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Working with strings</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./publishing_with_r.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Publishing with R</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./summarizing_data.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Summarizing data</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./visualizing_data.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Visualizing data</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./topic_modelling.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Topic Modelling</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">References</a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#learning-objectives" id="toc-learning-objectives" class="nav-link active" data-scroll-target="#learning-objectives"><span class="toc-section-number">4.1</span>  Learning objectives</a></li>
  <li><a href="#dealing-with-messy-or-unstructured-data" id="toc-dealing-with-messy-or-unstructured-data" class="nav-link" data-scroll-target="#dealing-with-messy-or-unstructured-data"><span class="toc-section-number">4.2</span>  Dealing with messy or unstructured data</a>
  <ul class="collapse">
  <li><a href="#cleaning-messy-data" id="toc-cleaning-messy-data" class="nav-link" data-scroll-target="#cleaning-messy-data"><span class="toc-section-number">4.2.1</span>  Cleaning messy data</a></li>
  <li><a href="#filtering-rows-based-on-string-matches" id="toc-filtering-rows-based-on-string-matches" class="nav-link" data-scroll-target="#filtering-rows-based-on-string-matches"><span class="toc-section-number">4.2.2</span>  Filtering rows based on string matches</a></li>
  <li><a href="#extracting-data-from-text" id="toc-extracting-data-from-text" class="nav-link" data-scroll-target="#extracting-data-from-text"><span class="toc-section-number">4.2.3</span>  Extracting data from text</a></li>
  </ul></li>
  <li><a href="#the-stringr-package" id="toc-the-stringr-package" class="nav-link" data-scroll-target="#the-stringr-package"><span class="toc-section-number">4.3</span>  The stringr package</a>
  <ul class="collapse">
  <li><a href="#transforming-strings" id="toc-transforming-strings" class="nav-link" data-scroll-target="#transforming-strings"><span class="toc-section-number">4.3.1</span>  Transforming strings</a></li>
  <li><a href="#clean-up-a-string" id="toc-clean-up-a-string" class="nav-link" data-scroll-target="#clean-up-a-string"><span class="toc-section-number">4.3.2</span>  Clean up a string</a></li>
  <li><a href="#combine-strings" id="toc-combine-strings" class="nav-link" data-scroll-target="#combine-strings"><span class="toc-section-number">4.3.3</span>  Combine strings</a></li>
  <li><a href="#splitting-strings" id="toc-splitting-strings" class="nav-link" data-scroll-target="#splitting-strings"><span class="toc-section-number">4.3.4</span>  Splitting strings</a></li>
  <li><a href="#subsetting-strings" id="toc-subsetting-strings" class="nav-link" data-scroll-target="#subsetting-strings"><span class="toc-section-number">4.3.5</span>  Subsetting strings</a></li>
  <li><a href="#locating-a-pattern-in-a-string" id="toc-locating-a-pattern-in-a-string" class="nav-link" data-scroll-target="#locating-a-pattern-in-a-string"><span class="toc-section-number">4.3.6</span>  Locating a pattern in a string</a></li>
  <li><a href="#testing-strings" id="toc-testing-strings" class="nav-link" data-scroll-target="#testing-strings"><span class="toc-section-number">4.3.7</span>  Testing strings</a></li>
  <li><a href="#regular-expressions-regex" id="toc-regular-expressions-regex" class="nav-link" data-scroll-target="#regular-expressions-regex"><span class="toc-section-number">4.3.8</span>  Regular expressions (regex)</a></li>
  <li><a href="#dealing-with-special-characters-in-strings" id="toc-dealing-with-special-characters-in-strings" class="nav-link" data-scroll-target="#dealing-with-special-characters-in-strings"><span class="toc-section-number">4.3.9</span>  Dealing with special characters in strings</a></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary"><span class="toc-section-number">4.3.10</span>  Summary</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Working with strings</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<div class="cell">

</div>
<section id="learning-objectives" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="learning-objectives"><span class="header-section-number">4.1</span> Learning objectives</h2>
<ul>
<li>Transform strings</li>
<li>Combine strings</li>
<li>Split strings</li>
<li>Subset strings</li>
</ul>
</section>
<section id="dealing-with-messy-or-unstructured-data" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="dealing-with-messy-or-unstructured-data"><span class="header-section-number">4.2</span> Dealing with messy or unstructured data</h2>
<p>In the last chapter, we focused on how to import data into tibbles and then reshape them so that they fit the tidy data criteria. So in most cases, we had data with <strong>some</strong> structure which we transformed into a different structure. This week we look at working with strings for three reasons.</p>
<section id="cleaning-messy-data" class="level3" data-number="4.2.1">
<h3 data-number="4.2.1" class="anchored" data-anchor-id="cleaning-messy-data"><span class="header-section-number">4.2.1</span> Cleaning messy data</h3>
<p>Sometimes you may be dealing with data that has the correct tidy structure, but the data itself is not clean and contains errors, unnecessary characters, or unwanted spelling or formatting variants. We need to clean that data before we conduct our analysis.</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: left;">full_names (messy)</th>
<th style="text-align: left;">full_names (tidy)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Colin Conrad, PhD</td>
<td style="text-align: left;">Colin Conrad</td>
</tr>
<tr class="even">
<td style="text-align: left;">MACDONALD, Betrum</td>
<td style="text-align: left;">Bertrum MacDonald</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Dr.&nbsp;Louise Spiteri</td>
<td style="text-align: left;">Louise Spiteri</td>
</tr>
<tr class="even">
<td style="text-align: left;">Mongeon, Philippe</td>
<td style="text-align: left;">Philippe Mongeon</td>
</tr>
<tr class="odd">
<td style="text-align: left;">jennifer grek-martin</td>
<td style="text-align: left;">Jennier Grek-Martin</td>
</tr>
</tbody>
</table>
</section>
<section id="filtering-rows-based-on-string-matches" class="level3" data-number="4.2.2">
<h3 data-number="4.2.2" class="anchored" data-anchor-id="filtering-rows-based-on-string-matches"><span class="header-section-number">4.2.2</span> Filtering rows based on string matches</h3>
<p>In the last chapter, we learned how to filter rows of a tibble based on the value contained in a cell or based on the row number. This week we will add to our toolbox some string matching functions that check if a string of characters is found within a larger string of character. One example could be retrieving a set of course codes starting with INFO or MGMT in a vector containing the course codes of all offerings of Dalhousie University.</p>
</section>
<section id="extracting-data-from-text" class="level3" data-number="4.2.3">
<h3 data-number="4.2.3" class="anchored" data-anchor-id="extracting-data-from-text"><span class="header-section-number">4.2.3</span> Extracting data from text</h3>
<p>Sometimes you may have to deal with unstructured data, for example a long character string, that contain data elements that we wish to extract. Take this character string for example:</p>
<blockquote class="blockquote">
<p>I am taking several courses offered at SIM this Winter. There is INFO6270 (Introduction to Data Science) and also INFO6540 and the information policy one, which I think has the course code INFO6610.</p>
</blockquote>
<p>Maybe you had the brilliant idea to use a free text field in a survey to collect information about the courses that students are taking this Winter, and you now have three thousands responses that look like this one. This is unstructured data that needs to be structured before it can be analyzed. And there are situations, such as this specific example, where R might be able to help at least a little bit. However, this kind of task can be simple in some cases but can also get very complex. In this course we are not going to do complex data extractions of this kind, but we will perform some analysis on full texts in Chapter 7 on topic modelling.</p>
</section>
</section>
<section id="the-stringr-package" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="the-stringr-package"><span class="header-section-number">4.3</span> The stringr package</h2>
<p>The <strong>stringr</strong> package (<a href="https://stringr.tidyverse.org" class="uri">https://stringr.tidyverse.org</a>) is part of the tidyverse and contains a collection of functions that perform all kinds of operations on strings. Let’s go through some of those tasks and some code examples.</p>
<p><strong>Important note</strong>: the stringr functions usually work best with vectors, so when you want to use them to modify strings in tibbles, they are often used in combination with the mutate() function that is used to add or update columns in a tibble. Below I will include examples that use both vectors and tibbles, when appropriate.</p>
<section id="transforming-strings" class="level3" data-number="4.3.1">
<h3 data-number="4.3.1" class="anchored" data-anchor-id="transforming-strings"><span class="header-section-number">4.3.1</span> Transforming strings</h3>
<section id="change-string-character-case" class="level4" data-number="4.3.1.1">
<h4 data-number="4.3.1.1" class="anchored" data-anchor-id="change-string-character-case"><span class="header-section-number">4.3.1.1</span> change string character case</h4>
<p>One of the simple transformation that you may want to perform on a string is changing its case. This is very easily done with the <strong>str_to_lower()</strong>, <strong>str_to_upper()</strong>, <strong>str_to_sentence()</strong>, and <strong>str_to_title()</strong> functions.</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: left;">Statement</th>
<th style="text-align: left;">Output</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">str_to_lower(“HeLlO WoRlD!”)</td>
<td style="text-align: left;">hello world!</td>
</tr>
<tr class="even">
<td style="text-align: left;">str_to_lower(“HeLlO WoRlD!”)</td>
<td style="text-align: left;">HELLO WORLD!</td>
</tr>
<tr class="odd">
<td style="text-align: left;">str_to_sentence(“HeLlO WoRlD!”)</td>
<td style="text-align: left;">Hello world!</td>
</tr>
<tr class="even">
<td style="text-align: left;">str_to_title(“HeLlO WoRlD!”)</td>
<td style="text-align: left;">Hello World!</td>
</tr>
</tbody>
</table>
<section id="vector-example" class="level5" data-number="4.3.1.1.1">
<h5 data-number="4.3.1.1.1" class="anchored" data-anchor-id="vector-example"><span class="header-section-number">4.3.1.1.1</span> Vector example</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I create a vector with character strings</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"I like coding with R"</span>,<span class="st">"i like coding in R"</span>,<span class="st">"R IS AMAZING!"</span>,<span class="st">"I LoVe R"</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># I convert them all to lowercase.</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_lower</span>(vector)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "i like coding with r" "i like coding in r"   "r is amazing!"       
[4] "i love r"            </code></pre>
</div>
</div>
</section>
<section id="tibble-example" class="level5" data-number="4.3.1.1.2">
<h5 data-number="4.3.1.1.2" class="anchored" data-anchor-id="tibble-example"><span class="header-section-number">4.3.1.1.2</span> Tibble example</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I create a tibble with inconsistent strings</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">messy =</span> <span class="fu">c</span>(<span class="st">"I like coding with R"</span>,<span class="st">"i like coding in R"</span>,<span class="st">"R IS AMAZING!"</span>,<span class="st">"I LoVe R"</span>))</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># I use the mutate() function to create a new column (called clean) with the consistent case.</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>t <span class="sc">%&gt;%</span> </span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">clean =</span> <span class="fu">str_to_lower</span>(messy))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 2
  messy                clean               
  &lt;chr&gt;                &lt;chr&gt;               
1 I like coding with R i like coding with r
2 i like coding in R   i like coding in r  
3 R IS AMAZING!        r is amazing!       
4 I LoVe R             i love r            </code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I use the mutate() function to modify the messy column and make the strings consistent. </span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>t <span class="sc">%&gt;%</span> </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">messy =</span> <span class="fu">str_to_lower</span>(messy))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 1
  messy               
  &lt;chr&gt;               
1 i like coding with r
2 i like coding in r  
3 r is amazing!       
4 i love r            </code></pre>
</div>
</div>
</section>
</section>
<section id="replacing-parts-of-strings" class="level4" data-number="4.3.1.2">
<h4 data-number="4.3.1.2" class="anchored" data-anchor-id="replacing-parts-of-strings"><span class="header-section-number">4.3.1.2</span> Replacing parts of strings</h4>
<p>The functions <strong>str_replace()</strong> and <strong>str_replace_all()</strong> can be used to modify strings by replacing some patterns with some other. The difference between the two is that str_replace() will only replace the first instance of the pattern in the string, while str_replace_all() will replace all the instances.</p>
<section id="vector-example-1" class="level5" data-number="4.3.1.2.1">
<h5 data-number="4.3.1.2.1" class="anchored" data-anchor-id="vector-example-1"><span class="header-section-number">4.3.1.2.1</span> Vector example</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I create a vector with two strings.</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"dr Mike Smit"</span>,<span class="st">"dr Sandra Toze"</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># I replace the first instance of the pattern "dr" with "doctor". </span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>names <span class="sc">%&gt;%</span> <span class="fu">str_replace</span>(<span class="st">"dr"</span>,<span class="st">"doctor"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "doctor Mike Smit"   "doctor Sandra Toze"</code></pre>
</div>
</div>
<p>Now let’s see what happens if I do the same example but use str_replace_all() instead of str_replace().</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I create a vector with two strings.</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"dr Mike Smit"</span>,<span class="st">"dr Sandra Toze"</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co"># I replace ALL instances of the pattern "dr" with "doctor". </span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>names <span class="sc">%&gt;%</span> <span class="fu">str_replace_all</span>(<span class="st">"dr"</span>,<span class="st">"doctor"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "doctor Mike Smit"       "doctor Sandoctora Toze"</code></pre>
</div>
</div>
<p>The second string got messed up because the second “dr” pattern in San<strong>dr</strong>a also got replaced.</p>
<p>The <strong>str_remove()</strong> and <strong>str_remove_all()</strong> are the equivalent of str_replace(“some pattern”, ““) and str_replace_all(”some pattern”, ““), but they don’t require to provide a replacement string, which make the code a bit more clean.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I create a vector with names</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"dr Mike Smit"</span>,<span class="st">"dr Sandra Toze"</span>)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co"># I remove the pattern "dr" from the names.</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>names <span class="sc">%&gt;%</span> <span class="fu">str_remove</span>(<span class="st">"dr "</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Mike Smit"   "Sandra Toze"</code></pre>
</div>
</div>
</section>
<section id="tibble-example-1" class="level5" data-number="4.3.1.2.2">
<h5 data-number="4.3.1.2.2" class="anchored" data-anchor-id="tibble-example-1"><span class="header-section-number">4.3.1.2.2</span> Tibble example</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I create a tibble with professor names.</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">names =</span> <span class="fu">c</span>(<span class="st">"dr Mike Smit"</span>,<span class="st">"dr Sandra Toze"</span>))</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>t</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 1
  names         
  &lt;chr&gt;         
1 dr Mike Smit  
2 dr Sandra Toze</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I remove the first instance of the pattern "dr" in the names. </span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>t <span class="sc">%&gt;%</span> </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">names =</span> <span class="fu">str_remove</span>(names, <span class="st">"dr"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 1
  names         
  &lt;chr&gt;         
1 " Mike Smit"  
2 " Sandra Toze"</code></pre>
</div>
</div>
</section>
</section>
</section>
<section id="clean-up-a-string" class="level3" data-number="4.3.2">
<h3 data-number="4.3.2" class="anchored" data-anchor-id="clean-up-a-string"><span class="header-section-number">4.3.2</span> Clean up a string</h3>
<p>The <strong>str_squish()</strong> function is a quick and easy way to remove unwanted spaces before or after a string, as well as consecutive spaces within a string.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>messy_string <span class="ot">&lt;-</span> <span class="st">"   My cat just    stepped on the spacebar  as I was writing this      "</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Let's print the string to see what it looks like</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>messy_string</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "   My cat just    stepped on the spacebar  as I was writing this      "</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Let's squish it!</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_squish</span>(messy_string)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "My cat just stepped on the spacebar as I was writing this"</code></pre>
</div>
</div>
</section>
<section id="combine-strings" class="level3" data-number="4.3.3">
<h3 data-number="4.3.3" class="anchored" data-anchor-id="combine-strings"><span class="header-section-number">4.3.3</span> Combine strings</h3>
<section id="str_c" class="level4" data-number="4.3.3.1">
<h4 data-number="4.3.3.1" class="anchored" data-anchor-id="str_c"><span class="header-section-number">4.3.3.1</span> str_c</h4>
<p>We already learned how to use the <code>unite()</code> function of the tidyr package to concatenate multiple data frame columns into one. However, the <code>unite()</code> function works only with data frames as input, which can be limiting. The stringr package offers a <code>str_c()</code> function that works with vectors, so it’s good to know how to use both functions.</p>
<section id="vector-example-2" class="level5" data-number="4.3.3.1.1">
<h5 data-number="4.3.3.1.1" class="anchored" data-anchor-id="vector-example-2"><span class="header-section-number">4.3.3.1.1</span> Vector example</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I create a vector with first names</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>first_names <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"Bertrum"</span>, <span class="st">"Colin"</span>, <span class="st">"Louise"</span>)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co"># I create a vector with last names</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>last_names <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"MacDonald"</span>, <span class="st">"Conrad"</span>, <span class="st">"Spiteri"</span>)</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="co"># I combined my vectors into a new vector with full names</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>full_names <span class="ot">&lt;-</span> <span class="fu">str_c</span>(first_names, last_names, <span class="at">sep =</span> <span class="st">" "</span>)</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="co"># I print the vector</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(full_names)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Bertrum MacDonald" "Colin Conrad"      "Louise Spiteri"   </code></pre>
</div>
</div>
</section>
<section id="tibble-example-2" class="level5" data-number="4.3.3.1.2">
<h5 data-number="4.3.3.1.2" class="anchored" data-anchor-id="tibble-example-2"><span class="header-section-number">4.3.3.1.2</span> Tibble example</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I create a tibble with two columsn containing first and last names.</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>my_tibble <span class="ot">=</span> <span class="fu">tibble</span>(<span class="at">first_name =</span> <span class="fu">c</span>(<span class="st">"Bertrum"</span>, <span class="st">"Colin"</span>, <span class="st">"Louise"</span>),</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">last_name =</span> <span class="fu">c</span>(<span class="st">"MacDonald"</span>, <span class="st">"Conrad"</span>, <span class="st">"Spiteri"</span>))</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="co"># I add a column to my tibble with full_names</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>my_tibble <span class="ot">&lt;-</span> my_tibble <span class="sc">%&gt;%</span> </span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">full_name =</span> <span class="fu">str_c</span>(first_name, last_name, <span class="at">sep=</span><span class="st">" "</span>))</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="co"># I print my new tibble</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(my_tibble)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  first_name last_name full_name        
  &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;            
1 Bertrum    MacDonald Bertrum MacDonald
2 Colin      Conrad    Colin Conrad     
3 Louise     Spiteri   Louise Spiteri   </code></pre>
</div>
</div>
</section>
</section>
</section>
<section id="splitting-strings" class="level3" data-number="4.3.4">
<h3 data-number="4.3.4" class="anchored" data-anchor-id="splitting-strings"><span class="header-section-number">4.3.4</span> Splitting strings</h3>
<section id="str_split" class="level4" data-number="4.3.4.1">
<h4 data-number="4.3.4.1" class="anchored" data-anchor-id="str_split"><span class="header-section-number">4.3.4.1</span> str_split</h4>
<p>The <code>str_split()</code> function does the same thing than the <strong>separate()</strong> function that we learned about in chapter 3. They have slightly different syntax and arguments, but the main difference between the two functions is that <code>str_split()</code> works with <strong>vectors</strong> and returns a list, while <code>separate()</code> works with <strong>dara frames</strong> and returns a data frame. In other words, if you want to split a string contained in a dataframe column, you need to use <code>separate()</code>, and if we want to split a character vector into a list of character vectors. the <strong>n</strong> argument of <code>str_split()</code> allows us to specify the length of the returned vector. The basic syntax is <code>str_split(character_vector, separator)</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>courses <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"INFO5500, INFO6540, INFO6270"</span>,</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>            <span class="st">"INFO5500"</span>,</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>            <span class="st">"INFO5530, INFO5520"</span>)</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="co"># str_split seperates the vectors based on a specified delimiter.</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="co"># the outcome is a list of three vectors with 3, 1 and 2 elements.</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>courses <span class="sc">%&gt;%</span> </span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_split</span>(<span class="st">", "</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "INFO5500" "INFO6540" "INFO6270"

[[2]]
[1] "INFO5500"

[[3]]
[1] "INFO5530" "INFO5520"</code></pre>
</div>
</div>
<p>We can also specify the <strong>maximum</strong> number of pieces we want to split the string into.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Here I split the courses vector into a list of vectors that can have a maximum of 2 elements.</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>courses <span class="sc">%&gt;%</span> </span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_split</span>(<span class="st">", "</span>,<span class="at">n=</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "INFO5500"           "INFO6540, INFO6270"

[[2]]
[1] "INFO5500"

[[3]]
[1] "INFO5530" "INFO5520"</code></pre>
</div>
</div>
<p>We can also specify the <strong>exact</strong> number of pieces we want to split the string into with str_split_fixed(). This function does not return a vector but a matrix.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I split the courses vector into a matrix with 4 columns.</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>courses <span class="sc">%&gt;%</span> </span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_split_fixed</span>(<span class="st">", "</span>,<span class="at">n=</span><span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1]       [,2]       [,3]       [,4]
[1,] "INFO5500" "INFO6540" "INFO6270" ""  
[2,] "INFO5500" ""         ""         ""  
[3,] "INFO5530" "INFO5520" ""         ""  </code></pre>
</div>
</div>
</section>
<section id="str_flatten" class="level4" data-number="4.3.4.2">
<h4 data-number="4.3.4.2" class="anchored" data-anchor-id="str_flatten"><span class="header-section-number">4.3.4.2</span> str_flatten</h4>
<p>The <code>str_flatten()</code> function takes a character vector of length <em>x</em> and concatenates all the elements into a character vector of length 1 (a single string) with a specified separator between the elements. In a sense, it is the opposite of a <code>str_split()</code>. It’s basic syntax is <code>str_flatten(vector, separator)</code></p>
<section id="vector-example-3" class="level5" data-number="4.3.4.2.1">
<h5 data-number="4.3.4.2.1" class="anchored" data-anchor-id="vector-example-3"><span class="header-section-number">4.3.4.2.1</span> Vector example</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"a"</span>,<span class="st">"b"</span>,<span class="st">"c"</span>)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_flatten</span>(x,<span class="st">"|"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "a|b|c"</code></pre>
</div>
</div>
</section>
<section id="tibble-example-3" class="level5" data-number="4.3.4.2.2">
<h5 data-number="4.3.4.2.2" class="anchored" data-anchor-id="tibble-example-3"><span class="header-section-number">4.3.4.2.2</span> tibble example</h5>
<p>Using <code>str_flatten()</code> in a tibble is tricky (we need to use the <code>group_by()</code> function that we briefly mentioned in the previous chapter but haven’t thoroughly explored yet), but also counter-intuitive, since it likely means that we are taking a tibble in a tidy format and making it untidy. Still, I’m providing an example in case you are curious.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Here is a tibble</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>my_tibble <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">instructor =</span> <span class="fu">c</span>(<span class="st">"Mongeon, Philippe"</span>, <span class="st">"Mongeon, Philippe"</span>, <span class="st">"Mongeon, Philippe"</span>,<span class="st">"Spiteri, Louise"</span>,<span class="st">"Spiteri, Louise"</span>),</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">course =</span> <span class="fu">c</span>(<span class="st">"INFO5500"</span>,<span class="st">"INO6540"</span>,<span class="st">"INFO6270"</span>,<span class="st">"INFO6350"</span>,<span class="st">"INFO6480"</span>))</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(my_tibble)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
  instructor        course  
  &lt;chr&gt;             &lt;chr&gt;   
1 Mongeon, Philippe INFO5500
2 Mongeon, Philippe INO6540 
3 Mongeon, Philippe INFO6270
4 Spiteri, Louise   INFO6350
5 Spiteri, Louise   INFO6480</code></pre>
</div>
</div>
<p>Now I want to flatten my course column so that I have all the courses taught by the same instructor in a single row and separated with a “|”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>my_tibble <span class="sc">%&gt;%</span> </span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(instructor) <span class="sc">%&gt;%</span> </span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">course =</span> <span class="fu">str_flatten</span>(course, <span class="st">" | "</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
# Groups:   instructor [2]
  instructor        course                       
  &lt;chr&gt;             &lt;chr&gt;                        
1 Mongeon, Philippe INFO5500 | INO6540 | INFO6270
2 Spiteri, Louise   INFO6350 | INFO6480          </code></pre>
</div>
</div>
<p><strong>Important</strong>: the <code>unique()</code> function at the end of the previous code removes the duplicates that are typically created with the <code>str_flatten()</code> function. You can try it yourself and see what happens when you don’t include the <code>unique()</code> step at the end.</p>
</section>
</section>
</section>
<section id="subsetting-strings" class="level3" data-number="4.3.5">
<h3 data-number="4.3.5" class="anchored" data-anchor-id="subsetting-strings"><span class="header-section-number">4.3.5</span> Subsetting strings</h3>
<section id="str_sub" class="level4" data-number="4.3.5.1">
<h4 data-number="4.3.5.1" class="anchored" data-anchor-id="str_sub"><span class="header-section-number">4.3.5.1</span> str_sub</h4>
<p>Say we want to retrieve the first three characters of string. A postal code, for instance. We can do that with the <code>str_sub()</code> function. It’s basic syntax is <code>str_sub(string, start, end)</code></p>
<section id="vector-example-4" class="level5" data-number="4.3.5.1.1">
<h5 data-number="4.3.5.1.1" class="anchored" data-anchor-id="vector-example-4"><span class="header-section-number">4.3.5.1.1</span> Vector example</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>postal_code <span class="ot">&lt;-</span> <span class="st">"B3H 4R2"</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>?<span class="fu">str_sub</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>starting httpd help server ... done</code></pre>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># get the first three characters of the postal code</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>postal_code <span class="sc">%&gt;%</span> </span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_sub</span>(<span class="dv">1</span>,<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "B3H"</code></pre>
</div>
</div>
<p>You can also retrieve the last characters of the string using negative numbers. Let’s get the last three characters of the postal code.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>postal_code <span class="sc">%&gt;%</span> </span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_sub</span>(<span class="sc">-</span><span class="dv">3</span>,<span class="sc">-</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "4R2"</code></pre>
</div>
</div>
</section>
<section id="tibble-example-4" class="level5" data-number="4.3.5.1.2">
<h5 data-number="4.3.5.1.2" class="anchored" data-anchor-id="tibble-example-4"><span class="header-section-number">4.3.5.1.2</span> Tibble example</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I create my tibble </span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">postal_code =</span> <span class="fu">c</span>(<span class="st">"B3H 4R2"</span>, <span class="st">"B3H 7K7"</span>))</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="co"># I print my tibble</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>t</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 1
  postal_code
  &lt;chr&gt;      
1 B3H 4R2    
2 B3H 7K7    </code></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I add two new columms with the first three digits and the last 3 digits of the postal code. </span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> t <span class="sc">%&gt;%</span> </span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">first_three_digits =</span> <span class="fu">str_sub</span>(postal_code, <span class="dv">1</span>, <span class="dv">3</span>),</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">last_three_digits =</span> <span class="fu">str_sub</span>(postal_code, <span class="sc">-</span><span class="dv">3</span>, <span class="sc">-</span><span class="dv">1</span>)) </span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a><span class="co"># I print my new tibble</span></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>t</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  postal_code first_three_digits last_three_digits
  &lt;chr&gt;       &lt;chr&gt;              &lt;chr&gt;            
1 B3H 4R2     B3H                4R2              
2 B3H 7K7     B3H                7K7              </code></pre>
</div>
</div>
<p>Noticed how I created two new columns with the same mutate()? You can mutate as many things as you want in a mutate() function, just need to add a comma to separate each mutation.</p>
</section>
</section>
<section id="str_subset" class="level4" data-number="4.3.5.2">
<h4 data-number="4.3.5.2" class="anchored" data-anchor-id="str_subset"><span class="header-section-number">4.3.5.2</span> str_subset</h4>
<p>The <code>str_sub()</code> function should not be confused with the <code>str_subset()</code> functions that returns the element of a vector that contain a string. It’s basic syntax is <code>str_subset(character_vector, string_to_find)</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I create a vector with course codes</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>course_codes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"INFO5500"</span>, <span class="st">"BUSI6500"</span>, <span class="st">"MGMT5000"</span>, <span class="st">"INFO6270"</span>)</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="co"># I print a vector of course codes that contain the pattern "INFO"</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str_subset</span>(course_codes, <span class="st">"INFO"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Important note:</strong> You should not try to use the <code>str_subset()</code> function with a tibble. It is possible, but requires the combination of multiple functions, and it’s not something that you are likely to need to do anyways.</p>
</section>
</section>
<section id="locating-a-pattern-in-a-string" class="level3" data-number="4.3.6">
<h3 data-number="4.3.6" class="anchored" data-anchor-id="locating-a-pattern-in-a-string"><span class="header-section-number">4.3.6</span> Locating a pattern in a string</h3>
<section id="str_locate" class="level4" data-number="4.3.6.1">
<h4 data-number="4.3.6.1" class="anchored" data-anchor-id="str_locate"><span class="header-section-number">4.3.6.1</span> str_locate</h4>
<p>The <code>str_locate()</code> function allows you to find the position of a pattern in a string. This can be useful, for instance, in combination with <code>str_sub()</code> if you want to extract the part of a string that comes before or after the pattern. Let’s explore the <code>str_locate()</code> function with a few examples.</p>
<section id="vector-examples" class="level5" data-number="4.3.6.1.1">
<h5 data-number="4.3.6.1.1" class="anchored" data-anchor-id="vector-examples"><span class="header-section-number">4.3.6.1.1</span> Vector examples</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I create a string with an email</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>email <span class="ot">&lt;-</span> <span class="st">"info@somewebsite.ca"</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="co"># I locat the @ character</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>email <span class="sc">%&gt;%</span> </span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_locate</span>(<span class="st">"@"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     start end
[1,]     5   5</code></pre>
</div>
</div>
<p>You can see that the str_locate() returns a matrix with the beginning and the end of the “@” pattern in the email. If we want to get the part of the strings that come before the “@”, then we can do this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I get the first part of the email</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sub</span>(email, <span class="dv">1</span>,<span class="fu">str_locate</span>(email,<span class="st">"@"</span>)[,<span class="dv">1</span>]<span class="sc">-</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "info"</code></pre>
</div>
</div>
<p>We did three things there:</p>
<ol type="1">
<li>We used 1 as the first argument of str_sub() to specify that we want to extract a subset of the email starting with the 1st character.</li>
<li>We used [,1] to obtain the first column in the matrix which is where our pattern starts (the 5th position).</li>
<li>We substracted 1 because we don’t want to print characters 1 to 5, which would be “info@” but charachters 1 to 4.</li>
</ol>
<p>So our statement, in English, would read like this: extract the subset of the email string that starts at the first position and ends one position before the “@” pattern is located.</p>
<p>So I can get the part that comes after the pattern “@” like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>email <span class="sc">%&gt;%</span> </span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_sub</span>(<span class="fu">str_locate</span>(email,<span class="st">"@"</span>)[,<span class="dv">2</span>]<span class="sc">+</span><span class="dv">1</span>,<span class="sc">-</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "somewebsite.ca"</code></pre>
</div>
</div>
<p>This reads as give me the subset of the email string that starts one position after the location of the “@” pattern (<code>str_locate(email,"@")[,2]+1</code>), and ends with the last character of the string (-1). Note that the “,-1” part is optional since by default the <code>str_sub()</code> function will output the rest of the string when not end position is provide.</p>
</section>
<section id="tibble-example-5" class="level5" data-number="4.3.6.1.2">
<h5 data-number="4.3.6.1.2" class="anchored" data-anchor-id="tibble-example-5"><span class="header-section-number">4.3.6.1.2</span> Tibble example</h5>
<p>Let’s just repeat the same example but working with a tibble.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># We create a tibble than contains some emails</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>my_tibble <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">emails =</span> <span class="fu">c</span>(<span class="st">"info@somewebsite.ca"</span>,<span class="st">"support@datascienceisfun.com"</span>))</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a><span class="co"># We print the tibble</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(my_tibble)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 1
  emails                      
  &lt;chr&gt;                       
1 info@somewebsite.ca         
2 support@datascienceisfun.com</code></pre>
</div>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># We remove the part of the emails after the @</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>my_tibble <span class="sc">%&gt;%</span> </span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">emails =</span> <span class="fu">str_sub</span>(emails, <span class="dv">1</span>, <span class="fu">str_locate</span>(emails,<span class="st">"@"</span>)[,<span class="dv">1</span>]<span class="sc">-</span><span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 1
  emails 
  &lt;chr&gt;  
1 info   
2 support</code></pre>
</div>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># We remove the part of the emails before the @</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>my_tibble <span class="sc">%&gt;%</span> </span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">emails =</span> <span class="fu">str_sub</span>(emails, <span class="fu">str_locate</span>(emails,<span class="st">"@"</span>)[,<span class="dv">2</span>]<span class="sc">+</span><span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 1
  emails              
  &lt;chr&gt;               
1 somewebsite.ca      
2 datascienceisfun.com</code></pre>
</div>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Let's make this a bit more complex, and print only the part between the "@" and the "."</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>my_tibble <span class="sc">%&gt;%</span> </span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">emails =</span> <span class="fu">str_sub</span>(emails, <span class="co"># strint to subset</span></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">str_locate</span>(emails,<span class="st">"@"</span>)[,<span class="dv">2</span>]<span class="sc">+</span><span class="dv">1</span>, <span class="co"># starting position</span></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">str_locate</span>(emails,<span class="st">"</span><span class="sc">\\</span><span class="st">."</span>)[,<span class="dv">1</span>]<span class="sc">-</span><span class="dv">1</span>)) <span class="co"># ending position</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 1
  emails          
  &lt;chr&gt;           
1 somewebsite     
2 datascienceisfun</code></pre>
</div>
</div>
</section>
</section>
</section>
<section id="testing-strings" class="level3" data-number="4.3.7">
<h3 data-number="4.3.7" class="anchored" data-anchor-id="testing-strings"><span class="header-section-number">4.3.7</span> Testing strings</h3>
<p>Rather than extracting parts of strings, or modifying strings, you may just want to test to see if a strings contains a specific pattern and get a logical (TRUE, FALSE) in return.</p>
<section id="str_detect" class="level4" data-number="4.3.7.1">
<h4 data-number="4.3.7.1" class="anchored" data-anchor-id="str_detect"><span class="header-section-number">4.3.7.1</span> str_detect</h4>
<p>The <code>str_detect()</code> functions allows us to identify strings that contain a certain pattern. It’s syntax is <code>str_detect(character_vector, string_to_detec)</code>.</p>
<section id="vector-example-5" class="level5" data-number="4.3.7.1.1">
<h5 data-number="4.3.7.1.1" class="anchored" data-anchor-id="vector-example-5"><span class="header-section-number">4.3.7.1.1</span> Vector example</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>postal_code <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"B3H 1H5"</span>,<span class="st">"B3H 382"</span>,<span class="st">"H2T 1H2"</span>,<span class="st">"J8P 9R2"</span>)</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(postal_code, <span class="st">"B3H"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE  TRUE FALSE FALSE</code></pre>
</div>
</div>
<p>This can be useful if we want to filter a tibble based on pattern matches. Here’s an example where we have a list of postal codes and would like to keep only those who are in Halifax.</p>
</section>
<section id="tibble-example-6" class="level5" data-number="4.3.7.1.2">
<h5 data-number="4.3.7.1.2" class="anchored" data-anchor-id="tibble-example-6"><span class="header-section-number">4.3.7.1.2</span> Tibble example</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I create a tibble with postal codes</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>my_tibble <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">postal_code =</span> <span class="fu">c</span>(<span class="st">"B3H 1H5"</span>,<span class="st">"B3H 382"</span>,<span class="st">"H2T 1H2"</span>,<span class="st">"J8P 9R2"</span>))</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a><span class="co"># I print the rows that for which the postal code contains the pattern "B3H"</span></span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>my_tibble <span class="sc">%&gt;%</span> </span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(postal_code,<span class="st">"B3H"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 1
  postal_code
  &lt;chr&gt;      
1 B3H 1H5    
2 B3H 382    </code></pre>
</div>
</div>
</section>
</section>
<section id="str_starts-and-str_ends" class="level4" data-number="4.3.7.2">
<h4 data-number="4.3.7.2" class="anchored" data-anchor-id="str_starts-and-str_ends"><span class="header-section-number">4.3.7.2</span> str_starts and str_ends</h4>
<p>The str_starts() and str_ends() functions do the same thing as str_detect(), but look fpr the pattern specifically at the beginning or the end of the strings.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I create a tibble with postal codes</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">postal_code =</span> <span class="fu">c</span>(<span class="st">"B3H 1H5"</span>,<span class="st">"B3H 382"</span>,<span class="st">"H2T 1H2"</span>,<span class="st">"J8P 9R2"</span>))</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a><span class="co"># I print the postal codes that begin with "B3H"</span></span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>t <span class="sc">%&gt;%</span> </span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_starts</span>(postal_code, <span class="st">"B3H"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 1
  postal_code
  &lt;chr&gt;      
1 B3H 1H5    
2 B3H 382    </code></pre>
</div>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I print the postal codes that end with "1H2"</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>t <span class="sc">%&gt;%</span> </span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_ends</span>(postal_code, <span class="st">"1H2"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  postal_code
  &lt;chr&gt;      
1 H2T 1H2    </code></pre>
</div>
</div>
</section>
</section>
<section id="regular-expressions-regex" class="level3" data-number="4.3.8">
<h3 data-number="4.3.8" class="anchored" data-anchor-id="regular-expressions-regex"><span class="header-section-number">4.3.8</span> Regular expressions (regex)</h3>
<p>Regular expressions are a powerful way to search for patterns in text. A full understanding of regex is far beyond the scope of this course, but you should at least be aware of them. Below is a very superficial introduction to regular expressions. The cheat sheet for the stringr (<a href="https://github.com/rstudio/cheatsheets/blob/main/strings.pdf" class="uri">https://github.com/rstudio/cheatsheets/blob/main/strings.pdf</a>) package is a great place to look for guidance on using regular expressions (as well as all other functions in the stringr package, several of which that I didn’t mention in this chapter but might still be useful). It shows a list of the basic character classes, and all the operators that you can use to search for patterns in strings, so remember that it’s there to help you.</p>
<section id="literal-expressions" class="level4" data-number="4.3.8.1">
<h4 data-number="4.3.8.1" class="anchored" data-anchor-id="literal-expressions"><span class="header-section-number">4.3.8.1</span> Literal expressions</h4>
<p>In the code examples above, we used several functions of the stringr package to search for patterns in strings (e.g., searching for the pattern “INFO” in a vector of strings.). “INFO” is a literal expression. We can also search for more than one pattern combined with the Boolean operator OR (represented by “|” in a search pattern).</p>
</section>
<section id="character-classes" class="level4" data-number="4.3.8.2">
<h4 data-number="4.3.8.2" class="anchored" data-anchor-id="character-classes"><span class="header-section-number">4.3.8.2</span> Character classes</h4>
<p>Character classes allow you to search for a range of characters or types of patterns using <strong>character classes</strong> (e.g., numbers, punctuations, symbols, letters, or a user specified set or range of characters). These classes are represented by square brackets “[ ]”.</p>
<section id="example-remove-unwanted-characters-from-strings" class="level5" data-number="4.3.8.2.1">
<h5 data-number="4.3.8.2.1" class="anchored" data-anchor-id="example-remove-unwanted-characters-from-strings"><span class="header-section-number">4.3.8.2.1</span> Example: remove unwanted characters from strings</h5>
<p>You can use regular expressions to filter out of a string all the non-alphanumeric characters like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>messy_string <span class="ot">&lt;-</span> <span class="st">" what-is%going*on/with!my(keyboard)"</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>messy_string <span class="sc">%&gt;%</span> </span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(<span class="st">"[^[:alnum:]]"</span>,<span class="st">" "</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] " what is going on with my keyboard "</code></pre>
</div>
</div>
<p>Why does this work? Because:</p>
<ol type="1">
<li>[:alnum:] is a character class containing all characters that are alphabetical or numerical (letters and numbers).</li>
<li>[^] means <strong>everything but</strong>.</li>
<li>So the statement reads: replace everything but alphanumeric characters with a space.</li>
</ol>
</section>
<section id="example-find-sequences-of-character-belonging-to-specific-classes" class="level5" data-number="4.3.8.2.2">
<h5 data-number="4.3.8.2.2" class="anchored" data-anchor-id="example-find-sequences-of-character-belonging-to-specific-classes"><span class="header-section-number">4.3.8.2.2</span> Example: find sequences of character belonging to specific classes</h5>
<p>We can search for specific sequences of character classes, which can be useful to retrieve things like postal codes from a string.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co"># We create a vector with an address</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>address <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"5058 King St, Halifax, NS H2T 1J2"</span>,<span class="st">"427 Queen Avernue, Halifax, NS, B3H1H4"</span>) </span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a><span class="co"># We extract the postal code from the address  </span></span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>address <span class="sc">%&gt;%</span> </span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_extract</span>(<span class="st">"[:alpha:][:digit:][:alpha:] ?[:digit:][:alpha:][:digit:]"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "H2T 1J2" "B3H1H4" </code></pre>
</div>
</div>
<p>The pattern <code>[:alpha:][:digit:][:alpha:]</code> reads as: any letter, followed by any number, followed by any letter. The <code>[:digit:][:alpha:][:digit:]</code> patters reads as any number, followed by any letter, followed by any number.</p>
<p>You might have noticed that then there is a space and a question mark in between my two sets of three character classes. This reads as 0 or 1 space (see the quantifiers section in the stringr cheatsheet). This allows query to extract postal codes that are written with no space in between the two sets of three characters.</p>
</section>
<section id="example-search-for-spelling-variants" class="level5" data-number="4.3.8.2.3">
<h5 data-number="4.3.8.2.3" class="anchored" data-anchor-id="example-search-for-spelling-variants"><span class="header-section-number">4.3.8.2.3</span> Example: search for spelling variants</h5>
<p>Another convenient way of using character classes is when you want to match a word in a text that is or isn’t capitalized. Here’s an example.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co"># We create a tibble with 2 strings</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>my_tibble <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">text =</span> <span class="fu">c</span>(<span class="st">"Information management is great"</span>, <span class="st">"I love information management"</span>, <span class="st">"Wayne Gretzy was the best hockey player of all times"</span>))</span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a><span class="co"># We print the tibble</span></span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(my_tibble)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 1
  text                                                
  &lt;chr&gt;                                               
1 Information management is great                     
2 I love information management                       
3 Wayne Gretzy was the best hockey player of all times</code></pre>
</div>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co"># We select the texts that contain "information management" or "Information management".</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>my_tibble <span class="sc">%&gt;%</span> </span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(text, <span class="st">"[Ii]nformation management"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 1
  text                           
  &lt;chr&gt;                          
1 Information management is great
2 I love information management  </code></pre>
</div>
</div>
</section>
<section id="example-combining-mutliple-search-terms-with-boolean-or" class="level5" data-number="4.3.8.2.4">
<h5 data-number="4.3.8.2.4" class="anchored" data-anchor-id="example-combining-mutliple-search-terms-with-boolean-or"><span class="header-section-number">4.3.8.2.4</span> Example: combining mutliple search terms with “|” (boolean OR)</h5>
<p>Instead of using character classes, we could combine multiple search teams with the “|” that represents the Boolean operator OR.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>my_tibble <span class="sc">%&gt;%</span> </span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(text, <span class="st">"information management|Information management"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 1
  text                           
  &lt;chr&gt;                          
1 Information management is great
2 I love information management  </code></pre>
</div>
</div>
<p>This works, but even with just two variants, you can already tell that it makes longer statements to write.</p>
</section>
<section id="example-searching-for-a-range-of-character" class="level5" data-number="4.3.8.2.5">
<h5 data-number="4.3.8.2.5" class="anchored" data-anchor-id="example-searching-for-a-range-of-character"><span class="header-section-number">4.3.8.2.5</span> Example: searching for a range of character</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I create a tibble containing letters from a to g</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>my_tibble <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">letters =</span> <span class="fu">c</span>(<span class="st">"a"</span>,<span class="st">"b"</span>,<span class="st">"c"</span>,<span class="st">"d"</span>,<span class="st">"e"</span>,<span class="st">"f"</span>,<span class="st">"g"</span>))</span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a><span class="co"># I retrieve rows that contain letters from a to f</span></span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a>my_tibble <span class="sc">%&gt;%</span> </span>
<span id="cb80-6"><a href="#cb80-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(letters,<span class="st">"[a-f]"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 1
  letters
  &lt;chr&gt;  
1 a      
2 b      
3 c      
4 d      
5 e      
6 f      </code></pre>
</div>
</div>
<p>Again, we could have used “a|b|c|d|e|f” but this is less efficient. Here’s a similar example where we have lowercase and uppercase letters.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I create a tibble containing letters from a to g in lowercase and uppercase.</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>my_tibble <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">letters =</span> <span class="fu">c</span>(<span class="st">"a"</span>,<span class="st">"b"</span>,<span class="st">"c"</span>,<span class="st">"d"</span>,<span class="st">"e"</span>,<span class="st">"f"</span>,<span class="st">"g"</span>,</span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"A"</span>,<span class="st">"B"</span>,<span class="st">"C"</span>,<span class="st">"D"</span>,<span class="st">"E"</span>,<span class="st">"F"</span>,<span class="st">"G"</span>))</span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a><span class="co"># I retrieve rows that contain the letters a to d in lowercase or uppercase</span></span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a>my_tibble <span class="sc">%&gt;%</span> </span>
<span id="cb82-7"><a href="#cb82-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(letters, <span class="st">"[a-dA-D]"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 8 × 1
  letters
  &lt;chr&gt;  
1 a      
2 b      
3 c      
4 d      
5 A      
6 B      
7 C      
8 D      </code></pre>
</div>
</div>
</section>
</section>
<section id="beware-of-the-dot-its-a-wild-card" class="level4" data-number="4.3.8.3">
<h4 data-number="4.3.8.3" class="anchored" data-anchor-id="beware-of-the-dot-its-a-wild-card"><span class="header-section-number">4.3.8.3</span> Beware of the dot, it’s a wild card</h4>
<p>When matching character patterns, the “.” means <strong>any character</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>string <span class="ot">&lt;-</span> <span class="st">"This is a string"</span> </span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a><span class="co"># I extract every character</span></span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a><span class="fu">str_extract_all</span>(string, <span class="st">"."</span>)[[<span class="dv">1</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "T" "h" "i" "s" " " "i" "s" " " "a" " " "s" "t" "r" "i" "n" "g"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I replace every character with a space</span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>string <span class="sc">%&gt;%</span> </span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(<span class="st">"."</span>,<span class="st">" "</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "                "</code></pre>
</div>
</div>
</section>
</section>
<section id="dealing-with-special-characters-in-strings" class="level3" data-number="4.3.9">
<h3 data-number="4.3.9" class="anchored" data-anchor-id="dealing-with-special-characters-in-strings"><span class="header-section-number">4.3.9</span> Dealing with special characters in strings</h3>
<p>Here a some of the characters that you might come across when working with strings in R. When you want to insert these characters a string, you need to precede them with the escape character “\”. Here is a table adapted from the <a href="https://github.com/rstudio/cheatsheets/blob/main/strings.pdf">stringr cheatsheet</a>.</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: left;">String</th>
<th style="text-align: left;">Represents</th>
<th>How to search in a pattern</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">\.</td>
<td style="text-align: left;">.</td>
<td>\\.</td>
</tr>
<tr class="even">
<td style="text-align: left;">\!</td>
<td style="text-align: left;">!</td>
<td>\\!</td>
</tr>
<tr class="odd">
<td style="text-align: left;">\?</td>
<td style="text-align: left;">?</td>
<td>\\?</td>
</tr>
<tr class="even">
<td style="text-align: left;">\(</td>
<td style="text-align: left;">(</td>
<td>\\(</td>
</tr>
<tr class="odd">
<td style="text-align: left;">\)</td>
<td style="text-align: left;">)</td>
<td>\\)</td>
</tr>
<tr class="even">
<td style="text-align: left;">\{</td>
<td style="text-align: left;">{</td>
<td>\\{</td>
</tr>
<tr class="odd">
<td style="text-align: left;">\}</td>
<td style="text-align: left;">}</td>
<td>\\}</td>
</tr>
<tr class="even">
<td style="text-align: left;">\n</td>
<td style="text-align: left;">newline</td>
<td>\\n</td>
</tr>
<tr class="odd">
<td style="text-align: left;">\t</td>
<td style="text-align: left;">tab</td>
<td>\\t</td>
</tr>
<tr class="even">
<td style="text-align: left;">\\</td>
<td style="text-align: left;">backslash \</td>
<td>\\\\</td>
</tr>
<tr class="odd">
<td style="text-align: left;">\’</td>
<td style="text-align: left;">apostrophe ’</td>
<td>\\’</td>
</tr>
<tr class="even">
<td style="text-align: left;">\”</td>
<td style="text-align: left;">quotation mark ”</td>
<td>\\”</td>
</tr>
<tr class="odd">
<td style="text-align: left;">\`</td>
<td style="text-align: left;">backtick `</td>
<td>\\`</td>
</tr>
</tbody>
</table>
<p>Here are just a few example to so you can see how R deals with these special characters.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>string <span class="ot">&lt;-</span> <span class="st">"Dear diary</span><span class="sc">\n</span><span class="st">What is wrong with me</span><span class="sc">\n</span><span class="st">My code never works as I entend"</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a><span class="co"># If we just print the string, we see it exactly as written.</span></span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(string)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Dear diary\nWhat is wrong with me\nMy code never works as I entend"</code></pre>
</div>
</div>
<p>The <code>writeLines()</code> function can be used to print the string where escaped characters are interpreted.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">writeLines</span>(string)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Dear diary
What is wrong with me
My code never works as I entend</code></pre>
</div>
</div>
<p>Let’s read a text file (.txt) in R and see what happens.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">"https://pmongeon.github.io/info6270/files/boring_story.txt"</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a><span class="co"># reads the file and produces a vector with one element for each line</span></span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a><span class="fu">read_lines</span>(url)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "This is a \"story\" that I wrote just for the INFO6270 course."               
[2] "It's a bit of a boring story, but it's just an example. So please forgive me."
[3] "...and they were happy ever after.\tThe end."                                 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="co"># reads the file and procudes a vector with a single element containing the entire content</span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a><span class="fu">read_file</span>(url) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "This is a \"story\" that I wrote just for the INFO6270 course.\nIt's a bit of a boring story, but it's just an example. So please forgive me.\n...and they were happy ever after.\tThe end."</code></pre>
</div>
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Let's read the whole file and print it with writeLines()</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a><span class="fu">read_file</span>(url) <span class="sc">%&gt;%</span> </span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">writeLines</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>This is a "story" that I wrote just for the INFO6270 course.
It's a bit of a boring story, but it's just an example. So please forgive me.
...and they were happy ever after.  The end.</code></pre>
</div>
</div>
</section>
<section id="summary" class="level3" data-number="4.3.10">
<h3 data-number="4.3.10" class="anchored" data-anchor-id="summary"><span class="header-section-number">4.3.10</span> Summary</h3>
<p>This chapter introduced you to the stringr package and the general principles of manipulating and matching character patterns in R. The goal was to give you enough of the basics so that you can fix small issues with strings in the data that you might encounter in this course, and in your professional or personal lives.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./reading_and_tidying_data.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Reading and tidying data</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./publishing_with_r.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Publishing with R</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>