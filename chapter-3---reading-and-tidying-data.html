<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 - Reading and tidying data | INFO 6270 - Introduction to Data Science</title>
  <meta name="description" content="Chapter 3 - Reading and tidying data | INFO 6270 - Introduction to Data Science" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 - Reading and tidying data | INFO 6270 - Introduction to Data Science" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="pmongeon/info6270" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 - Reading and tidying data | INFO 6270 - Introduction to Data Science" />
  
  
  

<meta name="author" content="Philippe Mongeon" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="chapter-2---getting-started-with-r.html"/>
<link rel="next" href="chapter-4---working-with-strings.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><center>INFO6270 - Introduction to Data Science</center></li>
<li><center>Winter 2022</center></li>
<li><center>Philippe Mongeon</center></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Course overview</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#schedule"><i class="fa fa-check"></i>Schedule</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#assignments"><i class="fa fa-check"></i>Assignments</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#bibliography"><i class="fa fa-check"></i>Bibliography</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#official-syllabus"><i class="fa fa-check"></i>Official syllabus</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-1---what-is-data-science.html"><a href="chapter-1---what-is-data-science.html"><i class="fa fa-check"></i>Chapter 1 - What is data science?</a>
<ul>
<li class="chapter" data-level="" data-path="chapter-1---what-is-data-science.html"><a href="chapter-1---what-is-data-science.html#learning-objectives"><i class="fa fa-check"></i>Learning objectives</a></li>
<li class="chapter" data-level="" data-path="chapter-1---what-is-data-science.html"><a href="chapter-1---what-is-data-science.html#what-is-data-science"><i class="fa fa-check"></i>What is data science?</a></li>
<li class="chapter" data-level="" data-path="chapter-1---what-is-data-science.html"><a href="chapter-1---what-is-data-science.html#the-data-science-process"><i class="fa fa-check"></i>The data science process</a></li>
<li class="chapter" data-level="" data-path="chapter-1---what-is-data-science.html"><a href="chapter-1---what-is-data-science.html#writing-a-problem-statement"><i class="fa fa-check"></i>Writing a problem statement</a></li>
<li class="chapter" data-level="" data-path="chapter-1---what-is-data-science.html"><a href="chapter-1---what-is-data-science.html#getting-data"><i class="fa fa-check"></i>Getting data</a></li>
<li class="chapter" data-level="" data-path="chapter-1---what-is-data-science.html"><a href="chapter-1---what-is-data-science.html#homework"><i class="fa fa-check"></i>Homework</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-2---getting-started-with-r.html"><a href="chapter-2---getting-started-with-r.html"><i class="fa fa-check"></i>Chapter 2 - Getting started with R</a>
<ul>
<li class="chapter" data-level="" data-path="chapter-2---getting-started-with-r.html"><a href="chapter-2---getting-started-with-r.html#learning-objectives-1"><i class="fa fa-check"></i>Learning objectives</a></li>
<li class="chapter" data-level="" data-path="chapter-2---getting-started-with-r.html"><a href="chapter-2---getting-started-with-r.html#setting-up-r"><i class="fa fa-check"></i>Setting up R</a>
<ul>
<li class="chapter" data-level="" data-path="chapter-2---getting-started-with-r.html"><a href="chapter-2---getting-started-with-r.html#installing-r-and-rstudio"><i class="fa fa-check"></i>Installing R and Rstudio</a></li>
<li class="chapter" data-level="" data-path="chapter-2---getting-started-with-r.html"><a href="chapter-2---getting-started-with-r.html#explore-rstudio"><i class="fa fa-check"></i>Explore RStudio</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-2---getting-started-with-r.html"><a href="chapter-2---getting-started-with-r.html#first-steps-in-r"><i class="fa fa-check"></i>First steps in R</a>
<ul>
<li class="chapter" data-level="" data-path="chapter-2---getting-started-with-r.html"><a href="chapter-2---getting-started-with-r.html#r-scripts"><i class="fa fa-check"></i>R scripts</a></li>
<li class="chapter" data-level="" data-path="chapter-2---getting-started-with-r.html"><a href="chapter-2---getting-started-with-r.html#working-directory"><i class="fa fa-check"></i>Working directory</a></li>
<li class="chapter" data-level="" data-path="chapter-2---getting-started-with-r.html"><a href="chapter-2---getting-started-with-r.html#functions"><i class="fa fa-check"></i>Functions</a></li>
<li class="chapter" data-level="" data-path="chapter-2---getting-started-with-r.html"><a href="chapter-2---getting-started-with-r.html#executing-code"><i class="fa fa-check"></i>Executing code</a></li>
<li class="chapter" data-level="" data-path="chapter-2---getting-started-with-r.html"><a href="chapter-2---getting-started-with-r.html#numbers-and-strings"><i class="fa fa-check"></i>numbers and strings</a></li>
<li class="chapter" data-level="" data-path="chapter-2---getting-started-with-r.html"><a href="chapter-2---getting-started-with-r.html#doing-the-math"><i class="fa fa-check"></i>Doing the math</a></li>
<li class="chapter" data-level="" data-path="chapter-2---getting-started-with-r.html"><a href="chapter-2---getting-started-with-r.html#objects"><i class="fa fa-check"></i>Objects</a></li>
<li class="chapter" data-level="" data-path="chapter-2---getting-started-with-r.html"><a href="chapter-2---getting-started-with-r.html#subsetting-data"><i class="fa fa-check"></i>Subsetting data</a></li>
<li class="chapter" data-level="" data-path="chapter-2---getting-started-with-r.html"><a href="chapter-2---getting-started-with-r.html#logical-operators"><i class="fa fa-check"></i>Logical operators</a></li>
<li class="chapter" data-level="" data-path="chapter-2---getting-started-with-r.html"><a href="chapter-2---getting-started-with-r.html#conditional-statements"><i class="fa fa-check"></i>Conditional statements</a></li>
<li class="chapter" data-level="" data-path="chapter-2---getting-started-with-r.html"><a href="chapter-2---getting-started-with-r.html#loops-and-vectorization"><i class="fa fa-check"></i>Loops and vectorization</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-2---getting-started-with-r.html"><a href="chapter-2---getting-started-with-r.html#homework-1"><i class="fa fa-check"></i>Homework</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html"><i class="fa fa-check"></i>Chapter 3 - Reading and tidying data</a>
<ul>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#learning-objectives-2"><i class="fa fa-check"></i>Learning objectives</a></li>
<li class="chapter" data-level="0.1" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#slides"><i class="fa fa-check"></i><b>0.1</b> <strong>Slides</strong></a></li>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#tidy-data"><i class="fa fa-check"></i>Tidy data</a></li>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#the-tidyverse"><i class="fa fa-check"></i>The tidyverse</a></li>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#import-data"><i class="fa fa-check"></i>Import data</a>
<ul>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#delimited-file-formats"><i class="fa fa-check"></i>Delimited file formats</a></li>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#json-files"><i class="fa fa-check"></i>JSON files</a></li>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#application-programming-interface-api"><i class="fa fa-check"></i>Application programming interface (API)</a></li>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#xml-files"><i class="fa fa-check"></i>XML files</a></li>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#connections"><i class="fa fa-check"></i>Connections</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#tidy-your-data"><i class="fa fa-check"></i>Tidy your data</a>
<ul>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#reshape-data"><i class="fa fa-check"></i>Reshape data</a></li>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#expand-tables"><i class="fa fa-check"></i>Expand tables</a></li>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#handle-missing-values"><i class="fa fa-check"></i>Handle missing values</a></li>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#merge-and-split-cells"><i class="fa fa-check"></i>Merge and split cells</a></li>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#nested-data"><i class="fa fa-check"></i>Nested data</a></li>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#combine-dataframes"><i class="fa fa-check"></i>Combine dataframes</a></li>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#join-dataframes"><i class="fa fa-check"></i>Join dataframes</a></li>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#rename-variables"><i class="fa fa-check"></i>Rename variables</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#export-data"><i class="fa fa-check"></i>Export data</a>
<ul>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#export-dataframes"><i class="fa fa-check"></i>Export dataframes</a></li>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#json"><i class="fa fa-check"></i>JSON</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#the-pipe"><i class="fa fa-check"></i>The Pipe</a></li>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#additional-resources"><i class="fa fa-check"></i>Additional resources</a></li>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#homework-2"><i class="fa fa-check"></i>Homework</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-4---working-with-strings.html"><a href="chapter-4---working-with-strings.html"><i class="fa fa-check"></i>Chapter 4 - Working with strings</a>
<ul>
<li class="chapter" data-level="" data-path="chapter-4---working-with-strings.html"><a href="chapter-4---working-with-strings.html#learning-objectives-3"><i class="fa fa-check"></i>Learning objectives</a></li>
<li class="chapter" data-level="0.2" data-path="chapter-4---working-with-strings.html"><a href="chapter-4---working-with-strings.html#the-stringr-package"><i class="fa fa-check"></i><b>0.2</b> The stringr package</a></li>
<li class="chapter" data-level="0.3" data-path="chapter-4---working-with-strings.html"><a href="chapter-4---working-with-strings.html#string-transformations"><i class="fa fa-check"></i><b>0.3</b> String transformations</a>
<ul>
<li class="chapter" data-level="0.3.1" data-path="chapter-4---working-with-strings.html"><a href="chapter-4---working-with-strings.html#change-string-character-case"><i class="fa fa-check"></i><b>0.3.1</b> change string character case</a></li>
<li class="chapter" data-level="0.3.2" data-path="chapter-4---working-with-strings.html"><a href="chapter-4---working-with-strings.html#combine-strings"><i class="fa fa-check"></i><b>0.3.2</b> Combine strings</a></li>
</ul></li>
<li class="chapter" data-level="0.4" data-path="chapter-4---working-with-strings.html"><a href="chapter-4---working-with-strings.html#special-characters"><i class="fa fa-check"></i><b>0.4</b> Special characters</a>
<ul>
<li class="chapter" data-level="0.4.1" data-path="chapter-4---working-with-strings.html"><a href="chapter-4---working-with-strings.html#split-strings"><i class="fa fa-check"></i><b>0.4.1</b> split strings</a></li>
<li class="chapter" data-level="0.4.2" data-path="chapter-4---working-with-strings.html"><a href="chapter-4---working-with-strings.html#subset-strings"><i class="fa fa-check"></i><b>0.4.2</b> subset strings</a></li>
</ul></li>
<li class="chapter" data-level="0.5" data-path="chapter-4---working-with-strings.html"><a href="chapter-4---working-with-strings.html#regular-expressions"><i class="fa fa-check"></i><b>0.5</b> Regular expressions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-5---describing-and-visualizing-data.html"><a href="chapter-5---describing-and-visualizing-data.html"><i class="fa fa-check"></i>Chapter 5 - Describing and visualizing data</a></li>
<li class="chapter" data-level="" data-path="chapter-6---network-analysis.html"><a href="chapter-6---network-analysis.html"><i class="fa fa-check"></i>Chapter 6 - Network analysis</a></li>
<li class="chapter" data-level="" data-path="chapter-7---topic-modelling.html"><a href="chapter-7---topic-modelling.html"><i class="fa fa-check"></i>Chapter 7 - Topic modelling</a></li>
<li class="chapter" data-level="" data-path="chapter-8---k-nearest-neighbors.html"><a href="chapter-8---k-nearest-neighbors.html"><i class="fa fa-check"></i>Chapter 8 - K nearest neighbors</a></li>
<li class="chapter" data-level="" data-path="chapter-9---logistic-regression.html"><a href="chapter-9---logistic-regression.html"><i class="fa fa-check"></i>Chapter 9 - Logistic regression</a></li>
<li class="chapter" data-level="" data-path="chapter-10---linear-regression.html"><a href="chapter-10---linear-regression.html"><i class="fa fa-check"></i>Chapter 10 - Linear regression</a></li>
<li class="chapter" data-level="" data-path="chapter-11---principal-component-analysis.html"><a href="chapter-11---principal-component-analysis.html"><i class="fa fa-check"></i>Chapter 11 - Principal component analysis</a></li>
<li class="chapter" data-level="" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i>Conclusion</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">INFO 6270 - Introduction to Data Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="chapter-3---reading-and-tidying-data" class="section level1 unnumbered">
<h1>Chapter 3 - Reading and tidying data</h1>
<div id="learning-objectives-2" class="section level2 unnumbered">
<h2>Learning objectives</h2>
<ul>
<li>Import data in R</li>
<li>Make data tidy with the tidyverse</li>
<li>Export data</li>
<li>Use the pipe to write clearer code</li>
</ul>
</div>
<div id="slides" class="section level2" number="0.1">
<h2><span class="header-section-number">0.1</span> <strong>Slides</strong></h2>
<iframe width="600" height="400" marginheight="0" marginwidth="0" src="https://pmongeon.github.io//info6270/slides/slides_ch3.html#/">
</iframe>
<p><a href="https://pmongeon.github.io//info6270/slides/slides_ch3.html#/">Full screen slides</a></p>
</div>
<div id="tidy-data" class="section level2 unnumbered">
<h2>Tidy data</h2>
<p>Tidy data is a set of principles adapted from the relational model (those of you who took my data management course will be familiar with the relational model). The principles are:</p>
<ol style="list-style-type: decimal">
<li><p>Each variable forms a column.</p></li>
<li><p>Each observation forms a row.</p></li>
<li><p>Each type of observational unit forms a table.</p></li>
</ol>
<p>You can read more about tidy data the R for Data Science book <span class="citation"><a href="#ref-wickham_r_2016" role="doc-biblioref">Wickham and Grolemund</a> (<a href="#ref-wickham_r_2016" role="doc-biblioref">2016</a>)</span>, or the journal article by <span class="citation"><a href="#ref-wickham_tidy_2014" role="doc-biblioref">Wickham</a> (<a href="#ref-wickham_tidy_2014" role="doc-biblioref">2014</a>)</span>.</p>
</div>
<div id="the-tidyverse" class="section level2 unnumbered">
<h2>The tidyverse</h2>
<p>The tidyverse is a collection of R packages and functions designed to help you make data tidy and work with tidy data. You can read more about the tidy verse and its packages here: <a href="https://www.tidyverse.org" class="uri">https://www.tidyverse.org</a>. The code below loads the tidyverse and returns the list of packages it includes.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="chapter-3---reading-and-tidying-data.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="chapter-3---reading-and-tidying-data.html#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tidyverse_packages</span>()</span></code></pre></div>
<pre><code>##  [1] &quot;broom&quot;         &quot;cli&quot;           &quot;crayon&quot;        &quot;dbplyr&quot;       
##  [5] &quot;dplyr&quot;         &quot;dtplyr&quot;        &quot;forcats&quot;       &quot;googledrive&quot;  
##  [9] &quot;googlesheets4&quot; &quot;ggplot2&quot;       &quot;haven&quot;         &quot;hms&quot;          
## [13] &quot;httr&quot;          &quot;jsonlite&quot;      &quot;lubridate&quot;     &quot;magrittr&quot;     
## [17] &quot;modelr&quot;        &quot;pillar&quot;        &quot;purrr&quot;         &quot;readr&quot;        
## [21] &quot;readxl&quot;        &quot;reprex&quot;        &quot;rlang&quot;         &quot;rstudioapi&quot;   
## [25] &quot;rvest&quot;         &quot;stringr&quot;       &quot;tibble&quot;        &quot;tidyr&quot;        
## [29] &quot;xml2&quot;          &quot;tidyverse&quot;</code></pre>
<p>In the next sections, we will use a few of the tidyverse packages (but not exclusively) to import data into R from multiple types of source. Because the tidy format is pretty standard and not R-specific, you might often find that the data sets that you will work with are already respecting the tidy principles. But you’ll also come across different data structures and formats, and so we’ll learn how to tidy up data.</p>
</div>
<div id="import-data" class="section level2 unnumbered">
<h2>Import data</h2>
<p>The following sections show how to load data from different sources and format into R.</p>
<div id="delimited-file-formats" class="section level3 unnumbered">
<h3>Delimited file formats</h3>
<p>The readr package (<a href="https://readr.tidyverse.org/" class="uri">https://readr.tidyverse.org/</a>) has a few useful functions for reading delimited file formats like comma-separated values (.csv) and tab-delimited values (.tsv) or any other type of delimiter. Here are a few examples (if you want to run the examples on your computer, you can download the titanic dataset in different formats <a href="https://pmongeon.github.io/info6270/files/data/titanic.zip">here</a>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="chapter-3---reading-and-tidying-data.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Imports a comma-separated file and saves it into a data frame called titanic</span></span>
<span id="cb3-2"><a href="chapter-3---reading-and-tidying-data.html#cb3-2" aria-hidden="true" tabindex="-1"></a>titanic <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;tinatic.csv&quot;</span>)</span>
<span id="cb3-3"><a href="chapter-3---reading-and-tidying-data.html#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="chapter-3---reading-and-tidying-data.html#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Same, but with a tab-separated file (works with tab-separated .txt files also)</span></span>
<span id="cb3-5"><a href="chapter-3---reading-and-tidying-data.html#cb3-5" aria-hidden="true" tabindex="-1"></a>titanic <span class="ot">&lt;-</span> <span class="fu">read_tsv</span>(<span class="st">&quot;titanic.tsv&quot;</span>)</span>
<span id="cb3-6"><a href="chapter-3---reading-and-tidying-data.html#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="chapter-3---reading-and-tidying-data.html#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Same, but with a txt file in which the columns are separated with a vertical bar.</span></span>
<span id="cb3-8"><a href="chapter-3---reading-and-tidying-data.html#cb3-8" aria-hidden="true" tabindex="-1"></a>titanic <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="st">&quot;titatic.txt&quot;</span>, <span class="at">delim=</span><span class="st">&quot;|&quot;</span>) </span>
<span id="cb3-9"><a href="chapter-3---reading-and-tidying-data.html#cb3-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-10"><a href="chapter-3---reading-and-tidying-data.html#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Same, but reading the file directly from a URL.</span></span>
<span id="cb3-11"><a href="chapter-3---reading-and-tidying-data.html#cb3-11" aria-hidden="true" tabindex="-1"></a>titanic <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;https://pmongeon.github.io/info6270/files/data/titanic.csv&quot;</span>)</span></code></pre></div>
<p>As you can see from the third example above, you can specify any delimiter using the <strong>delim</strong> argument of the <strong>read_delim</strong> function. You should also note that tab-delimited text files (.txt) are extremely common. You can read these files with the read_tsv() function even if the file as the .txt extension. Alternatively, you can use the read_delim() function and use <strong>delim = “\t”</strong></p>
<p>Often, you will see examples where the path to a file is first stored in an object, so the object name, rather than the whole path, can be used in the read_ functions. Like this:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="chapter-3---reading-and-tidying-data.html#cb4-1" aria-hidden="true" tabindex="-1"></a>path <span class="ot">&lt;-</span> <span class="st">&quot;https://pmongeon.github.io/info6270/files/data/titanic.csv&quot;</span></span>
<span id="cb4-2"><a href="chapter-3---reading-and-tidying-data.html#cb4-2" aria-hidden="true" tabindex="-1"></a>titanic <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(path)</span></code></pre></div>
<p>Another useful package is <strong>readxl (</strong><a href="https://readxl.tidyverse.org/" class="uri">https://readxl.tidyverse.org/</a>), which has functions to help you read data from Excel files.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="chapter-3---reading-and-tidying-data.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb5-2"><a href="chapter-3---reading-and-tidying-data.html#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="chapter-3---reading-and-tidying-data.html#cb5-3" aria-hidden="true" tabindex="-1"></a>path <span class="ot">&lt;-</span> <span class="st">&quot;https://pmongeon.github.io/info6270/files/data/halifax_weather.xlsx&quot;</span></span>
<span id="cb5-4"><a href="chapter-3---reading-and-tidying-data.html#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="chapter-3---reading-and-tidying-data.html#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co"># This will read the first sheet of the Excel file</span></span>
<span id="cb5-6"><a href="chapter-3---reading-and-tidying-data.html#cb5-6" aria-hidden="true" tabindex="-1"></a>halifax_weather <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(path)</span>
<span id="cb5-7"><a href="chapter-3---reading-and-tidying-data.html#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="chapter-3---reading-and-tidying-data.html#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co"># This will read the second sheet of the Excel file</span></span>
<span id="cb5-9"><a href="chapter-3---reading-and-tidying-data.html#cb5-9" aria-hidden="true" tabindex="-1"></a>halifax_weather <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(path, <span class="at">sheet =</span> <span class="dv">2</span>)</span>
<span id="cb5-10"><a href="chapter-3---reading-and-tidying-data.html#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="chapter-3---reading-and-tidying-data.html#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="co"># This will also read the second sheet of the Excel file </span></span>
<span id="cb5-12"><a href="chapter-3---reading-and-tidying-data.html#cb5-12" aria-hidden="true" tabindex="-1"></a>halifax_weather <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(path, <span class="at">sheet =</span> <span class="st">&quot;out&quot;</span>)</span>
<span id="cb5-13"><a href="chapter-3---reading-and-tidying-data.html#cb5-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-14"><a href="chapter-3---reading-and-tidying-data.html#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="co"># If you don&#39;t know what the names of the sheets are, you can read them like this </span></span>
<span id="cb5-15"><a href="chapter-3---reading-and-tidying-data.html#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="fu">excel_sheets</span>(path)</span></code></pre></div>
</div>
<div id="json-files" class="section level3 unnumbered">
<h3>JSON files</h3>
<p>The JSON format is very popular for exchanging information on the web, and is the typical format of the data that we retrieve from APIs (next). However the process for reading a JSON file and reading JSON data from an API are slightly different. This is how to convert a JSON file into a data frame using the <strong>fromJSON()</strong> function from the jsonlite package (included in the tidyverse).</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="chapter-3---reading-and-tidying-data.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(jsonlite)</span>
<span id="cb6-2"><a href="chapter-3---reading-and-tidying-data.html#cb6-2" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">fromJSON</span>(<span class="st">&quot;https://pmongeon.github.io/info6270/files/data/public_houing_ns.json&quot;</span>)</span></code></pre></div>
<p><strong>Important note:</strong> importing and working with JSON files with simple structures is relatively easy. However, reading more complex JSON files might require a little more work. Reading complex JSON structures is beyond the scope of this chapter.</p>
</div>
<div id="application-programming-interface-api" class="section level3 unnumbered">
<h3>Application programming interface (API)</h3>
<p>APIs allow you to interact with computers, servers or software by making making different request such as sending or retrieving data through the web. Some APIs can be used for free and anonymously, others might require that you identify your self with your email, for instance, and others will require that you create an account to obtain an api key that you can use in your code. Understanding APIs is beyond the scope of this course, but you should at least know that they exist and that they can be used to collect data for your data science projects. The R package that helps you work with APIs is <strong>httr</strong>. Below is an example of a request to retrieve data from a free anonymous API.</p>
<p><strong>Important note:</strong> You do not need to understand how all of the code works. I mainly want you to have a working piece of code that you can use as a template if you ever need to retrieve data from an API.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="chapter-3---reading-and-tidying-data.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the httr package</span></span>
<span id="cb7-2"><a href="chapter-3---reading-and-tidying-data.html#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(httr)</span>
<span id="cb7-3"><a href="chapter-3---reading-and-tidying-data.html#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="chapter-3---reading-and-tidying-data.html#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Make a request to an API to GET data</span></span>
<span id="cb7-5"><a href="chapter-3---reading-and-tidying-data.html#cb7-5" aria-hidden="true" tabindex="-1"></a>data <span class="ot">=</span> <span class="fu">GET</span>(<span class="st">&quot;https://openlibrary.org/api/books?bibkeys=OLID:OL22123296M&amp;format=json&quot;</span>)</span>
<span id="cb7-6"><a href="chapter-3---reading-and-tidying-data.html#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="chapter-3---reading-and-tidying-data.html#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="chapter-3---reading-and-tidying-data.html#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Isolate the content part of the information received from the API. This step is necessary because the GET request returns additional information about the request along with the requested data </span></span>
<span id="cb7-9"><a href="chapter-3---reading-and-tidying-data.html#cb7-9" aria-hidden="true" tabindex="-1"></a>data <span class="ot">=</span> <span class="fu">content</span>(data)</span>
<span id="cb7-10"><a href="chapter-3---reading-and-tidying-data.html#cb7-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-11"><a href="chapter-3---reading-and-tidying-data.html#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the data.table package for the rbindlist() function use in the code below.</span></span>
<span id="cb7-12"><a href="chapter-3---reading-and-tidying-data.html#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="co"># You may need to install the package first if you don&#39;t have it installed already.</span></span>
<span id="cb7-13"><a href="chapter-3---reading-and-tidying-data.html#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb7-14"><a href="chapter-3---reading-and-tidying-data.html#cb7-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-15"><a href="chapter-3---reading-and-tidying-data.html#cb7-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Converts the data retrieved from the API call to a tibble</span></span>
<span id="cb7-16"><a href="chapter-3---reading-and-tidying-data.html#cb7-16" aria-hidden="true" tabindex="-1"></a>data <span class="ot">=</span> <span class="fu">as_tibble</span>(<span class="fu">rbindlist</span>(data))</span></code></pre></div>
</div>
<div id="xml-files" class="section level3 unnumbered">
<h3>XML files</h3>
<p>The <strong>xml2</strong> package (also included in the tidyverse) provides a set of functions to work with data in the XML format. The conversion of XML data into a data frame is not so straightforward because of the nested structure of the XML. If you need to import XML data in R, the following code performs a series of steps that convert a XML file from <a href="https://data.novascotia.ca">data.novascotia.ca</a> website data into a tibble. We will explore this code in more details further in this chapter, when we look more closely at the <strong>unnest()</strong> function.</p>
<p><strong>Important note</strong>: the goal here is mainly to provide you with a piece of code that works, so that you can use it as a template to read XML files if you need to and convert them into data frames.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="chapter-3---reading-and-tidying-data.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(xml2)</span>
<span id="cb8-2"><a href="chapter-3---reading-and-tidying-data.html#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="chapter-3---reading-and-tidying-data.html#cb8-3" aria-hidden="true" tabindex="-1"></a>path <span class="ot">&lt;-</span> <span class="st">&quot;https://data.novascotia.ca/api/views/2d4m-9e6x/rows.xml&quot;</span></span>
<span id="cb8-4"><a href="chapter-3---reading-and-tidying-data.html#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="chapter-3---reading-and-tidying-data.html#cb8-5" aria-hidden="true" tabindex="-1"></a>public_housing_xml <span class="ot">=</span> <span class="fu">as_list</span>(<span class="fu">read_xml</span>(path))</span>
<span id="cb8-6"><a href="chapter-3---reading-and-tidying-data.html#cb8-6" aria-hidden="true" tabindex="-1"></a>public_housing <span class="ot">=</span> <span class="fu">as_tibble</span>(public_housing_xml) </span>
<span id="cb8-7"><a href="chapter-3---reading-and-tidying-data.html#cb8-7" aria-hidden="true" tabindex="-1"></a>public_housing <span class="ot">=</span> <span class="fu">unnest_longer</span>(public_housing, <span class="fu">colnames</span>(public_housing)[<span class="dv">1</span>])</span>
<span id="cb8-8"><a href="chapter-3---reading-and-tidying-data.html#cb8-8" aria-hidden="true" tabindex="-1"></a>public_housing <span class="ot">=</span> <span class="fu">unnest_wider</span>(public_housing, <span class="fu">colnames</span>(public_housing)[<span class="dv">1</span>]) </span>
<span id="cb8-9"><a href="chapter-3---reading-and-tidying-data.html#cb8-9" aria-hidden="true" tabindex="-1"></a>public_housing <span class="ot">=</span> <span class="fu">unnest</span>(public_housing, <span class="at">cols =</span> <span class="fu">names</span>(public_housing))  </span>
<span id="cb8-10"><a href="chapter-3---reading-and-tidying-data.html#cb8-10" aria-hidden="true" tabindex="-1"></a>public_housing <span class="ot">=</span> <span class="fu">unnest</span>(public_housing, <span class="at">cols =</span> <span class="fu">names</span>(public_housing))</span>
<span id="cb8-11"><a href="chapter-3---reading-and-tidying-data.html#cb8-11" aria-hidden="true" tabindex="-1"></a>public_housing <span class="ot">=</span> <span class="fu">type_convert</span>(public_housing)</span></code></pre></div>
</div>
<div id="connections" class="section level3 unnumbered">
<h3>Connections</h3>
<p><strong>Important note</strong>: This section is a little bit advanced, so please do not feel like you need to master database and file connections at this point in your R journey. I am including this here to raise your awareness of connection and again, give you some working pieces of code that you can use if you ever want or need to access data stored in a large file or database.</p>
<div id="connect-to-a-file" class="section level4 unnumbered">
<h4>Connect to a file</h4>
<p>If you are trying to read a very large file, you may run into issues because the object in your environment are stored in your computer’s memory (RAM). So if your computer has 4GB of RAM, then files larger than 4GB can’t be imported into a data frame, for instance. One solution is to create a <strong>connection</strong> to the file and then processing the data a certain number of lines at a time. Here is an example.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="chapter-3---reading-and-tidying-data.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># open the connection to a text file containing data</span></span>
<span id="cb9-2"><a href="chapter-3---reading-and-tidying-data.html#cb9-2" aria-hidden="true" tabindex="-1"></a>path <span class="ot">&lt;-</span> <span class="st">&quot;https://pmongeon.github.io/info6270/files/data/titanic.txt&quot;</span></span>
<span id="cb9-3"><a href="chapter-3---reading-and-tidying-data.html#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="chapter-3---reading-and-tidying-data.html#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co"># open a connection to the file (note that connections are stored as objects)</span></span>
<span id="cb9-5"><a href="chapter-3---reading-and-tidying-data.html#cb9-5" aria-hidden="true" tabindex="-1"></a>con <span class="ot">&lt;-</span> <span class="fu">file</span>(path, <span class="at">open=</span><span class="st">&quot;rb&quot;</span>)</span>
<span id="cb9-6"><a href="chapter-3---reading-and-tidying-data.html#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="chapter-3---reading-and-tidying-data.html#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Read the first 10 lines and print them</span></span>
<span id="cb9-8"><a href="chapter-3---reading-and-tidying-data.html#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="fu">readLines</span>(con, <span class="at">n =</span> <span class="dv">10</span>)</span>
<span id="cb9-9"><a href="chapter-3---reading-and-tidying-data.html#cb9-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-10"><a href="chapter-3---reading-and-tidying-data.html#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Read the NEXT 10 lines and print them.</span></span>
<span id="cb9-11"><a href="chapter-3---reading-and-tidying-data.html#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="fu">readLines</span>(con, <span class="at">n=</span><span class="dv">10</span>) </span>
<span id="cb9-12"><a href="chapter-3---reading-and-tidying-data.html#cb9-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-13"><a href="chapter-3---reading-and-tidying-data.html#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Close the connection to the file.</span></span>
<span id="cb9-14"><a href="chapter-3---reading-and-tidying-data.html#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="fu">close</span>(con)</span></code></pre></div>
<p>If you wanted to go through the entire file, 50 lines at a time, and do something.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="chapter-3---reading-and-tidying-data.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># open the connection to a text file containing data.</span></span>
<span id="cb10-2"><a href="chapter-3---reading-and-tidying-data.html#cb10-2" aria-hidden="true" tabindex="-1"></a>path <span class="ot">&lt;-</span> <span class="st">&quot;https://pmongeon.github.io/info6270/files/data/titanic.txt&quot;</span></span>
<span id="cb10-3"><a href="chapter-3---reading-and-tidying-data.html#cb10-3" aria-hidden="true" tabindex="-1"></a>con <span class="ot">&lt;-</span> <span class="fu">file</span>(path, <span class="at">open=</span><span class="st">&quot;rb&quot;</span>)</span>
<span id="cb10-4"><a href="chapter-3---reading-and-tidying-data.html#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="chapter-3---reading-and-tidying-data.html#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co"># this will read 50 lines and print them until the end of the file has been reached.</span></span>
<span id="cb10-6"><a href="chapter-3---reading-and-tidying-data.html#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="cf">repeat</span> { </span>
<span id="cb10-7"><a href="chapter-3---reading-and-tidying-data.html#cb10-7" aria-hidden="true" tabindex="-1"></a>  x<span class="ot">&lt;-</span><span class="fu">readLines</span>(con, <span class="at">n =</span> <span class="dv">50</span>)</span>
<span id="cb10-8"><a href="chapter-3---reading-and-tidying-data.html#cb10-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is_empty</span>(x) <span class="sc">==</span> <span class="cn">TRUE</span>) <span class="cf">break</span> <span class="cf">else</span> <span class="fu">print</span>(x)</span>
<span id="cb10-9"><a href="chapter-3---reading-and-tidying-data.html#cb10-9" aria-hidden="true" tabindex="-1"></a>} </span>
<span id="cb10-10"><a href="chapter-3---reading-and-tidying-data.html#cb10-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-11"><a href="chapter-3---reading-and-tidying-data.html#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Close the connection to the file.</span></span>
<span id="cb10-12"><a href="chapter-3---reading-and-tidying-data.html#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="fu">close</span>(con)</span></code></pre></div>
</div>
<div id="connect-to-a-database" class="section level4 unnumbered">
<h4>Connect to a database</h4>
<p>You can also connect to practically all types of local or remote databases and servers as long as you have the required credentials. For example, the RMySQL package is great to work with MySQL databases. You can connect to a MySQL database (provided that you have a user name and password and the other information required by the dbConnect() function). With the RSQLite package, you can also work with local SQL databases stored in a single file on your computer with <a href="https://www.sqlite.org/index.html">SQLite</a>. The code below shows you how to connect to MySQL or SQLite databases in R.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="chapter-3---reading-and-tidying-data.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="do">## This creates a connection to a MySQL database for which you would need access credentials.</span></span>
<span id="cb11-2"><a href="chapter-3---reading-and-tidying-data.html#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="chapter-3---reading-and-tidying-data.html#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RMySQL)</span>
<span id="cb11-4"><a href="chapter-3---reading-and-tidying-data.html#cb11-4" aria-hidden="true" tabindex="-1"></a>con <span class="ot">=</span> <span class="fu">dbConnect</span>(<span class="fu">MySQL</span>(),</span>
<span id="cb11-5"><a href="chapter-3---reading-and-tidying-data.html#cb11-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">user =</span> <span class="st">&quot;username&quot;</span>,</span>
<span id="cb11-6"><a href="chapter-3---reading-and-tidying-data.html#cb11-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">password =</span> <span class="st">&quot;password&quot;</span>,</span>
<span id="cb11-7"><a href="chapter-3---reading-and-tidying-data.html#cb11-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">host =</span> <span class="st">&quot;host&quot;</span>,</span>
<span id="cb11-8"><a href="chapter-3---reading-and-tidying-data.html#cb11-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">port =</span> port_number, </span>
<span id="cb11-9"><a href="chapter-3---reading-and-tidying-data.html#cb11-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">dbname =</span> <span class="st">&quot;database name&quot;</span>)</span>
<span id="cb11-10"><a href="chapter-3---reading-and-tidying-data.html#cb11-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-11"><a href="chapter-3---reading-and-tidying-data.html#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="co"># This opens a connection called db to the info6270 SQLite database.</span></span>
<span id="cb11-12"><a href="chapter-3---reading-and-tidying-data.html#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="co"># If the database doesn&#39;t exist, this code will also create it.</span></span>
<span id="cb11-13"><a href="chapter-3---reading-and-tidying-data.html#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RSQLite)</span>
<span id="cb11-14"><a href="chapter-3---reading-and-tidying-data.html#cb11-14" aria-hidden="true" tabindex="-1"></a>con <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(<span class="at">drv =</span> <span class="fu">SQLite</span>(), <span class="at">dbname=</span> <span class="st">&quot;C:/info6270.db&quot;</span>)</span></code></pre></div>
<p>Once the connection is established, you can interact with the database with the same functions presented in the MySQL example above.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="chapter-3---reading-and-tidying-data.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># lists table in the database access through the db connection.</span></span>
<span id="cb12-2"><a href="chapter-3---reading-and-tidying-data.html#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dbListTables</span>(con)</span>
<span id="cb12-3"><a href="chapter-3---reading-and-tidying-data.html#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="chapter-3---reading-and-tidying-data.html#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co"># liste fields from a table</span></span>
<span id="cb12-5"><a href="chapter-3---reading-and-tidying-data.html#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="fu">dbListFields</span>(con,<span class="st">&quot;table_name&quot;</span>)</span>
<span id="cb12-6"><a href="chapter-3---reading-and-tidying-data.html#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="chapter-3---reading-and-tidying-data.html#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="co"># import the results of a SQL query </span></span>
<span id="cb12-8"><a href="chapter-3---reading-and-tidying-data.html#cb12-8" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(con, <span class="st">&quot;SQL query&quot;</span>)</span>
<span id="cb12-9"><a href="chapter-3---reading-and-tidying-data.html#cb12-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-10"><a href="chapter-3---reading-and-tidying-data.html#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="co"># import all the data from a table</span></span>
<span id="cb12-11"><a href="chapter-3---reading-and-tidying-data.html#cb12-11" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">dbReadTable</span>(con, <span class="st">&quot;table name&quot;</span>)</span>
<span id="cb12-12"><a href="chapter-3---reading-and-tidying-data.html#cb12-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-13"><a href="chapter-3---reading-and-tidying-data.html#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="co"># upload a data frame to a table (change options as needed)</span></span>
<span id="cb12-14"><a href="chapter-3---reading-and-tidying-data.html#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, data, <span class="st">&quot;table name&quot;</span>, <span class="at">row.names=</span><span class="cn">FALSE</span>, <span class="at">overwrite =</span> <span class="cn">FALSE</span>, <span class="at">append =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
</div>
</div>
</div>
<div id="tidy-your-data" class="section level2 unnumbered">
<h2>Tidy your data</h2>
<p>Now we know how to import data into R. However, not all data comes in a nice and tidy shape, even if the data is already shaped like a table. In this section, we’ll explore how to change the structure of your data frames with <strong>tidyr</strong> (<a href="https://tidyr.tidyverse.org/" class="uri">https://tidyr.tidyverse.org/</a>).</p>
<div id="reshape-data" class="section level3 unnumbered">
<h3>Reshape data</h3>
<p>The reshape functions include pivot_longer() and its opposite, pivot_wider(). Let’s look at how they work. First we create a tibble with the amount of funding received by some universities from the Canadian Tri-council.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="chapter-3---reading-and-tidying-data.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This creates a funding tibble with 4 columns and some data.</span></span>
<span id="cb13-2"><a href="chapter-3---reading-and-tidying-data.html#cb13-2" aria-hidden="true" tabindex="-1"></a>funding <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">university =</span> <span class="fu">as.character</span>(<span class="fu">c</span>(<span class="st">&quot;DAL&quot;</span>,<span class="st">&quot;SMU&quot;</span>,<span class="st">&quot;SFX&quot;</span>)),</span>
<span id="cb13-3"><a href="chapter-3---reading-and-tidying-data.html#cb13-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">SSHRC =</span> <span class="fu">as.numeric</span>(<span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>,<span class="dv">3</span>)),</span>
<span id="cb13-4"><a href="chapter-3---reading-and-tidying-data.html#cb13-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">NSERC =</span> <span class="fu">as.numeric</span>(<span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>,<span class="dv">3</span>)),</span>
<span id="cb13-5"><a href="chapter-3---reading-and-tidying-data.html#cb13-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">CIHR =</span> <span class="fu">as.numeric</span>(<span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>,<span class="dv">3</span>)))</span>
<span id="cb13-6"><a href="chapter-3---reading-and-tidying-data.html#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="chapter-3---reading-and-tidying-data.html#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Note: the sample(1:100,3) function randomly chooses three values between 1 and 100.</span></span></code></pre></div>
<div id="pivot_longer" class="section level4 unnumbered">
<h4><strong>pivot_longer()</strong></h4>
<p>The pivot_longer() function makes your data longer by appending multiple columns together in two column.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="chapter-3---reading-and-tidying-data.html#cb14-1" aria-hidden="true" tabindex="-1"></a>funding <span class="ot">=</span> <span class="fu">pivot_longer</span>(funding, <span class="at">cols =</span> <span class="fu">c</span>(<span class="st">&quot;SSHRC&quot;</span>,<span class="st">&quot;NSERC&quot;</span>,<span class="st">&quot;CIHR&quot;</span>), <span class="at">names_to =</span> <span class="st">&quot;funder&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;funding_amount&quot;</span>)</span>
<span id="cb14-2"><a href="chapter-3---reading-and-tidying-data.html#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="chapter-3---reading-and-tidying-data.html#cb14-3" aria-hidden="true" tabindex="-1"></a>funding</span></code></pre></div>
<pre><code>## # A tibble: 9 x 3
##   university funder funding_amount
##   &lt;chr&gt;      &lt;chr&gt;           &lt;dbl&gt;
## 1 DAL        SSHRC              39
## 2 DAL        NSERC              21
## 3 DAL        CIHR               39
## 4 SMU        SSHRC              97
## 5 SMU        NSERC              68
## 6 SMU        CIHR               49
## 7 SFX        SSHRC              45
## 8 SFX        NSERC              38
## 9 SFX        CIHR               48</code></pre>
</div>
<div id="pivot_wider" class="section level4 unnumbered">
<h4>pivot_wider()</h4>
<p>The pivot_wider() function does the opposite of pivot_longer() and takes a column with names and another with values and creates a new column for each name and storing the value in it. The following example will perhaps make this clearer.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="chapter-3---reading-and-tidying-data.html#cb16-1" aria-hidden="true" tabindex="-1"></a>funding <span class="ot">=</span> <span class="fu">pivot_wider</span>(funding, <span class="at">names_from =</span> funder, <span class="at">values_from =</span> funding_amount)</span>
<span id="cb16-2"><a href="chapter-3---reading-and-tidying-data.html#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="chapter-3---reading-and-tidying-data.html#cb16-3" aria-hidden="true" tabindex="-1"></a>funding</span></code></pre></div>
<pre><code>## # A tibble: 3 x 4
##   university SSHRC NSERC  CIHR
##   &lt;chr&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 DAL           39    21    39
## 2 SMU           97    68    49
## 3 SFX           45    38    48</code></pre>
</div>
</div>
<div id="expand-tables" class="section level3 unnumbered">
<h3>Expand tables</h3>
<p>Let’s create a new funding tibble to explore some more tidyr functions.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="chapter-3---reading-and-tidying-data.html#cb18-1" aria-hidden="true" tabindex="-1"></a>funding <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">university =</span> <span class="fu">as.character</span>(<span class="fu">c</span>(<span class="st">&quot;DAL&quot;</span>,<span class="st">&quot;DAL&quot;</span>,<span class="st">&quot;DAL&quot;</span>,<span class="st">&quot;SMU&quot;</span>,<span class="st">&quot;SMU&quot;</span>,<span class="st">&quot;SFX&quot;</span>,<span class="st">&quot;SFX&quot;</span>)),</span>
<span id="cb18-2"><a href="chapter-3---reading-and-tidying-data.html#cb18-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">funder =</span> <span class="fu">as.character</span>(<span class="fu">c</span>(<span class="st">&quot;SSHRC&quot;</span>,<span class="st">&quot;NSERC&quot;</span>,<span class="st">&quot;CIHR&quot;</span>,<span class="st">&quot;SSHRC&quot;</span>,<span class="st">&quot;CIHR&quot;</span>,<span class="st">&quot;NSERC&quot;</span>,<span class="st">&quot;CIHR&quot;</span>)),</span>
<span id="cb18-3"><a href="chapter-3---reading-and-tidying-data.html#cb18-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">n_grants =</span> <span class="fu">as.numeric</span>(<span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>, <span class="dv">7</span>))) </span>
<span id="cb18-4"><a href="chapter-3---reading-and-tidying-data.html#cb18-4" aria-hidden="true" tabindex="-1"></a>funding</span></code></pre></div>
<pre><code>## # A tibble: 7 x 3
##   university funder n_grants
##   &lt;chr&gt;      &lt;chr&gt;     &lt;dbl&gt;
## 1 DAL        SSHRC        57
## 2 DAL        NSERC        56
## 3 DAL        CIHR         47
## 4 SMU        SSHRC       100
## 5 SMU        CIHR         61
## 6 SFX        NSERC        88
## 7 SFX        CIHR         96</code></pre>
<div id="expand" class="section level4 unnumbered">
<h4>expand()</h4>
<p>The expand() function creates all possible combinations of elements contained in a two or more columns indicated in the function’s argument and drops other columns. The example below returns the possible combinations of universities and funders in the funding tibble we created. You can see that the SMU - NSERC combination and the SFX - SSHRC combination appear even though they are not present in the funding tibble.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="chapter-3---reading-and-tidying-data.html#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">expand</span>(funding, university, funder)</span></code></pre></div>
<pre><code>## # A tibble: 9 x 2
##   university funder
##   &lt;chr&gt;      &lt;chr&gt; 
## 1 DAL        CIHR  
## 2 DAL        NSERC 
## 3 DAL        SSHRC 
## 4 SFX        CIHR  
## 5 SFX        NSERC 
## 6 SFX        SSHRC 
## 7 SMU        CIHR  
## 8 SMU        NSERC 
## 9 SMU        SSHRC</code></pre>
</div>
<div id="complete" class="section level4 unnumbered">
<h4>complete()</h4>
<p>The complete function does the same thing as the expand() function but it <strong>keeps</strong> the columns not provided to the function.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="chapter-3---reading-and-tidying-data.html#cb22-1" aria-hidden="true" tabindex="-1"></a>funding <span class="ot">=</span> <span class="fu">complete</span>(funding, university, funder)</span>
<span id="cb22-2"><a href="chapter-3---reading-and-tidying-data.html#cb22-2" aria-hidden="true" tabindex="-1"></a>funding</span></code></pre></div>
<pre><code>## # A tibble: 9 x 3
##   university funder n_grants
##   &lt;chr&gt;      &lt;chr&gt;     &lt;dbl&gt;
## 1 DAL        CIHR         47
## 2 DAL        NSERC        56
## 3 DAL        SSHRC        57
## 4 SFX        CIHR         96
## 5 SFX        NSERC        88
## 6 SFX        SSHRC        NA
## 7 SMU        CIHR         61
## 8 SMU        NSERC        NA
## 9 SMU        SSHRC       100</code></pre>
</div>
</div>
<div id="handle-missing-values" class="section level3 unnumbered">
<h3>Handle missing values</h3>
<p>Sometimes your dataset is incomplete for one reason or another. Such a reason could be a participant to a survey that did not complete the survey or answer all the questions. What to do with the missing values or incomplete records depends on the nature of the data and the goal of your analysis.</p>
<div id="drop_na" class="section level4 unnumbered">
<h4>drop_na()</h4>
<p>The <strong>drop_na()</strong> function is useful to remove incomplete observations in the data (i.e., rows for which one of the column contains no value. The code below includes a statement that removes all incomplete observations, and one where we specify the columns names that should be scanned for NA values (the rows won’t be deleted if there are NAs in the other columns).</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="chapter-3---reading-and-tidying-data.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This removes all incomplete observations</span></span>
<span id="cb24-2"><a href="chapter-3---reading-and-tidying-data.html#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">drop_na</span>(funding) </span></code></pre></div>
<pre><code>## # A tibble: 7 x 3
##   university funder n_grants
##   &lt;chr&gt;      &lt;chr&gt;     &lt;dbl&gt;
## 1 DAL        CIHR         47
## 2 DAL        NSERC        56
## 3 DAL        SSHRC        57
## 4 SFX        CIHR         96
## 5 SFX        NSERC        88
## 6 SMU        CIHR         61
## 7 SMU        SSHRC       100</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="chapter-3---reading-and-tidying-data.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This would remove rows where the n_grants column is null and ignore null values in other</span></span>
<span id="cb26-2"><a href="chapter-3---reading-and-tidying-data.html#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="co"># columns.</span></span>
<span id="cb26-3"><a href="chapter-3---reading-and-tidying-data.html#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="fu">drop_na</span>(funding, n_grants)</span></code></pre></div>
<pre><code>## # A tibble: 7 x 3
##   university funder n_grants
##   &lt;chr&gt;      &lt;chr&gt;     &lt;dbl&gt;
## 1 DAL        CIHR         47
## 2 DAL        NSERC        56
## 3 DAL        SSHRC        57
## 4 SFX        CIHR         96
## 5 SFX        NSERC        88
## 6 SMU        CIHR         61
## 7 SMU        SSHRC       100</code></pre>
</div>
<div id="replace_na" class="section level4 unnumbered">
<h4>replace_na()</h4>
<p>You might just want to replace empty cells with a specific value (e.g., 0).</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="chapter-3---reading-and-tidying-data.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># You have to provide the columns for which you want to replace NAs and the values to replace the NAs with in a list, so you can include as many columns as you want.</span></span>
<span id="cb28-2"><a href="chapter-3---reading-and-tidying-data.html#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">replace_na</span>(funding,<span class="fu">list</span>(<span class="at">n_grants =</span> <span class="dv">0</span>))</span></code></pre></div>
<pre><code>## # A tibble: 9 x 3
##   university funder n_grants
##   &lt;chr&gt;      &lt;chr&gt;     &lt;dbl&gt;
## 1 DAL        CIHR         47
## 2 DAL        NSERC        56
## 3 DAL        SSHRC        57
## 4 SFX        CIHR         96
## 5 SFX        NSERC        88
## 6 SFX        SSHRC         0
## 7 SMU        CIHR         61
## 8 SMU        NSERC         0
## 9 SMU        SSHRC       100</code></pre>
<p><strong>Note:</strong> that replacing null values with zeros for a numerical variable may seems logical, and it may be appropriate for your intended purpose. However, nulls and zeros are not logically equivalent: null implies the absence of data (somethings that we did not or could not observe), and zeros imply an observed or measured value of 0.</p>
</div>
</div>
<div id="merge-and-split-cells" class="section level3 unnumbered">
<h3>Merge and split cells</h3>
<p>Let’s create a simple tibble with some names.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="chapter-3---reading-and-tidying-data.html#cb30-1" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">first_name =</span> <span class="fu">as.character</span>(<span class="fu">c</span>(<span class="st">&quot;Jos&quot;</span>,<span class="st">&quot;May&quot;</span>)),</span>
<span id="cb30-2"><a href="chapter-3---reading-and-tidying-data.html#cb30-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">last_name =</span> <span class="fu">as.character</span>(<span class="fu">c</span>(<span class="st">&quot;Louis&quot;</span>,<span class="st">&quot;West&quot;</span>)))</span>
<span id="cb30-3"><a href="chapter-3---reading-and-tidying-data.html#cb30-3" aria-hidden="true" tabindex="-1"></a>t</span></code></pre></div>
<pre><code>## # A tibble: 2 x 2
##   first_name last_name
##   &lt;chr&gt;      &lt;chr&gt;    
## 1 Jos        Louis    
## 2 May        West</code></pre>
<div id="unite" class="section level4 unnumbered">
<h4>unite()</h4>
<p>In some scenario, it may be more useful to have the first names and last names combined into a full_name column. This can be achieved with the <strong>unite()</strong> function.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="chapter-3---reading-and-tidying-data.html#cb32-1" aria-hidden="true" tabindex="-1"></a>t <span class="ot">=</span> <span class="fu">unite</span>(t, </span>
<span id="cb32-2"><a href="chapter-3---reading-and-tidying-data.html#cb32-2" aria-hidden="true" tabindex="-1"></a>           <span class="st">&quot;first_name&quot;</span>,<span class="st">&quot;last_name&quot;</span>, <span class="co"># columns to unite.</span></span>
<span id="cb32-3"><a href="chapter-3---reading-and-tidying-data.html#cb32-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">col =</span> <span class="st">&quot;full_name&quot;</span>, <span class="co"># name of the new column.</span></span>
<span id="cb32-4"><a href="chapter-3---reading-and-tidying-data.html#cb32-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">sep =</span> <span class="st">&quot; &quot;</span>) <span class="co"># specifies that we want to seperate the first and last name with a space.</span></span>
<span id="cb32-5"><a href="chapter-3---reading-and-tidying-data.html#cb32-5" aria-hidden="true" tabindex="-1"></a>t</span></code></pre></div>
<pre><code>## # A tibble: 2 x 1
##   full_name
##   &lt;chr&gt;    
## 1 Jos Louis
## 2 May West</code></pre>
</div>
<div id="separate" class="section level4 unnumbered">
<h4>separate()</h4>
<p>In the opposite scenario where you have a full_name column but would rather have a first_name and a last_name column, you can use the <strong>separate()</strong> function to do that.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="chapter-3---reading-and-tidying-data.html#cb34-1" aria-hidden="true" tabindex="-1"></a>t <span class="ot">=</span> <span class="fu">separate</span>(t, </span>
<span id="cb34-2"><a href="chapter-3---reading-and-tidying-data.html#cb34-2" aria-hidden="true" tabindex="-1"></a>              full_name, <span class="co"># column to separate.</span></span>
<span id="cb34-3"><a href="chapter-3---reading-and-tidying-data.html#cb34-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">sep =</span> <span class="st">&quot; &quot;</span>, <span class="co"># character string to use as separator.</span></span>
<span id="cb34-4"><a href="chapter-3---reading-and-tidying-data.html#cb34-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;first_name&quot;</span>, <span class="st">&quot;last_name&quot;</span>)) <span class="co"># names of the new columns.</span></span>
<span id="cb34-5"><a href="chapter-3---reading-and-tidying-data.html#cb34-5" aria-hidden="true" tabindex="-1"></a>t</span></code></pre></div>
<pre><code>## # A tibble: 2 x 2
##   first_name last_name
##   &lt;chr&gt;      &lt;chr&gt;    
## 1 Jos        Louis    
## 2 May        West</code></pre>
</div>
<div id="separate_rows" class="section level4 unnumbered">
<h4>separate_rows()</h4>
<p>The separate_row() function is similar to the separate() funciton, but instead of creating new columns it creates new rows. Here is an example.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="chapter-3---reading-and-tidying-data.html#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This creates some tibble contain names of authors in a single cell with a separator.</span></span>
<span id="cb36-2"><a href="chapter-3---reading-and-tidying-data.html#cb36-2" aria-hidden="true" tabindex="-1"></a>t <span class="ot">=</span> <span class="fu">tibble</span>(<span class="at">article =</span> <span class="fu">as.character</span>(<span class="fu">c</span>(<span class="st">&quot;awesome article&quot;</span>,<span class="st">&quot;boring article&quot;</span>)),</span>
<span id="cb36-3"><a href="chapter-3---reading-and-tidying-data.html#cb36-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">authors =</span> <span class="fu">as.character</span>(<span class="fu">c</span>(<span class="st">&quot;Toze, S.; Brown, A.&quot;</span>,<span class="st">&quot;Smith, J.; Roberts, J.&quot;</span>)))</span>
<span id="cb36-4"><a href="chapter-3---reading-and-tidying-data.html#cb36-4" aria-hidden="true" tabindex="-1"></a>t</span></code></pre></div>
<pre><code>## # A tibble: 2 x 2
##   article         authors               
##   &lt;chr&gt;           &lt;chr&gt;                 
## 1 awesome article Toze, S.; Brown, A.   
## 2 boring article  Smith, J.; Roberts, J.</code></pre>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="chapter-3---reading-and-tidying-data.html#cb38-1" aria-hidden="true" tabindex="-1"></a>t <span class="ot">=</span> <span class="fu">separate_rows</span>(t,authors, <span class="at">sep =</span> <span class="st">&quot;; &quot;</span>)</span>
<span id="cb38-2"><a href="chapter-3---reading-and-tidying-data.html#cb38-2" aria-hidden="true" tabindex="-1"></a>t</span></code></pre></div>
<pre><code>## # A tibble: 4 x 2
##   article         authors    
##   &lt;chr&gt;           &lt;chr&gt;      
## 1 awesome article Toze, S.   
## 2 awesome article Brown, A.  
## 3 boring article  Smith, J.  
## 4 boring article  Roberts, J.</code></pre>
</div>
</div>
<div id="nested-data" class="section level3 unnumbered">
<h3>Nested data</h3>
<p>The XML file import mentioned earlier is a good opportunity to explore the process of tidying nested data. converting an XML file to the tidy format requires quite a few steps. Here is a pretty standard, step by step process that you can follow whenever you are dealing with XML files.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="chapter-3---reading-and-tidying-data.html#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load the xml 2 packages</span></span>
<span id="cb40-2"><a href="chapter-3---reading-and-tidying-data.html#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(xml2)</span>
<span id="cb40-3"><a href="chapter-3---reading-and-tidying-data.html#cb40-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-4"><a href="chapter-3---reading-and-tidying-data.html#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="co"># read the xml file </span></span>
<span id="cb40-5"><a href="chapter-3---reading-and-tidying-data.html#cb40-5" aria-hidden="true" tabindex="-1"></a>xml <span class="ot">=</span> <span class="fu">read_xml</span>(<span class="st">&quot;https://data.novascotia.ca/api/views/2d4m-9e6x/rows.xml&quot;</span>)</span>
<span id="cb40-6"><a href="chapter-3---reading-and-tidying-data.html#cb40-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-7"><a href="chapter-3---reading-and-tidying-data.html#cb40-7" aria-hidden="true" tabindex="-1"></a><span class="co"># the xml object is storing the data in its original xml format. </span></span>
<span id="cb40-8"><a href="chapter-3---reading-and-tidying-data.html#cb40-8" aria-hidden="true" tabindex="-1"></a><span class="co"># you can verify that by writing the xml object to a file and looking at it</span></span>
<span id="cb40-9"><a href="chapter-3---reading-and-tidying-data.html#cb40-9" aria-hidden="true" tabindex="-1"></a><span class="fu">write_xml</span>(xml, <span class="at">file=</span><span class="st">&quot;c:/data/xml.xml&quot;</span>)</span>
<span id="cb40-10"><a href="chapter-3---reading-and-tidying-data.html#cb40-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-11"><a href="chapter-3---reading-and-tidying-data.html#cb40-11" aria-hidden="true" tabindex="-1"></a><span class="co"># the xml2 package provides a function (as_list) to convert XML documents into an equivalent R list.</span></span>
<span id="cb40-12"><a href="chapter-3---reading-and-tidying-data.html#cb40-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Attention, as_list should not be confused with as.list, which is a base R function that we used before.</span></span>
<span id="cb40-13"><a href="chapter-3---reading-and-tidying-data.html#cb40-13" aria-hidden="true" tabindex="-1"></a>list <span class="ot">&lt;-</span> <span class="fu">as_list</span>(xml)</span></code></pre></div>
<p>The next step is converting that list into a tibble. So let’s do that.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="chapter-3---reading-and-tidying-data.html#cb41-1" aria-hidden="true" tabindex="-1"></a>public_housing <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(list)</span>
<span id="cb41-2"><a href="chapter-3---reading-and-tidying-data.html#cb41-2" aria-hidden="true" tabindex="-1"></a>public_housing</span></code></pre></div>
<pre><code>## # A tibble: 1 x 1
##   response          
##   &lt;named list&gt;      
## 1 &lt;named list [342]&gt;</code></pre>
<p>At the moment it has only one column called “response” of the “named_list” type, containing a single cell with 342 named list. This is a <strong>nested</strong> structure, where a single cell contains a list that contains other lists that contain other lists.</p>
<div id="unnest_longer" class="section level4 unnumbered">
<h4>unnest_longer()</h4>
<p>So, let’s <strong>unnest</strong> the data in the response column using the unnest_longer() function. This function makes the tibble <strong>longer</strong> by expaning it vertically (adding rows) with the unnested data.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="chapter-3---reading-and-tidying-data.html#cb43-1" aria-hidden="true" tabindex="-1"></a>public_housing <span class="ot">=</span> <span class="fu">unnest_longer</span>(public_housing, response)</span>
<span id="cb43-2"><a href="chapter-3---reading-and-tidying-data.html#cb43-2" aria-hidden="true" tabindex="-1"></a>public_housing</span></code></pre></div>
<pre><code>## # A tibble: 342 x 2
##    response          response_id
##    &lt;named list&gt;      &lt;chr&gt;      
##  1 &lt;named list [22]&gt; row        
##  2 &lt;named list [22]&gt; row        
##  3 &lt;named list [21]&gt; row        
##  4 &lt;named list [22]&gt; row        
##  5 &lt;named list [22]&gt; row        
##  6 &lt;named list [21]&gt; row        
##  7 &lt;named list [22]&gt; row        
##  8 &lt;named list [22]&gt; row        
##  9 &lt;named list [22]&gt; row        
## 10 &lt;named list [22]&gt; row        
## # ... with 332 more rows</code></pre>
<p>Now we’re making progress. We have 342 observations each occupying one line. This is one of the tidy criteria! However, the columns are not right. We can see that there are two columns. The first one appears to contain 342 list of 22 elements, which are probably the 22 variables that we want as our columns.</p>
</div>
<div id="unnest_wider" class="section level4 unnumbered">
<h4>unnest_wider()</h4>
<p>Let’s unnest these 342 lists using the <strong>unnest_wider()</strong> function. This function makes the tibble <strong>wider</strong> by expaning it horizontally (adding columns) with the unnested data.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="chapter-3---reading-and-tidying-data.html#cb45-1" aria-hidden="true" tabindex="-1"></a>public_housing <span class="ot">=</span> <span class="fu">unnest_wider</span>(public_housing, response)</span>
<span id="cb45-2"><a href="chapter-3---reading-and-tidying-data.html#cb45-2" aria-hidden="true" tabindex="-1"></a>public_housing</span></code></pre></div>
<pre><code>## # A tibble: 342 x 22
##    id    property_project pid   name  address city  postal_code number_of_floors
##    &lt;lis&gt; &lt;list&gt;           &lt;lis&gt; &lt;lis&gt; &lt;list&gt;  &lt;lis&gt; &lt;list&gt;      &lt;list&gt;          
##  1 &lt;lis~ &lt;list [1]&gt;       &lt;lis~ &lt;lis~ &lt;list ~ &lt;lis~ &lt;list [1]&gt;  &lt;list [1]&gt;      
##  2 &lt;lis~ &lt;list [1]&gt;       &lt;lis~ &lt;lis~ &lt;list ~ &lt;lis~ &lt;list [1]&gt;  &lt;list [1]&gt;      
##  3 &lt;lis~ &lt;list [1]&gt;       &lt;lis~ &lt;lis~ &lt;list ~ &lt;lis~ &lt;NULL&gt;      &lt;list [1]&gt;      
##  4 &lt;lis~ &lt;list [1]&gt;       &lt;lis~ &lt;lis~ &lt;list ~ &lt;lis~ &lt;list [1]&gt;  &lt;list [1]&gt;      
##  5 &lt;lis~ &lt;list [1]&gt;       &lt;lis~ &lt;lis~ &lt;list ~ &lt;lis~ &lt;list [1]&gt;  &lt;list [1]&gt;      
##  6 &lt;lis~ &lt;list [1]&gt;       &lt;lis~ &lt;lis~ &lt;NULL&gt;  &lt;lis~ &lt;list [1]&gt;  &lt;list [1]&gt;      
##  7 &lt;lis~ &lt;list [1]&gt;       &lt;lis~ &lt;lis~ &lt;list ~ &lt;lis~ &lt;list [1]&gt;  &lt;list [1]&gt;      
##  8 &lt;lis~ &lt;list [1]&gt;       &lt;lis~ &lt;lis~ &lt;list ~ &lt;lis~ &lt;list [1]&gt;  &lt;list [1]&gt;      
##  9 &lt;lis~ &lt;list [1]&gt;       &lt;lis~ &lt;lis~ &lt;list ~ &lt;lis~ &lt;list [1]&gt;  &lt;list [1]&gt;      
## 10 &lt;lis~ &lt;list [1]&gt;       &lt;lis~ &lt;lis~ &lt;list ~ &lt;lis~ &lt;list [1]&gt;  &lt;list [1]&gt;      
## # ... with 332 more rows, and 14 more variables: residential_units &lt;list&gt;,
## #   housing_authority &lt;list&gt;, county &lt;list&gt;, elevator &lt;list&gt;, oil_heat &lt;list&gt;,
## #   electric_heat &lt;list&gt;, public_water &lt;list&gt;, well &lt;list&gt;, sewer &lt;list&gt;,
## #   onsite_septic &lt;list&gt;, municipality &lt;list&gt;, x_coordina &lt;list&gt;,
## #   y_coordina &lt;list&gt;, response_id &lt;chr&gt;</code></pre>
<p>we can now see that each cell is a list of 1 element.</p>
</div>
<div id="unnest" class="section level4 unnumbered">
<h4>unnest()</h4>
<p>Now let’s unnest the data contained in each cell with the <strong>unnest()</strong> function.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="chapter-3---reading-and-tidying-data.html#cb47-1" aria-hidden="true" tabindex="-1"></a>public_housing <span class="ot">=</span> <span class="fu">unnest</span>(public_housing, <span class="fu">c</span>(id, property_project, pid, name, address, city,</span>
<span id="cb47-2"><a href="chapter-3---reading-and-tidying-data.html#cb47-2" aria-hidden="true" tabindex="-1"></a>    postal_code, number_of_floors, residential_units, housing_authority, county, </span>
<span id="cb47-3"><a href="chapter-3---reading-and-tidying-data.html#cb47-3" aria-hidden="true" tabindex="-1"></a>    elevator, oil_heat, electric_heat, public_water, well, sewer, </span>
<span id="cb47-4"><a href="chapter-3---reading-and-tidying-data.html#cb47-4" aria-hidden="true" tabindex="-1"></a>    onsite_septic, municipality, x_coordina, y_coordina))</span></code></pre></div>
<p>This seems silly… there has to be a leaner way of writing this. Yes, there is. The <strong>names()</strong> returns a vector of the column names of a data frame. So we can use this much leaner code:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="chapter-3---reading-and-tidying-data.html#cb48-1" aria-hidden="true" tabindex="-1"></a>colnames <span class="ot">=</span> <span class="fu">names</span>(public_housing)</span>
<span id="cb48-2"><a href="chapter-3---reading-and-tidying-data.html#cb48-2" aria-hidden="true" tabindex="-1"></a>public_housing <span class="ot">=</span> <span class="fu">unnest</span>(public_housing, colnames)</span>
<span id="cb48-3"><a href="chapter-3---reading-and-tidying-data.html#cb48-3" aria-hidden="true" tabindex="-1"></a>public_housing</span></code></pre></div>
<pre><code>## # A tibble: 342 x 22
##    id    property_project pid   name  address city  postal_code number_of_floors
##    &lt;lis&gt; &lt;list&gt;           &lt;lis&gt; &lt;lis&gt; &lt;list&gt;  &lt;lis&gt; &lt;list&gt;      &lt;list&gt;          
##  1 &lt;chr~ &lt;chr [1]&gt;        &lt;chr~ &lt;chr~ &lt;chr [~ &lt;chr~ &lt;chr [1]&gt;   &lt;chr [1]&gt;       
##  2 &lt;chr~ &lt;chr [1]&gt;        &lt;chr~ &lt;chr~ &lt;chr [~ &lt;chr~ &lt;chr [1]&gt;   &lt;chr [1]&gt;       
##  3 &lt;chr~ &lt;chr [1]&gt;        &lt;chr~ &lt;chr~ &lt;chr [~ &lt;chr~ &lt;NULL&gt;      &lt;chr [1]&gt;       
##  4 &lt;chr~ &lt;chr [1]&gt;        &lt;chr~ &lt;chr~ &lt;chr [~ &lt;chr~ &lt;chr [1]&gt;   &lt;chr [1]&gt;       
##  5 &lt;chr~ &lt;chr [1]&gt;        &lt;chr~ &lt;chr~ &lt;chr [~ &lt;chr~ &lt;chr [1]&gt;   &lt;chr [1]&gt;       
##  6 &lt;chr~ &lt;chr [1]&gt;        &lt;chr~ &lt;chr~ &lt;NULL&gt;  &lt;chr~ &lt;chr [1]&gt;   &lt;chr [1]&gt;       
##  7 &lt;chr~ &lt;chr [1]&gt;        &lt;chr~ &lt;chr~ &lt;chr [~ &lt;chr~ &lt;chr [1]&gt;   &lt;chr [1]&gt;       
##  8 &lt;chr~ &lt;chr [1]&gt;        &lt;chr~ &lt;chr~ &lt;chr [~ &lt;chr~ &lt;chr [1]&gt;   &lt;chr [1]&gt;       
##  9 &lt;chr~ &lt;chr [1]&gt;        &lt;chr~ &lt;chr~ &lt;chr [~ &lt;chr~ &lt;chr [1]&gt;   &lt;chr [1]&gt;       
## 10 &lt;chr~ &lt;chr [1]&gt;        &lt;chr~ &lt;chr~ &lt;chr [~ &lt;chr~ &lt;chr [1]&gt;   &lt;chr [1]&gt;       
## # ... with 332 more rows, and 14 more variables: residential_units &lt;list&gt;,
## #   housing_authority &lt;list&gt;, county &lt;list&gt;, elevator &lt;list&gt;, oil_heat &lt;list&gt;,
## #   electric_heat &lt;list&gt;, public_water &lt;list&gt;, well &lt;list&gt;, sewer &lt;list&gt;,
## #   onsite_septic &lt;list&gt;, municipality &lt;list&gt;, x_coordina &lt;list&gt;,
## #   y_coordina &lt;list&gt;, response_id &lt;chr&gt;</code></pre>
<p>We now have a tibble with 342 observation of 22 variables. Looks good! But the values in the cells still don’t look right. There’s just one more round of unnesting to apply to all the cell using the same code as in the last step.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="chapter-3---reading-and-tidying-data.html#cb50-1" aria-hidden="true" tabindex="-1"></a>public_housing <span class="ot">=</span> <span class="fu">unnest</span>(public_housing, colnames)</span>
<span id="cb50-2"><a href="chapter-3---reading-and-tidying-data.html#cb50-2" aria-hidden="true" tabindex="-1"></a>public_housing</span></code></pre></div>
<pre><code>## # A tibble: 342 x 22
##    id    property_project pid   name  address city  postal_code number_of_floors
##    &lt;chr&gt; &lt;chr&gt;            &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;       &lt;chr&gt;           
##  1 117   330101X          6503~ Rive~ 19/27/~ Pict~ B0K 1S0     2               
##  2 324   200214X          5006~ Bell~ 10 Gra~ Gran~ B0E 1L0     2               
##  3 247   100215X          1511~ Sydn~ 77 Ain~ Sydn~ &lt;NA&gt;        1               
##  4 337   390201X          2522~ Elgi~ 22 Elg~ Spri~ B0M 1X0     1               
##  5 224   100201X          1513~ Will~ 10 Wil~ Sydn~ B1N 1R4     2               
##  6 289   150226X          1524~ 198 ~ &lt;NA&gt;    Flor~ B0C 1J0     2               
##  7 214   612301           9021~ Trin~ 3 Trin~ Yarm~ B5A 1P3     2               
##  8 143   350801           2017~ Youn~ 130 Yo~ Truro B2N 3X4     2               
##  9 104   740101           6018~ Ritc~ 3809 H~ Rive~ B0J 2W0     2               
## 10 174   430901           4017~ Dr. ~ 3792 N~ Hali~ B3K 3G5     9               
## # ... with 332 more rows, and 14 more variables: residential_units &lt;chr&gt;,
## #   housing_authority &lt;chr&gt;, county &lt;chr&gt;, elevator &lt;chr&gt;, oil_heat &lt;chr&gt;,
## #   electric_heat &lt;chr&gt;, public_water &lt;chr&gt;, well &lt;chr&gt;, sewer &lt;chr&gt;,
## #   onsite_septic &lt;chr&gt;, municipality &lt;chr&gt;, x_coordina &lt;chr&gt;,
## #   y_coordina &lt;chr&gt;, response_id &lt;chr&gt;</code></pre>
<p>Wow. Now it looks really good! But wait… there’s one more thing. Look at the data types of the columns. They are all characters, which doesn’t seem right because some of our columns appear to contain only numerical data. The <strong>readr</strong> package comes to the rescue with its easy to use type_convert() function.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="chapter-3---reading-and-tidying-data.html#cb52-1" aria-hidden="true" tabindex="-1"></a>public_housing <span class="ot">=</span> <span class="fu">type_convert</span>(public_housing)</span>
<span id="cb52-2"><a href="chapter-3---reading-and-tidying-data.html#cb52-2" aria-hidden="true" tabindex="-1"></a>public_housing</span></code></pre></div>
<pre><code>## # A tibble: 342 x 22
##       id property_project      pid name          address      city   postal_code
##    &lt;dbl&gt; &lt;chr&gt;               &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;        &lt;chr&gt;  &lt;chr&gt;      
##  1   117 330101X          65032708 Riverton Hei~ 19/27/29 Ri~ Picto~ B0K 1S0    
##  2   324 200214X          50067362 Bellevue      10 Grand Et~ Grand~ B0E 1L0    
##  3   247 100215X          15113962 Sydney Senio~ 77 Ainsley ~ Sydney &lt;NA&gt;       
##  4   337 390201X          25227687 Elgin Street~ 22 Elgin St~ Sprin~ B0M 1X0    
##  5   224 100201X          15130651 William Stre~ 10 William ~ Sydney B1N 1R4    
##  6   289 150226X          15242738 198 Pitt Str~ &lt;NA&gt;         Flore~ B0C 1J0    
##  7   214 612301           90212812 Trinity Place 3 Trinity P~ Yarmo~ B5A 1P3    
##  8   143 350801           20178653 Young St. Lo~ 130 Young S~ Truro  B2N 3X4    
##  9   104 740101           60187283 Ritcey&#39;s Cov~ 3809 Hwy. 3~ River~ B0J 2W0    
## 10   174 430901           40177982 Dr. Prince M~ 3792 Novale~ Halif~ B3K 3G5    
## # ... with 332 more rows, and 15 more variables: number_of_floors &lt;dbl&gt;,
## #   residential_units &lt;dbl&gt;, housing_authority &lt;chr&gt;, county &lt;chr&gt;,
## #   elevator &lt;chr&gt;, oil_heat &lt;chr&gt;, electric_heat &lt;chr&gt;, public_water &lt;chr&gt;,
## #   well &lt;chr&gt;, sewer &lt;chr&gt;, onsite_septic &lt;chr&gt;, municipality &lt;chr&gt;,
## #   x_coordina &lt;dbl&gt;, y_coordina &lt;dbl&gt;, response_id &lt;chr&gt;</code></pre>
<p>We have now converted an XML document into an easy to use tidy dataset! Here is the entire process that we just went through in a single chunk of code.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="chapter-3---reading-and-tidying-data.html#cb54-1" aria-hidden="true" tabindex="-1"></a>xml <span class="ot">=</span> <span class="fu">read_xml</span>(<span class="st">&quot;https://data.novascotia.ca/api/views/2d4m-9e6x/rows.xml&quot;</span>)</span>
<span id="cb54-2"><a href="chapter-3---reading-and-tidying-data.html#cb54-2" aria-hidden="true" tabindex="-1"></a>list <span class="ot">=</span> <span class="fu">as_list</span>(xml)</span>
<span id="cb54-3"><a href="chapter-3---reading-and-tidying-data.html#cb54-3" aria-hidden="true" tabindex="-1"></a>public_housing <span class="ot">=</span> <span class="fu">as_tibble</span>(list) </span>
<span id="cb54-4"><a href="chapter-3---reading-and-tidying-data.html#cb54-4" aria-hidden="true" tabindex="-1"></a>public_housing <span class="ot">=</span> <span class="fu">unnest_longer</span>(public_housing, response)</span>
<span id="cb54-5"><a href="chapter-3---reading-and-tidying-data.html#cb54-5" aria-hidden="true" tabindex="-1"></a>public_housing <span class="ot">=</span> <span class="fu">unnest_wider</span>(public_housing, response) </span>
<span id="cb54-6"><a href="chapter-3---reading-and-tidying-data.html#cb54-6" aria-hidden="true" tabindex="-1"></a>public_housing <span class="ot">=</span> <span class="fu">unnest</span>(public_housing, <span class="at">cols =</span> <span class="fu">names</span>(public_housing))  </span>
<span id="cb54-7"><a href="chapter-3---reading-and-tidying-data.html#cb54-7" aria-hidden="true" tabindex="-1"></a>public_housing <span class="ot">=</span> <span class="fu">unnest</span>(public_housing, <span class="at">cols =</span> <span class="fu">names</span>(public_housing))</span>
<span id="cb54-8"><a href="chapter-3---reading-and-tidying-data.html#cb54-8" aria-hidden="true" tabindex="-1"></a>public_housing <span class="ot">=</span> <span class="fu">type_convert</span>(public_housing)</span></code></pre></div>
</div>
</div>
<div id="combine-dataframes" class="section level3 unnumbered">
<h3>Combine dataframes</h3>
<p>Sometimes the data will come in separate files so you will have to combine the pieces into a single and tidy dataset.</p>
<div id="bind_rows" class="section level4 unnumbered">
<h4>bind_rows()</h4>
<p>bind rows concatenates data frames vertically, adding new columns when column names differ between data frames.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="chapter-3---reading-and-tidying-data.html#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create three data frames</span></span>
<span id="cb55-2"><a href="chapter-3---reading-and-tidying-data.html#cb55-2" aria-hidden="true" tabindex="-1"></a>data1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x1 =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,           </span>
<span id="cb55-3"><a href="chapter-3---reading-and-tidying-data.html#cb55-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">x2 =</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>])</span>
<span id="cb55-4"><a href="chapter-3---reading-and-tidying-data.html#cb55-4" aria-hidden="true" tabindex="-1"></a>data2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x1 =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">6</span>,</span>
<span id="cb55-5"><a href="chapter-3---reading-and-tidying-data.html#cb55-5" aria-hidden="true" tabindex="-1"></a>                    <span class="at">x2 =</span> letters[<span class="dv">2</span><span class="sc">:</span><span class="dv">6</span>])</span>
<span id="cb55-6"><a href="chapter-3---reading-and-tidying-data.html#cb55-6" aria-hidden="true" tabindex="-1"></a>data3 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x1 =</span> <span class="dv">3</span><span class="sc">:</span><span class="dv">7</span>,</span>
<span id="cb55-7"><a href="chapter-3---reading-and-tidying-data.html#cb55-7" aria-hidden="true" tabindex="-1"></a>                    <span class="at">x4 =</span> letters[<span class="dv">3</span><span class="sc">:</span><span class="dv">7</span>])</span>
<span id="cb55-8"><a href="chapter-3---reading-and-tidying-data.html#cb55-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-9"><a href="chapter-3---reading-and-tidying-data.html#cb55-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply bind_rows function</span></span>
<span id="cb55-10"><a href="chapter-3---reading-and-tidying-data.html#cb55-10" aria-hidden="true" tabindex="-1"></a><span class="fu">bind_rows</span>(data1, data2)     </span></code></pre></div>
<pre><code>##    x1 x2
## 1   1  a
## 2   2  b
## 3   3  c
## 4   4  d
## 5   5  e
## 6   2  b
## 7   3  c
## 8   4  d
## 9   5  e
## 10  6  f</code></pre>
</div>
<div id="bind_cols" class="section level4 unnumbered">
<h4>bind_cols()</h4>
<p>The bind_cols() function concatenates the entire data frames horizontally. The number of rows in the two databases must be the same.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="chapter-3---reading-and-tidying-data.html#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply bind_rows function</span></span>
<span id="cb57-2"><a href="chapter-3---reading-and-tidying-data.html#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="fu">bind_cols</span>(data1, data3)</span></code></pre></div>
<pre><code>##   x1...1 x2 x1...3 x4
## 1      1  a      3  c
## 2      2  b      4  d
## 3      3  c      5  e
## 4      4  d      6  f
## 5      5  e      7  g</code></pre>
</div>
</div>
<div id="join-dataframes" class="section level3 unnumbered">
<h3>Join dataframes</h3>
<p>The join family of functions is used to combine rows <strong>and</strong> columns of data frames based on a matching criteria.</p>
<div id="left_join" class="section level4 unnumbered">
<h4>left_join()</h4>
<p>The left_join() function returns all records from the first data frame and only records from the second data frame for which the matching condition is TRUE. Here is an example:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="chapter-3---reading-and-tidying-data.html#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">left_join</span>(data1, data3, <span class="at">by=</span><span class="st">&quot;x1&quot;</span>)</span></code></pre></div>
<pre><code>##   x1 x2   x4
## 1  1  a &lt;NA&gt;
## 2  2  b &lt;NA&gt;
## 3  3  c    c
## 4  4  d    d
## 5  5  e    e</code></pre>
</div>
<div id="right_join" class="section level4 unnumbered">
<h4>right_join()</h4>
<p>The right_join() function is returns all records from the second data frame and only records from the first data frame for which the matching condition is TRUE. Here is an example:</p>
</div>
<div id="inner_join" class="section level4 unnumbered">
<h4>inner_join()</h4>
<p>The inner_join() function returns only records for which the matching condition is TRUE. Here is an example:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="chapter-3---reading-and-tidying-data.html#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inner_join</span>(data1, data3, <span class="at">by=</span><span class="st">&quot;x1&quot;</span>)</span></code></pre></div>
<pre><code>##   x1 x2 x4
## 1  3  c  c
## 2  4  d  d
## 3  5  e  e</code></pre>
</div>
<div id="anti_join" class="section level4 unnumbered">
<h4>anti_join()</h4>
<p>The anti_join() function is useful if you want to exclude observations (rows) in your tibble when the matching condition is TRUE.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="chapter-3---reading-and-tidying-data.html#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">anti_join</span>(data1, data2, <span class="at">by=</span><span class="st">&quot;x1&quot;</span>)</span></code></pre></div>
<pre><code>##   x1 x2
## 1  1  a</code></pre>
</div>
<div id="full_join" class="section level4 unnumbered">
<h4>full_join()</h4>
<p>The full join is essentially a combination of the left_join() and right_join() functions.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="chapter-3---reading-and-tidying-data.html#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">full_join</span>(data1, data3, <span class="at">by=</span><span class="st">&quot;x1&quot;</span>)</span></code></pre></div>
<pre><code>##   x1   x2   x4
## 1  1    a &lt;NA&gt;
## 2  2    b &lt;NA&gt;
## 3  3    c    c
## 4  4    d    d
## 5  5    e    e
## 6  6 &lt;NA&gt;    f
## 7  7 &lt;NA&gt;    g</code></pre>
<p><strong>Note</strong>: You can use the functions without specifying the column(s) to use for the matching. In this case, all columns with the same names will be used for the matching.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="chapter-3---reading-and-tidying-data.html#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inner_join</span>(data1, data2)</span></code></pre></div>
<pre><code>##   x1 x2
## 1  2  b
## 2  3  c
## 3  4  d
## 4  5  e</code></pre>
</div>
</div>
<div id="rename-variables" class="section level3 unnumbered">
<h3>Rename variables</h3>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="chapter-3---reading-and-tidying-data.html#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rename</span>(data1, <span class="at">banana =</span> x1, <span class="at">apple =</span> x2)</span></code></pre></div>
<pre><code>##   banana apple
## 1      1     a
## 2      2     b
## 3      3     c
## 4      4     d
## 5      5     e</code></pre>
<div id="select-variables" class="section level4 unnumbered">
<h4>Select variables</h4>
<p>The <strong>select()</strong> variable is used to retrieve a subset of <strong>columns</strong> from a dataframe or tibble.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="chapter-3---reading-and-tidying-data.html#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select the column x1 from the data1 dataframe.</span></span>
<span id="cb71-2"><a href="chapter-3---reading-and-tidying-data.html#cb71-2" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(data1, x1)</span></code></pre></div>
<pre><code>##   x1
## 1  1
## 2  2
## 3  3
## 4  4
## 5  5</code></pre>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="chapter-3---reading-and-tidying-data.html#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This selects the column x1 from the data1 dataframe AND renames it to Banana.</span></span>
<span id="cb73-2"><a href="chapter-3---reading-and-tidying-data.html#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(data1, <span class="at">banana =</span> x1)</span></code></pre></div>
<pre><code>##   banana
## 1      1
## 2      2
## 3      3
## 4      4
## 5      5</code></pre>
</div>
<div id="filter-rows" class="section level4 unnumbered">
<h4>Filter rows</h4>
<p>The filter() functions is used to retrieve a subset of <strong>rows</strong> from a dataframe or tibble based on some criteria.</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="chapter-3---reading-and-tidying-data.html#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co"># select observation for which the value of x1 is lower than 3.</span></span>
<span id="cb75-2"><a href="chapter-3---reading-and-tidying-data.html#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(data1, x1 <span class="sc">&lt;</span> <span class="dv">3</span>)</span></code></pre></div>
<pre><code>##   x1 x2
## 1  1  a
## 2  2  b</code></pre>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="chapter-3---reading-and-tidying-data.html#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="co"># you can use the %in% operator to select observations for which the value is in a list.</span></span>
<span id="cb77-2"><a href="chapter-3---reading-and-tidying-data.html#cb77-2" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(data1, x2 <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;b&quot;</span>,<span class="st">&quot;d&quot;</span>,<span class="st">&quot;e&quot;</span>))</span></code></pre></div>
<pre><code>##   x1 x2
## 1  2  b
## 2  4  d
## 3  5  e</code></pre>
</div>
<div id="modify-or-create-new-variables" class="section level4 unnumbered">
<h4>Modify or create new variables</h4>
<p>The mutate() function is used to create a new variable or update an existing one.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="chapter-3---reading-and-tidying-data.html#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This adds a column called x4 that contains the value of column 1 multiplied by 2.</span></span>
<span id="cb79-2"><a href="chapter-3---reading-and-tidying-data.html#cb79-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(data1, <span class="at">x4 =</span> x1<span class="sc">*</span><span class="dv">2</span>)</span></code></pre></div>
<pre><code>##   x1 x2 x4
## 1  1  a  2
## 2  2  b  4
## 3  3  c  6
## 4  4  d  8
## 5  5  e 10</code></pre>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="chapter-3---reading-and-tidying-data.html#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This updates the already existing variable x1 with the original value multiplied by 2.</span></span>
<span id="cb81-2"><a href="chapter-3---reading-and-tidying-data.html#cb81-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(data1, <span class="at">x1 =</span> x1<span class="sc">*</span><span class="dv">2</span>)</span></code></pre></div>
<pre><code>##   x1 x2
## 1  2  a
## 2  4  b
## 3  6  c
## 4  8  d
## 5 10  e</code></pre>
</div>
</div>
</div>
<div id="export-data" class="section level2 unnumbered">
<h2>Export data</h2>
<p>Now that you have a nice tidy data set, you may want to export it so you can save it for future use and not have to repeat the data collection and tidying process, or maybe because you want to share it with others.</p>
<div id="export-dataframes" class="section level3 unnumbered">
<h3>Export dataframes</h3>
<p>Exporting data frames is very easy in R (the hardest part was getting there). The <strong>readr</strong> package has a bunch of functions to write files. Here are examples:</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="chapter-3---reading-and-tidying-data.html#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="co"># You can test this code with any dataframe or tibble that you have created.</span></span>
<span id="cb83-2"><a href="chapter-3---reading-and-tidying-data.html#cb83-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb83-3"><a href="chapter-3---reading-and-tidying-data.html#cb83-3" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(df, <span class="at">file =</span> <span class="st">&quot;filename.csv&quot;</span>, <span class="at">col_names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb83-4"><a href="chapter-3---reading-and-tidying-data.html#cb83-4" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv2</span>(df, <span class="at">file =</span> <span class="st">&quot;filename.csv&quot;</span>, <span class="at">col_names =</span> <span class="cn">TRUE</span>) <span class="co">#write_csv2 uses the european format (commas instead of dot for decimals, and semicolon as delimiter)</span></span>
<span id="cb83-5"><a href="chapter-3---reading-and-tidying-data.html#cb83-5" aria-hidden="true" tabindex="-1"></a><span class="fu">write_tsv</span>(df, <span class="at">file =</span> <span class="st">&quot;filename.tsv&quot;</span>, <span class="at">col_names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb83-6"><a href="chapter-3---reading-and-tidying-data.html#cb83-6" aria-hidden="true" tabindex="-1"></a><span class="fu">write_delim</span>(df, <span class="at">file =</span> <span class="st">&quot;filename.txt&quot;</span>, <span class="at">delim =</span> <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>, <span class="at">col_names =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
</div>
<div id="json" class="section level3 unnumbered">
<h3>JSON</h3>
<p>Writing JSON files from a data frame with the <strong>toJSON()</strong> function is just as easy as reading them with the <strong>fromJSON()</strong> function.</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="chapter-3---reading-and-tidying-data.html#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="co"># let&#39;s read a csv file and convert it to a JSON file </span></span>
<span id="cb84-2"><a href="chapter-3---reading-and-tidying-data.html#cb84-2" aria-hidden="true" tabindex="-1"></a>titanic <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;https://pmongeon.github.io/info6270/files/data/titanic.csv&quot;</span>)</span>
<span id="cb84-3"><a href="chapter-3---reading-and-tidying-data.html#cb84-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-4"><a href="chapter-3---reading-and-tidying-data.html#cb84-4" aria-hidden="true" tabindex="-1"></a><span class="co"># The pretty=TRUE argument spaces out the JSON file so it is more readable for humans.</span></span>
<span id="cb84-5"><a href="chapter-3---reading-and-tidying-data.html#cb84-5" aria-hidden="true" tabindex="-1"></a><span class="fu">write_file</span>(<span class="fu">toJSON</span>(titanic, <span class="at">pretty=</span><span class="cn">TRUE</span>), <span class="st">&quot;titanic.json&quot;</span>) </span></code></pre></div>
</div>
</div>
<div id="the-pipe" class="section level2 unnumbered">
<h2>The Pipe</h2>
<p>The <strong>dplyr</strong> and <strong>maggritr</strong> packages (automatically loaded with the tidyverse) include an extremely useful and popular operator called the <strong>pipe</strong> which looks like this in R: <strong>%&gt;%</strong>. The pipe is a wonderful tool for building lean code that are easier to read and to debug. Don’t let the small size of this section mislead you. The pipe is an extremely useful feature of the tidyverse, and learning how to code with it can drastically change your experience as a coder, and the experience of those who will read or use your code too.</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="chapter-3---reading-and-tidying-data.html#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb85-2"><a href="chapter-3---reading-and-tidying-data.html#cb85-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(httr)</span>
<span id="cb85-3"><a href="chapter-3---reading-and-tidying-data.html#cb85-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-4"><a href="chapter-3---reading-and-tidying-data.html#cb85-4" aria-hidden="true" tabindex="-1"></a><span class="co"># I&#39;m storing the url for the api call in an object to make the code below more readable.</span></span>
<span id="cb85-5"><a href="chapter-3---reading-and-tidying-data.html#cb85-5" aria-hidden="true" tabindex="-1"></a>url<span class="ot">&lt;-</span><span class="st">&quot;https://openlibrary.org/api/books?bibkeys=OLID:OL22123296M&amp;format=json&quot;</span></span>
<span id="cb85-6"><a href="chapter-3---reading-and-tidying-data.html#cb85-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-7"><a href="chapter-3---reading-and-tidying-data.html#cb85-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-8"><a href="chapter-3---reading-and-tidying-data.html#cb85-8" aria-hidden="true" tabindex="-1"></a>data <span class="ot">=</span> <span class="fu">GET</span>(url)</span>
<span id="cb85-9"><a href="chapter-3---reading-and-tidying-data.html#cb85-9" aria-hidden="true" tabindex="-1"></a>df <span class="ot">=</span> <span class="fu">content</span>(data)</span>
<span id="cb85-10"><a href="chapter-3---reading-and-tidying-data.html#cb85-10" aria-hidden="true" tabindex="-1"></a>df <span class="ot">=</span> <span class="fu">as_tibble</span>(<span class="fu">rbindlist</span>(df))</span>
<span id="cb85-11"><a href="chapter-3---reading-and-tidying-data.html#cb85-11" aria-hidden="true" tabindex="-1"></a>df</span></code></pre></div>
<pre><code>## # A tibble: 1 x 4
##   bib_key          info_url                   preview preview_url               
##   &lt;chr&gt;            &lt;chr&gt;                      &lt;chr&gt;   &lt;chr&gt;                     
## 1 OLID:OL22123296M https://openlibrary.org/b~ noview  https://openlibrary.org/b~</code></pre>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="chapter-3---reading-and-tidying-data.html#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This is the embedded version of the same process as above</span></span>
<span id="cb87-2"><a href="chapter-3---reading-and-tidying-data.html#cb87-2" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&quot;https://openlibrary.org/api/books?bibkeys=OLID:OL22123296M&amp;format=json&quot;</span></span>
<span id="cb87-3"><a href="chapter-3---reading-and-tidying-data.html#cb87-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-4"><a href="chapter-3---reading-and-tidying-data.html#cb87-4" aria-hidden="true" tabindex="-1"></a>data <span class="ot">=</span> <span class="fu">as_tibble</span>(<span class="fu">rbindlist</span>(<span class="fu">content</span>(<span class="fu">GET</span>(url))))</span>
<span id="cb87-5"><a href="chapter-3---reading-and-tidying-data.html#cb87-5" aria-hidden="true" tabindex="-1"></a>data</span></code></pre></div>
<pre><code>## # A tibble: 1 x 4
##   bib_key          info_url                   preview preview_url               
##   &lt;chr&gt;            &lt;chr&gt;                      &lt;chr&gt;   &lt;chr&gt;                     
## 1 OLID:OL22123296M https://openlibrary.org/b~ noview  https://openlibrary.org/b~</code></pre>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="chapter-3---reading-and-tidying-data.html#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(httr)</span>
<span id="cb89-2"><a href="chapter-3---reading-and-tidying-data.html#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb89-3"><a href="chapter-3---reading-and-tidying-data.html#cb89-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-4"><a href="chapter-3---reading-and-tidying-data.html#cb89-4" aria-hidden="true" tabindex="-1"></a><span class="co"># This is the same process but written with the pipe.</span></span>
<span id="cb89-5"><a href="chapter-3---reading-and-tidying-data.html#cb89-5" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&quot;https://openlibrary.org/api/books?bibkeys=OLID:OL22123296M&amp;format=json&quot;</span></span>
<span id="cb89-6"><a href="chapter-3---reading-and-tidying-data.html#cb89-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-7"><a href="chapter-3---reading-and-tidying-data.html#cb89-7" aria-hidden="true" tabindex="-1"></a>data <span class="ot">=</span> url <span class="sc">%&gt;%</span> </span>
<span id="cb89-8"><a href="chapter-3---reading-and-tidying-data.html#cb89-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">GET</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb89-9"><a href="chapter-3---reading-and-tidying-data.html#cb89-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">content</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb89-10"><a href="chapter-3---reading-and-tidying-data.html#cb89-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rbindlist</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb89-11"><a href="chapter-3---reading-and-tidying-data.html#cb89-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span>
<span id="cb89-12"><a href="chapter-3---reading-and-tidying-data.html#cb89-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-13"><a href="chapter-3---reading-and-tidying-data.html#cb89-13" aria-hidden="true" tabindex="-1"></a>data</span></code></pre></div>
<pre><code>## # A tibble: 1 x 4
##   bib_key          info_url                   preview preview_url               
##   &lt;chr&gt;            &lt;chr&gt;                      &lt;chr&gt;   &lt;chr&gt;                     
## 1 OLID:OL22123296M https://openlibrary.org/b~ noview  https://openlibrary.org/b~</code></pre>
</div>
<div id="additional-resources" class="section level2 unnumbered">
<h2>Additional resources</h2>
<p>There are many <a href="https://www.rstudio.com/resources/cheatsheets/">cheatsheets</a> available for R packages that can be very useful to quickly see what the different functions of the packages can do.</p>
</div>
<div id="homework-2" class="section level2 unnumbered">
<h2>Homework</h2>
<p>Your homework for this chapter is to complete <a href="https://pmongeon.github.io/info6270/files/assignments/info6270_lab2.r">lab #2</a></p>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-wickham_tidy_2014" class="csl-entry">
Wickham, Hadley. 2014. <span>“Tidy <span>Data</span>.”</span> <em>Journal of Statistical Software</em> 59 (September): 1–23. <a href="https://doi.org/10.18637/jss.v059.i10">https://doi.org/10.18637/jss.v059.i10</a>.
</div>
<div id="ref-wickham_r_2016" class="csl-entry">
Wickham, Hadley, and Garrett Grolemund. 2016. <em>R for Data Science: Import, Tidy, Transform, Visualize, and Model Data</em>. First edition. Sebastopol, CA: O’Reilly. <a href="https://r4ds.had.co.nz/">https://r4ds.had.co.nz/</a>.
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="chapter-2---getting-started-with-r.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="chapter-4---working-with-strings.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

</body>

</html>
