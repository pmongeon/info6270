<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 - Working with strings | INFO 6270 - Introduction to Data Science</title>
  <meta name="description" content="Chapter 4 - Working with strings | INFO 6270 - Introduction to Data Science" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 - Working with strings | INFO 6270 - Introduction to Data Science" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="pmongeon/info6270" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 - Working with strings | INFO 6270 - Introduction to Data Science" />
  
  
  

<meta name="author" content="Philippe Mongeon" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="chapter-3---reading-and-tidying-data.html"/>
<link rel="next" href="chapter-5---r-markdown.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><center>INFO6270 - Introduction to Data Science</center></li>
<li><center>Winter 2022</center></li>
<li><center>Philippe Mongeon</center></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Course overview</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#schedule"><i class="fa fa-check"></i>Schedule</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#assignments"><i class="fa fa-check"></i>Assignments</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#bibliography"><i class="fa fa-check"></i>Bibliography</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#official-syllabus"><i class="fa fa-check"></i>Official syllabus</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-1---what-is-data-science.html"><a href="chapter-1---what-is-data-science.html"><i class="fa fa-check"></i>Chapter 1 - What is data science?</a>
<ul>
<li class="chapter" data-level="" data-path="chapter-1---what-is-data-science.html"><a href="chapter-1---what-is-data-science.html#learning-objectives"><i class="fa fa-check"></i>Learning objectives</a></li>
<li class="chapter" data-level="" data-path="chapter-1---what-is-data-science.html"><a href="chapter-1---what-is-data-science.html#what-is-data-science"><i class="fa fa-check"></i>What is data science?</a></li>
<li class="chapter" data-level="" data-path="chapter-1---what-is-data-science.html"><a href="chapter-1---what-is-data-science.html#the-data-science-process"><i class="fa fa-check"></i>The data science process</a></li>
<li class="chapter" data-level="" data-path="chapter-1---what-is-data-science.html"><a href="chapter-1---what-is-data-science.html#writing-a-problem-statement"><i class="fa fa-check"></i>Writing a problem statement</a></li>
<li class="chapter" data-level="" data-path="chapter-1---what-is-data-science.html"><a href="chapter-1---what-is-data-science.html#getting-data"><i class="fa fa-check"></i>Getting data</a></li>
<li class="chapter" data-level="" data-path="chapter-1---what-is-data-science.html"><a href="chapter-1---what-is-data-science.html#homework"><i class="fa fa-check"></i>Homework</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-2---getting-started-with-r.html"><a href="chapter-2---getting-started-with-r.html"><i class="fa fa-check"></i>Chapter 2 - Getting started with R</a>
<ul>
<li class="chapter" data-level="" data-path="chapter-2---getting-started-with-r.html"><a href="chapter-2---getting-started-with-r.html#learning-objectives-1"><i class="fa fa-check"></i>Learning objectives</a></li>
<li class="chapter" data-level="" data-path="chapter-2---getting-started-with-r.html"><a href="chapter-2---getting-started-with-r.html#setting-up-r"><i class="fa fa-check"></i>Setting up R</a>
<ul>
<li class="chapter" data-level="" data-path="chapter-2---getting-started-with-r.html"><a href="chapter-2---getting-started-with-r.html#installing-r-and-rstudio"><i class="fa fa-check"></i>Installing R and Rstudio</a></li>
<li class="chapter" data-level="" data-path="chapter-2---getting-started-with-r.html"><a href="chapter-2---getting-started-with-r.html#explore-rstudio"><i class="fa fa-check"></i>Explore RStudio</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-2---getting-started-with-r.html"><a href="chapter-2---getting-started-with-r.html#first-steps-in-r"><i class="fa fa-check"></i>First steps in R</a>
<ul>
<li class="chapter" data-level="" data-path="chapter-2---getting-started-with-r.html"><a href="chapter-2---getting-started-with-r.html#r-scripts"><i class="fa fa-check"></i>R scripts</a></li>
<li class="chapter" data-level="" data-path="chapter-2---getting-started-with-r.html"><a href="chapter-2---getting-started-with-r.html#working-directory"><i class="fa fa-check"></i>Working directory</a></li>
<li class="chapter" data-level="" data-path="chapter-2---getting-started-with-r.html"><a href="chapter-2---getting-started-with-r.html#functions"><i class="fa fa-check"></i>Functions</a></li>
<li class="chapter" data-level="" data-path="chapter-2---getting-started-with-r.html"><a href="chapter-2---getting-started-with-r.html#executing-code"><i class="fa fa-check"></i>Executing code</a></li>
<li class="chapter" data-level="" data-path="chapter-2---getting-started-with-r.html"><a href="chapter-2---getting-started-with-r.html#numbers-and-strings"><i class="fa fa-check"></i>numbers and strings</a></li>
<li class="chapter" data-level="" data-path="chapter-2---getting-started-with-r.html"><a href="chapter-2---getting-started-with-r.html#doing-the-math"><i class="fa fa-check"></i>Doing the math</a></li>
<li class="chapter" data-level="" data-path="chapter-2---getting-started-with-r.html"><a href="chapter-2---getting-started-with-r.html#objects"><i class="fa fa-check"></i>Objects</a></li>
<li class="chapter" data-level="" data-path="chapter-2---getting-started-with-r.html"><a href="chapter-2---getting-started-with-r.html#subsetting-data"><i class="fa fa-check"></i>Subsetting data</a></li>
<li class="chapter" data-level="" data-path="chapter-2---getting-started-with-r.html"><a href="chapter-2---getting-started-with-r.html#logical-operators"><i class="fa fa-check"></i>Logical operators</a></li>
<li class="chapter" data-level="" data-path="chapter-2---getting-started-with-r.html"><a href="chapter-2---getting-started-with-r.html#conditional-statements"><i class="fa fa-check"></i>Conditional statements</a></li>
<li class="chapter" data-level="" data-path="chapter-2---getting-started-with-r.html"><a href="chapter-2---getting-started-with-r.html#loops-and-vectorization"><i class="fa fa-check"></i>Loops and vectorization</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-2---getting-started-with-r.html"><a href="chapter-2---getting-started-with-r.html#homework-1"><i class="fa fa-check"></i>Homework</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html"><i class="fa fa-check"></i>Chapter 3 - Reading and tidying data</a>
<ul>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#learning-objectives-2"><i class="fa fa-check"></i>Learning objectives</a>
<ul>
<li><a href="chapter-3---reading-and-tidying-data.html#slides"><strong>Slides</strong></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#tidy-data"><i class="fa fa-check"></i>Tidy data</a></li>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#the-tidyverse"><i class="fa fa-check"></i>The tidyverse</a></li>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#import-data"><i class="fa fa-check"></i>Import data</a>
<ul>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#delimited-file-formats"><i class="fa fa-check"></i>Delimited file formats</a></li>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#json-files"><i class="fa fa-check"></i>JSON files</a></li>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#application-programming-interface-api"><i class="fa fa-check"></i>Application programming interface (API)</a></li>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#xml-files"><i class="fa fa-check"></i>XML files</a></li>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#connections"><i class="fa fa-check"></i>Connections</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#tidy-your-data"><i class="fa fa-check"></i>Tidy your data</a>
<ul>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#reshape-data"><i class="fa fa-check"></i>Reshape data</a></li>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#expand-tables"><i class="fa fa-check"></i>Expand tables</a></li>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#handle-missing-values"><i class="fa fa-check"></i>Handle missing values</a></li>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#merge-and-split-cells"><i class="fa fa-check"></i>Merge and split cells</a></li>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#nested-data"><i class="fa fa-check"></i>Nested data</a></li>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#combine-dataframes"><i class="fa fa-check"></i>Combine dataframes</a></li>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#join-dataframes"><i class="fa fa-check"></i>Join dataframes</a></li>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#rename-variables"><i class="fa fa-check"></i>Rename variables</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#export-data"><i class="fa fa-check"></i>Export data</a>
<ul>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#export-dataframes"><i class="fa fa-check"></i>Export dataframes</a></li>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#json"><i class="fa fa-check"></i>JSON</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#the-pipe"><i class="fa fa-check"></i>The Pipe</a></li>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#additional-resources"><i class="fa fa-check"></i>Additional resources</a></li>
<li class="chapter" data-level="" data-path="chapter-3---reading-and-tidying-data.html"><a href="chapter-3---reading-and-tidying-data.html#homework-2"><i class="fa fa-check"></i>Homework</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-4---working-with-strings.html"><a href="chapter-4---working-with-strings.html"><i class="fa fa-check"></i>Chapter 4 - Working with strings</a>
<ul>
<li class="chapter" data-level="" data-path="chapter-4---working-with-strings.html"><a href="chapter-4---working-with-strings.html#learning-objectives-3"><i class="fa fa-check"></i>Learning objectives</a></li>
<li class="chapter" data-level="" data-path="chapter-4---working-with-strings.html"><a href="chapter-4---working-with-strings.html#dealing-with-messy-or-unstructured-data"><i class="fa fa-check"></i>Dealing with messy or unstructured data</a>
<ul>
<li class="chapter" data-level="" data-path="chapter-4---working-with-strings.html"><a href="chapter-4---working-with-strings.html#cleaning-messy-data"><i class="fa fa-check"></i>Cleaning messy data</a></li>
<li class="chapter" data-level="" data-path="chapter-4---working-with-strings.html"><a href="chapter-4---working-with-strings.html#filtering-rows-based-on-string-matches"><i class="fa fa-check"></i>Filtering rows based on string matches</a></li>
<li class="chapter" data-level="" data-path="chapter-4---working-with-strings.html"><a href="chapter-4---working-with-strings.html#extracting-data-from-text"><i class="fa fa-check"></i>Extracting data from text</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-4---working-with-strings.html"><a href="chapter-4---working-with-strings.html#the-stringr-package"><i class="fa fa-check"></i>The stringr package</a>
<ul>
<li class="chapter" data-level="" data-path="chapter-4---working-with-strings.html"><a href="chapter-4---working-with-strings.html#transforming-strings"><i class="fa fa-check"></i>Transforming strings</a></li>
<li class="chapter" data-level="" data-path="chapter-4---working-with-strings.html"><a href="chapter-4---working-with-strings.html#clean-up-a-string"><i class="fa fa-check"></i>Clean up a string</a></li>
<li class="chapter" data-level="" data-path="chapter-4---working-with-strings.html"><a href="chapter-4---working-with-strings.html#combine-strings"><i class="fa fa-check"></i>Combine strings</a></li>
<li class="chapter" data-level="" data-path="chapter-4---working-with-strings.html"><a href="chapter-4---working-with-strings.html#splitting-strings"><i class="fa fa-check"></i>Splitting strings</a></li>
<li class="chapter" data-level="" data-path="chapter-4---working-with-strings.html"><a href="chapter-4---working-with-strings.html#subsetting-strings"><i class="fa fa-check"></i>Subsetting strings</a></li>
<li class="chapter" data-level="" data-path="chapter-4---working-with-strings.html"><a href="chapter-4---working-with-strings.html#locating-a-pattern-in-a-string"><i class="fa fa-check"></i>Locating a pattern in a string</a></li>
<li class="chapter" data-level="" data-path="chapter-4---working-with-strings.html"><a href="chapter-4---working-with-strings.html#testing-strings"><i class="fa fa-check"></i>Testing strings</a></li>
<li class="chapter" data-level="" data-path="chapter-4---working-with-strings.html"><a href="chapter-4---working-with-strings.html#regular-expressions-regex"><i class="fa fa-check"></i>Regular expressions (regex)</a></li>
<li class="chapter" data-level="" data-path="chapter-4---working-with-strings.html"><a href="chapter-4---working-with-strings.html#dealing-with-special-characters-in-strings"><i class="fa fa-check"></i>Dealing with special characters in strings</a></li>
<li class="chapter" data-level="" data-path="chapter-4---working-with-strings.html"><a href="chapter-4---working-with-strings.html#summary"><i class="fa fa-check"></i>Summary</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-4---working-with-strings.html"><a href="chapter-4---working-with-strings.html#homework-3"><i class="fa fa-check"></i>Homework</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-5---r-markdown.html"><a href="chapter-5---r-markdown.html"><i class="fa fa-check"></i>Chapter 5 - R Markdown</a>
<ul>
<li class="chapter" data-level="" data-path="chapter-5---r-markdown.html"><a href="chapter-5---r-markdown.html#learning-objectives-4"><i class="fa fa-check"></i>Learning objectives</a></li>
<li class="chapter" data-level="" data-path="chapter-5---r-markdown.html"><a href="chapter-5---r-markdown.html#introduction"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="" data-path="chapter-5---r-markdown.html"><a href="chapter-5---r-markdown.html#r-markdown"><i class="fa fa-check"></i>R Markdown</a>
<ul>
<li class="chapter" data-level="" data-path="chapter-5---r-markdown.html"><a href="chapter-5---r-markdown.html#creating-a-r-markdown-file-in-rstudio"><i class="fa fa-check"></i>Creating a R Markdown file in RStudio</a></li>
<li class="chapter" data-level="" data-path="chapter-5---r-markdown.html"><a href="chapter-5---r-markdown.html#three-components-of-a-r-markdown-file"><i class="fa fa-check"></i>Three components of a R Markdown file</a></li>
<li class="chapter" data-level="" data-path="chapter-5---r-markdown.html"><a href="chapter-5---r-markdown.html#visual-mode"><i class="fa fa-check"></i>Visual mode</a></li>
<li class="chapter" data-level="" data-path="chapter-5---r-markdown.html"><a href="chapter-5---r-markdown.html#rendering-knitting-your-document"><i class="fa fa-check"></i>Rendering (knitting) your document</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-5---r-markdown.html"><a href="chapter-5---r-markdown.html#making-beautiful-tables-with-r-markdown"><i class="fa fa-check"></i>Making beautiful tables with R Markdown</a>
<ul>
<li class="chapter" data-level="" data-path="chapter-5---r-markdown.html"><a href="chapter-5---r-markdown.html#the-kableextra-package"><i class="fa fa-check"></i>the kableExtra package</a></li>
<li class="chapter" data-level="" data-path="chapter-5---r-markdown.html"><a href="chapter-5---r-markdown.html#keeping-it-simple"><i class="fa fa-check"></i>keeping it simple</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-5---r-markdown.html"><a href="chapter-5---r-markdown.html#summary-1"><i class="fa fa-check"></i>Summary</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-6---summarizing-data.html"><a href="chapter-6---summarizing-data.html"><i class="fa fa-check"></i>Chapter 6 - Summarizing data</a>
<ul>
<li class="chapter" data-level="" data-path="chapter-6---summarizing-data.html"><a href="chapter-6---summarizing-data.html#learning-objectives-5"><i class="fa fa-check"></i>Learning objectives</a></li>
<li class="chapter" data-level="" data-path="chapter-6---summarizing-data.html"><a href="chapter-6---summarizing-data.html#introduction-1"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="" data-path="chapter-6---summarizing-data.html"><a href="chapter-6---summarizing-data.html#types-of-variables"><i class="fa fa-check"></i>Types of variables</a>
<ul>
<li class="chapter" data-level="" data-path="chapter-6---summarizing-data.html"><a href="chapter-6---summarizing-data.html#categorical"><i class="fa fa-check"></i>Categorical</a></li>
<li class="chapter" data-level="" data-path="chapter-6---summarizing-data.html"><a href="chapter-6---summarizing-data.html#numerical-variables"><i class="fa fa-check"></i>Numerical variables</a></li>
<li class="chapter" data-level="" data-path="chapter-6---summarizing-data.html"><a href="chapter-6---summarizing-data.html#categories-represented-with-numbers"><i class="fa fa-check"></i>Categories represented with numbers</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-6---summarizing-data.html"><a href="chapter-6---summarizing-data.html#summarizing-categorical-data"><i class="fa fa-check"></i>Summarizing categorical data</a>
<ul>
<li class="chapter" data-level="" data-path="chapter-6---summarizing-data.html"><a href="chapter-6---summarizing-data.html#frequency"><i class="fa fa-check"></i>Frequency</a></li>
<li class="chapter" data-level="" data-path="chapter-6---summarizing-data.html"><a href="chapter-6---summarizing-data.html#relative-frequency"><i class="fa fa-check"></i>Relative frequency</a></li>
<li class="chapter" data-level="" data-path="chapter-6---summarizing-data.html"><a href="chapter-6---summarizing-data.html#adding-a-total"><i class="fa fa-check"></i>Adding a total</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-6---summarizing-data.html"><a href="chapter-6---summarizing-data.html#summarizing-numerical-data"><i class="fa fa-check"></i>Summarizing numerical data</a>
<ul>
<li class="chapter" data-level="" data-path="chapter-6---summarizing-data.html"><a href="chapter-6---summarizing-data.html#measures-of-centrality"><i class="fa fa-check"></i>Measures of centrality</a></li>
<li class="chapter" data-level="" data-path="chapter-6---summarizing-data.html"><a href="chapter-6---summarizing-data.html#measures-of-dispersion"><i class="fa fa-check"></i>Measures of dispersion</a></li>
<li class="chapter" data-level="" data-path="chapter-6---summarizing-data.html"><a href="chapter-6---summarizing-data.html#measures-of-symmetry"><i class="fa fa-check"></i>Measures of symmetry</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-6---summarizing-data.html"><a href="chapter-6---summarizing-data.html#creating-a-descriptive-statistics-summary"><i class="fa fa-check"></i>Creating a descriptive statistics summary</a></li>
<li class="chapter" data-level="" data-path="chapter-6---summarizing-data.html"><a href="chapter-6---summarizing-data.html#homework-4"><i class="fa fa-check"></i>Homework</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-7---visualizing-data.html"><a href="chapter-7---visualizing-data.html"><i class="fa fa-check"></i>Chapter 7 - Visualizing data</a>
<ul>
<li class="chapter" data-level="0.1" data-path="chapter-7---visualizing-data.html"><a href="chapter-7---visualizing-data.html#introduction-2"><i class="fa fa-check"></i><b>0.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="chapter-7---visualizing-data.html"><a href="chapter-7---visualizing-data.html#the-ggplot-syntax"><i class="fa fa-check"></i>the ggplot syntax</a></li>
<li class="chapter" data-level="" data-path="chapter-7---visualizing-data.html"><a href="chapter-7---visualizing-data.html#choosing-the-right-visualization-for-your-data"><i class="fa fa-check"></i>Choosing the right visualization for your data</a></li>
<li class="chapter" data-level="" data-path="chapter-7---visualizing-data.html"><a href="chapter-7---visualizing-data.html#facets"><i class="fa fa-check"></i>Facets</a></li>
<li class="chapter" data-level="" data-path="chapter-7---visualizing-data.html"><a href="chapter-7---visualizing-data.html#making-pretty-figures"><i class="fa fa-check"></i>Making pretty figures</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-8---topic-modelling.html"><a href="chapter-8---topic-modelling.html"><i class="fa fa-check"></i>Chapter 8 - Topic modelling</a></li>
<li class="chapter" data-level="" data-path="chapter-9---k-nearest-neighbors.html"><a href="chapter-9---k-nearest-neighbors.html"><i class="fa fa-check"></i>Chapter 9 - K nearest neighbors</a></li>
<li class="chapter" data-level="" data-path="chapter-10---logistic-regression.html"><a href="chapter-10---logistic-regression.html"><i class="fa fa-check"></i>Chapter 10 - Logistic regression</a></li>
<li class="chapter" data-level="" data-path="chapter-11---linear-regression.html"><a href="chapter-11---linear-regression.html"><i class="fa fa-check"></i>Chapter 11 - Linear regression</a></li>
<li class="chapter" data-level="" data-path="chapter-12---principal-component-analysis.html"><a href="chapter-12---principal-component-analysis.html"><i class="fa fa-check"></i>Chapter 12 - Principal component analysis</a></li>
<li class="chapter" data-level="" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i>Conclusion</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">INFO 6270 - Introduction to Data Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="chapter-4---working-with-strings" class="section level1 unnumbered">
<h1>Chapter 4 - Working with strings</h1>
<div id="learning-objectives-3" class="section level2 unnumbered">
<h2>Learning objectives</h2>
<ul>
<li><p>Transform strings</p></li>
<li><p>Combine strings</p></li>
<li><p>Split strings</p></li>
<li><p>Subset strings</p></li>
</ul>
</div>
<div id="dealing-with-messy-or-unstructured-data" class="section level2 unnumbered">
<h2>Dealing with messy or unstructured data</h2>
<p>In the last chapter, we focused on how to import data into tibbles and then reshape them so that they fit the tidy data criteria. So in most cases, we had data with <strong>some</strong> structure which we transformed into a different structure. This week we look at working with strings for three reasons.</p>
<div id="cleaning-messy-data" class="section level3 unnumbered">
<h3>Cleaning messy data</h3>
<p>Sometimes you may be dealing with data that has the correct tidy structure, but the data itself is not clean and contains errors, unnecessary characters, or unwanted spelling or formatting variants. We need to clean that data before we conduct our analysis.</p>
<table>
<thead>
<tr class="header">
<th align="left">full_names (messy)</th>
<th align="left">full_names (tidy)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Colin Conrad, PhD</td>
<td align="left">Colin Conrad</td>
</tr>
<tr class="even">
<td align="left">MACDONALD, Betrum</td>
<td align="left">Bertrum MacDonald</td>
</tr>
<tr class="odd">
<td align="left">Dr. Louise Spiteri</td>
<td align="left">Louise Spiteri</td>
</tr>
<tr class="even">
<td align="left">Mongeon, Philippe</td>
<td align="left">Philippe Mongeon</td>
</tr>
<tr class="odd">
<td align="left">jennifer grek-martin</td>
<td align="left">Jennier Grek-Martin</td>
</tr>
</tbody>
</table>
</div>
<div id="filtering-rows-based-on-string-matches" class="section level3 unnumbered">
<h3>Filtering rows based on string matches</h3>
<p>In the last chapter, we learned how to filter rows of a tibble based on the value contained in a cell or based on the row number. This week we will add to our toolbox some string matching functions that check if a string of characters is found within a larger string of character. One example could be retrieving a set of course codes starting with INFO or MGMT in a vector containing the course codes of all offerings of Dalhousie University.</p>
</div>
<div id="extracting-data-from-text" class="section level3 unnumbered">
<h3>Extracting data from text</h3>
<p>Sometimes you may have to deal with unstructured data, for example a long character string, that contain data elements that we wish to extract. Take this character string for example:</p>
<blockquote>
<p>I am taking several courses offered at SIM this Winter. There is INFO6270 (Introduction to Data Science) and also INFO6540 and the information policy one, which I think has the course code INFO6610.</p>
</blockquote>
<p>Maybe you had the brilliant idea to use a free text field in a survey to collect information about the courses that students are taking this Winter, and you now have three thousands responses that look like this one. This is unstructured data that needs to be structured before it can be analyzed. And there are situations, such as this specific example, where R might be able to help at least a little bit. However, this kind of task can be simple in some cases but can also get very complex. In this course we are not going to do complex data extractions of this kind, but we will perform some analysis on full texts in Chapter 7 on topic modelling.</p>
</div>
</div>
<div id="the-stringr-package" class="section level2 unnumbered">
<h2>The stringr package</h2>
<p>The <strong>stringr</strong> package (<a href="https://stringr.tidyverse.org" class="uri">https://stringr.tidyverse.org</a>) is part of the tidyverse and contains a collection of functions that perform all kinds of operations on strings. Let’s go through some of those tasks and some code examples.</p>
<p><strong>Important note</strong>: the stringr functions usually work best with vectors, so when you want to use them to modify strings in tibbles, they are often used in combination with the mutate() function that is used to add or update columns in a tibble. Below I will include examples that use both vectors and tibbles, when appropriate.</p>
<div id="transforming-strings" class="section level3 unnumbered">
<h3>Transforming strings</h3>
<div id="change-string-character-case" class="section level4 unnumbered">
<h4>change string character case</h4>
<p>One of the simple transformation that you may want to perform on a string is changing its case. This is very easily done with the <strong>str_to_lower()</strong>, <strong>str_to_upper()</strong>, <strong>str_to_sentence()</strong>, and <strong>str_to_title()</strong> functions.</p>
<table>
<thead>
<tr class="header">
<th align="left">Statement</th>
<th align="left">Output</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">str_to_lower(“HeLlO WoRlD!”)</td>
<td align="left">hello world!</td>
</tr>
<tr class="even">
<td align="left">str_to_lower(“HeLlO WoRlD!”)</td>
<td align="left">HELLO WORLD!</td>
</tr>
<tr class="odd">
<td align="left">str_to_sentence(“HeLlO WoRlD!”)</td>
<td align="left">Hello world!</td>
</tr>
<tr class="even">
<td align="left">str_to_title(“HeLlO WoRlD!”)</td>
<td align="left">Hello World!</td>
</tr>
</tbody>
</table>
<div id="vector-example" class="section level5 unnumbered">
<h5>Vector example</h5>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="chapter-4---working-with-strings.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I create a vector with character strings</span></span>
<span id="cb1-2"><a href="chapter-4---working-with-strings.html#cb1-2" aria-hidden="true" tabindex="-1"></a>vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;I like coding with R&quot;</span>,<span class="st">&quot;i like coding in R&quot;</span>,<span class="st">&quot;R IS AMAZING!&quot;</span>,<span class="st">&quot;I LoVe R&quot;</span>)</span>
<span id="cb1-3"><a href="chapter-4---working-with-strings.html#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="chapter-4---working-with-strings.html#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># I convert them all to lowercase.</span></span>
<span id="cb1-5"><a href="chapter-4---working-with-strings.html#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_lower</span>(vector)</span></code></pre></div>
<pre><code>## [1] &quot;i like coding with r&quot; &quot;i like coding in r&quot;   &quot;r is amazing!&quot;       
## [4] &quot;i love r&quot;</code></pre>
</div>
<div id="tibble-example" class="section level5 unnumbered">
<h5>Tibble example</h5>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="chapter-4---working-with-strings.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I create a tibble with inconsistent strings</span></span>
<span id="cb3-2"><a href="chapter-4---working-with-strings.html#cb3-2" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">messy =</span> <span class="fu">c</span>(<span class="st">&quot;I like coding with R&quot;</span>,<span class="st">&quot;i like coding in R&quot;</span>,<span class="st">&quot;R IS AMAZING!&quot;</span>,<span class="st">&quot;I LoVe R&quot;</span>))</span>
<span id="cb3-3"><a href="chapter-4---working-with-strings.html#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="chapter-4---working-with-strings.html#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># I use the mutate() function to create a new column (called clean) with the consistent case.</span></span>
<span id="cb3-5"><a href="chapter-4---working-with-strings.html#cb3-5" aria-hidden="true" tabindex="-1"></a>t <span class="sc">%&gt;%</span> </span>
<span id="cb3-6"><a href="chapter-4---working-with-strings.html#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">clean =</span> <span class="fu">str_to_lower</span>(messy))</span></code></pre></div>
<pre><code>## # A tibble: 4 x 2
##   messy                clean               
##   &lt;chr&gt;                &lt;chr&gt;               
## 1 I like coding with R i like coding with r
## 2 i like coding in R   i like coding in r  
## 3 R IS AMAZING!        r is amazing!       
## 4 I LoVe R             i love r</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="chapter-4---working-with-strings.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I use the mutate() function to modify the messy column and make the strings consistent. </span></span>
<span id="cb5-2"><a href="chapter-4---working-with-strings.html#cb5-2" aria-hidden="true" tabindex="-1"></a>t <span class="sc">%&gt;%</span> </span>
<span id="cb5-3"><a href="chapter-4---working-with-strings.html#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">messy =</span> <span class="fu">str_to_lower</span>(messy))</span></code></pre></div>
<pre><code>## # A tibble: 4 x 1
##   messy               
##   &lt;chr&gt;               
## 1 i like coding with r
## 2 i like coding in r  
## 3 r is amazing!       
## 4 i love r</code></pre>
</div>
</div>
<div id="replacing-parts-of-strings" class="section level4 unnumbered">
<h4>Replacing parts of strings</h4>
<p>The functions <strong>str_replace()</strong> and <strong>str_replace_all()</strong> can be used to modify strings by replacing some patterns with some other. The difference between the two is that str_replace() will only replace the first instance of the pattern in the string, while str_replace_all() will replace all the instances.</p>
<div id="vector-example-1" class="section level5 unnumbered">
<h5>Vector example</h5>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="chapter-4---working-with-strings.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I create a vector with two strings.</span></span>
<span id="cb7-2"><a href="chapter-4---working-with-strings.html#cb7-2" aria-hidden="true" tabindex="-1"></a>names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;dr Mike Smit&quot;</span>,<span class="st">&quot;dr Sandra Toze&quot;</span>)</span>
<span id="cb7-3"><a href="chapter-4---working-with-strings.html#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="chapter-4---working-with-strings.html#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># I replace the first instance of the pattern &quot;dr&quot; with &quot;doctor&quot;. </span></span>
<span id="cb7-5"><a href="chapter-4---working-with-strings.html#cb7-5" aria-hidden="true" tabindex="-1"></a>names <span class="sc">%&gt;%</span> <span class="fu">str_replace</span>(<span class="st">&quot;dr&quot;</span>,<span class="st">&quot;doctor&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;doctor Mike Smit&quot;   &quot;doctor Sandra Toze&quot;</code></pre>
<p>Now let’s see what happens if I do the same example but use str_replace_all() instead of str_replace().</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="chapter-4---working-with-strings.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I create a vector with two strings.</span></span>
<span id="cb9-2"><a href="chapter-4---working-with-strings.html#cb9-2" aria-hidden="true" tabindex="-1"></a>names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;dr Mike Smit&quot;</span>,<span class="st">&quot;dr Sandra Toze&quot;</span>)</span>
<span id="cb9-3"><a href="chapter-4---working-with-strings.html#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="chapter-4---working-with-strings.html#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co"># I replace ALL instances of the pattern &quot;dr&quot; with &quot;doctor&quot;. </span></span>
<span id="cb9-5"><a href="chapter-4---working-with-strings.html#cb9-5" aria-hidden="true" tabindex="-1"></a>names <span class="sc">%&gt;%</span> <span class="fu">str_replace_all</span>(<span class="st">&quot;dr&quot;</span>,<span class="st">&quot;doctor&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;doctor Mike Smit&quot;       &quot;doctor Sandoctora Toze&quot;</code></pre>
<p>The second string got messed up because the second “dr” pattern in San<strong>dr</strong>a also got replaced.</p>
<p>The <strong>str_remove()</strong> and <strong>str_remove_all()</strong> are the equivalent of str_replace(“some pattern,” ““) and str_replace_all(”some pattern”, ““), but they don’t require to provide a replacement string, which make the code a bit more clean.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="chapter-4---working-with-strings.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I create a vector with names</span></span>
<span id="cb11-2"><a href="chapter-4---working-with-strings.html#cb11-2" aria-hidden="true" tabindex="-1"></a>names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;dr Mike Smit&quot;</span>,<span class="st">&quot;dr Sandra Toze&quot;</span>)</span>
<span id="cb11-3"><a href="chapter-4---working-with-strings.html#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="chapter-4---working-with-strings.html#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co"># I remove the pattern &quot;dr&quot; from the names.</span></span>
<span id="cb11-5"><a href="chapter-4---working-with-strings.html#cb11-5" aria-hidden="true" tabindex="-1"></a>names <span class="sc">%&gt;%</span> <span class="fu">str_remove</span>(<span class="st">&quot;dr &quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Mike Smit&quot;   &quot;Sandra Toze&quot;</code></pre>
</div>
<div id="tibble-example-1" class="section level5 unnumbered">
<h5>Tibble example</h5>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="chapter-4---working-with-strings.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I create a tibble with professor names.</span></span>
<span id="cb13-2"><a href="chapter-4---working-with-strings.html#cb13-2" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">names =</span> <span class="fu">c</span>(<span class="st">&quot;dr Mike Smit&quot;</span>,<span class="st">&quot;dr Sandra Toze&quot;</span>))</span>
<span id="cb13-3"><a href="chapter-4---working-with-strings.html#cb13-3" aria-hidden="true" tabindex="-1"></a>t</span></code></pre></div>
<pre><code>## # A tibble: 2 x 1
##   names         
##   &lt;chr&gt;         
## 1 dr Mike Smit  
## 2 dr Sandra Toze</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="chapter-4---working-with-strings.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I remove the first instance of the pattern &quot;dr&quot; in the names. </span></span>
<span id="cb15-2"><a href="chapter-4---working-with-strings.html#cb15-2" aria-hidden="true" tabindex="-1"></a>t <span class="sc">%&gt;%</span> </span>
<span id="cb15-3"><a href="chapter-4---working-with-strings.html#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">names =</span> <span class="fu">str_remove</span>(names, <span class="st">&quot;dr&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 2 x 1
##   names         
##   &lt;chr&gt;         
## 1 &quot; Mike Smit&quot;  
## 2 &quot; Sandra Toze&quot;</code></pre>
</div>
</div>
</div>
<div id="clean-up-a-string" class="section level3 unnumbered">
<h3>Clean up a string</h3>
<p>The <strong>str_squish()</strong> function is a quick and easy way to remove unwanted spaces before or after a string, as well as consecutive spaces within a string.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="chapter-4---working-with-strings.html#cb17-1" aria-hidden="true" tabindex="-1"></a>messy_string <span class="ot">&lt;-</span> <span class="st">&quot;   My cat just    stepped on the spacebar  as I was writing this      &quot;</span></span>
<span id="cb17-2"><a href="chapter-4---working-with-strings.html#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="chapter-4---working-with-strings.html#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Let&#39;s print the string to see what it looks like</span></span>
<span id="cb17-4"><a href="chapter-4---working-with-strings.html#cb17-4" aria-hidden="true" tabindex="-1"></a>messy_string</span></code></pre></div>
<pre><code>## [1] &quot;   My cat just    stepped on the spacebar  as I was writing this      &quot;</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="chapter-4---working-with-strings.html#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Let&#39;s squish it!</span></span>
<span id="cb19-2"><a href="chapter-4---working-with-strings.html#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_squish</span>(messy_string)</span></code></pre></div>
<pre><code>## [1] &quot;My cat just stepped on the spacebar as I was writing this&quot;</code></pre>
</div>
<div id="combine-strings" class="section level3 unnumbered">
<h3>Combine strings</h3>
<div id="str_c" class="section level4 unnumbered">
<h4>str_c()</h4>
<p>We already learned how to use the unite() function of the tidyr package to concatenate multiple dataframe columns into one. However, the unite() function works only with dataframes as input, which can be limiting. The stringr package offers a str_c() function that works with vectors, so it’s good to know how to use both functions.</p>
<div id="vector-example-2" class="section level5 unnumbered">
<h5>Vector example</h5>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="chapter-4---working-with-strings.html#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I create a vector with first names</span></span>
<span id="cb21-2"><a href="chapter-4---working-with-strings.html#cb21-2" aria-hidden="true" tabindex="-1"></a>first_names <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;Bertrum&quot;</span>, <span class="st">&quot;Colin&quot;</span>, <span class="st">&quot;Louise&quot;</span>)</span>
<span id="cb21-3"><a href="chapter-4---working-with-strings.html#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="chapter-4---working-with-strings.html#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co"># I create a vector with last names</span></span>
<span id="cb21-5"><a href="chapter-4---working-with-strings.html#cb21-5" aria-hidden="true" tabindex="-1"></a>last_names <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;MacDonald&quot;</span>, <span class="st">&quot;Conrad&quot;</span>, <span class="st">&quot;Spiteri&quot;</span>)</span>
<span id="cb21-6"><a href="chapter-4---working-with-strings.html#cb21-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-7"><a href="chapter-4---working-with-strings.html#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="co"># I combined my vectors into a new vector with full names</span></span>
<span id="cb21-8"><a href="chapter-4---working-with-strings.html#cb21-8" aria-hidden="true" tabindex="-1"></a>full_names <span class="ot">&lt;-</span> <span class="fu">str_c</span>(first_names, last_names, <span class="at">sep =</span> <span class="st">&quot; &quot;</span>)</span>
<span id="cb21-9"><a href="chapter-4---working-with-strings.html#cb21-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-10"><a href="chapter-4---working-with-strings.html#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="co"># I print the vector</span></span>
<span id="cb21-11"><a href="chapter-4---working-with-strings.html#cb21-11" aria-hidden="true" tabindex="-1"></a>full_names</span></code></pre></div>
<pre><code>## [1] &quot;Bertrum MacDonald&quot; &quot;Colin Conrad&quot;      &quot;Louise Spiteri&quot;</code></pre>
</div>
<div id="tibble-example-2" class="section level5 unnumbered">
<h5>Tibble example</h5>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="chapter-4---working-with-strings.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I create a tibble with two columsn containing first and last names.</span></span>
<span id="cb23-2"><a href="chapter-4---working-with-strings.html#cb23-2" aria-hidden="true" tabindex="-1"></a>t <span class="ot">=</span> <span class="fu">tibble</span>(<span class="at">first_name =</span> <span class="fu">c</span>(<span class="st">&quot;Bertrum&quot;</span>, <span class="st">&quot;Colin&quot;</span>, <span class="st">&quot;Louise&quot;</span>),</span>
<span id="cb23-3"><a href="chapter-4---working-with-strings.html#cb23-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">last_name =</span> <span class="fu">c</span>(<span class="st">&quot;MacDonald&quot;</span>, <span class="st">&quot;Conrad&quot;</span>, <span class="st">&quot;Spiteri&quot;</span>))</span>
<span id="cb23-4"><a href="chapter-4---working-with-strings.html#cb23-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-5"><a href="chapter-4---working-with-strings.html#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="co"># I add a column to my tibble with full_names</span></span>
<span id="cb23-6"><a href="chapter-4---working-with-strings.html#cb23-6" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> t <span class="sc">%&gt;%</span> </span>
<span id="cb23-7"><a href="chapter-4---working-with-strings.html#cb23-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">full_name =</span> <span class="fu">str_c</span>(first_name, last_name, <span class="at">sep=</span><span class="st">&quot; &quot;</span>))</span>
<span id="cb23-8"><a href="chapter-4---working-with-strings.html#cb23-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-9"><a href="chapter-4---working-with-strings.html#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="co"># I print my new tibble</span></span>
<span id="cb23-10"><a href="chapter-4---working-with-strings.html#cb23-10" aria-hidden="true" tabindex="-1"></a>t</span></code></pre></div>
<pre><code>## # A tibble: 3 x 3
##   first_name last_name full_name        
##   &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;            
## 1 Bertrum    MacDonald Bertrum MacDonald
## 2 Colin      Conrad    Colin Conrad     
## 3 Louise     Spiteri   Louise Spiteri</code></pre>
</div>
</div>
</div>
<div id="splitting-strings" class="section level3 unnumbered">
<h3>Splitting strings</h3>
<div id="str_split" class="section level4 unnumbered">
<h4>str_split()</h4>
<p>The <strong>str_split()</strong> function does the same thing than the <strong>separate()</strong> function that we learned about in chapter 3. They have slightly different syntax and arguments, but the main difference between the two functions is that str_split() works with <strong>vectors</strong> and returns a list, while separate() works with <strong>daraframes</strong> and returns a dataframe. In other words, if you want to split a string contained in a dataframe column, you need to use separate(), and if you want to split a character vector into a list of character vectors. the <strong>n</strong> argument of str_split() allows you to specify the length of the returned vector.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="chapter-4---working-with-strings.html#cb25-1" aria-hidden="true" tabindex="-1"></a>courses <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;INFO5500, INFO6540, INFO6270&quot;</span>,</span>
<span id="cb25-2"><a href="chapter-4---working-with-strings.html#cb25-2" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;INFO5500&quot;</span>,</span>
<span id="cb25-3"><a href="chapter-4---working-with-strings.html#cb25-3" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;INFO5530, INFO5520&quot;</span>)</span>
<span id="cb25-4"><a href="chapter-4---working-with-strings.html#cb25-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-5"><a href="chapter-4---working-with-strings.html#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="co"># str_split seperates the vectors based on a specified delimiter.</span></span>
<span id="cb25-6"><a href="chapter-4---working-with-strings.html#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="co"># the outcome is a list of three vectors with 3, 1 and 2 elements.</span></span>
<span id="cb25-7"><a href="chapter-4---working-with-strings.html#cb25-7" aria-hidden="true" tabindex="-1"></a>courses <span class="sc">%&gt;%</span> </span>
<span id="cb25-8"><a href="chapter-4---working-with-strings.html#cb25-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_split</span>(<span class="st">&quot;, &quot;</span>)</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;INFO5500&quot; &quot;INFO6540&quot; &quot;INFO6270&quot;
## 
## [[2]]
## [1] &quot;INFO5500&quot;
## 
## [[3]]
## [1] &quot;INFO5530&quot; &quot;INFO5520&quot;</code></pre>
<p>We can also specify the <strong>maximum</strong> number of pieces we want to split the string into.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="chapter-4---working-with-strings.html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Here I split the courses vector into a list of vectors that can have a maximum of 2 elements.</span></span>
<span id="cb27-2"><a href="chapter-4---working-with-strings.html#cb27-2" aria-hidden="true" tabindex="-1"></a>courses <span class="sc">%&gt;%</span> </span>
<span id="cb27-3"><a href="chapter-4---working-with-strings.html#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_split</span>(<span class="st">&quot;, &quot;</span>,<span class="at">n=</span><span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;INFO5500&quot;           &quot;INFO6540, INFO6270&quot;
## 
## [[2]]
## [1] &quot;INFO5500&quot;
## 
## [[3]]
## [1] &quot;INFO5530&quot; &quot;INFO5520&quot;</code></pre>
<p>We can also specify the EXACT number of pieces we want to split the string into with str_split_fixed(). This function does not return a vector but a matrix.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="chapter-4---working-with-strings.html#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I split the courses vector into a matrix with 4 columns.</span></span>
<span id="cb29-2"><a href="chapter-4---working-with-strings.html#cb29-2" aria-hidden="true" tabindex="-1"></a>courses <span class="sc">%&gt;%</span> </span>
<span id="cb29-3"><a href="chapter-4---working-with-strings.html#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_split_fixed</span>(<span class="st">&quot;, &quot;</span>,<span class="at">n=</span><span class="dv">4</span>)</span></code></pre></div>
<pre><code>##      [,1]       [,2]       [,3]       [,4]
## [1,] &quot;INFO5500&quot; &quot;INFO6540&quot; &quot;INFO6270&quot; &quot;&quot;  
## [2,] &quot;INFO5500&quot; &quot;&quot;         &quot;&quot;         &quot;&quot;  
## [3,] &quot;INFO5530&quot; &quot;INFO5520&quot; &quot;&quot;         &quot;&quot;</code></pre>
</div>
<div id="str_flatten" class="section level4 unnumbered">
<h4>str_flatten()</h4>
<p>Flatten takes a character vector of length <em>x</em> and concatenates all the elements into a character vector of length 1 (a single string) with a specified separator between the elements. In a sense, it is the opposite of a str_split().</p>
<div id="vector-example-3" class="section level5 unnumbered">
<h5>Vector example</h5>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="chapter-4---working-with-strings.html#cb31-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>,<span class="st">&quot;c&quot;</span>)</span>
<span id="cb31-2"><a href="chapter-4---working-with-strings.html#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_flatten</span>(x, <span class="st">&quot;|&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;a|b|c&quot;</code></pre>
</div>
<div id="tibble-example-3" class="section level5 unnumbered">
<h5>tibble example</h5>
<p>Using str_flatten() in a tibble is tricky (we need to use the group_by() function that we haven’t learned about yet), but also counterintuitive, since it likely means that we are taking a tibble in a tidy format and making it untidy. Still, I’m providing an example in case you are curious.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="chapter-4---working-with-strings.html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Here is a tibble</span></span>
<span id="cb33-2"><a href="chapter-4---working-with-strings.html#cb33-2" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">instructor =</span> <span class="fu">c</span>(<span class="st">&quot;Mongeon, Philippe&quot;</span>, <span class="st">&quot;Mongeon, Philippe&quot;</span>, <span class="st">&quot;Mongeon, Philippe&quot;</span>,<span class="st">&quot;Spiteri, Louise&quot;</span>,<span class="st">&quot;Spiteri, Louise&quot;</span>),</span>
<span id="cb33-3"><a href="chapter-4---working-with-strings.html#cb33-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">course =</span> <span class="fu">c</span>(<span class="st">&quot;INFO5500&quot;</span>,<span class="st">&quot;INO6540&quot;</span>,<span class="st">&quot;INFO6270&quot;</span>,<span class="st">&quot;INFO6350&quot;</span>,<span class="st">&quot;INFO6480&quot;</span>))</span>
<span id="cb33-4"><a href="chapter-4---working-with-strings.html#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="co"># I print the tibble</span></span>
<span id="cb33-5"><a href="chapter-4---working-with-strings.html#cb33-5" aria-hidden="true" tabindex="-1"></a>t</span></code></pre></div>
<pre><code>## # A tibble: 5 x 2
##   instructor        course  
##   &lt;chr&gt;             &lt;chr&gt;   
## 1 Mongeon, Philippe INFO5500
## 2 Mongeon, Philippe INO6540 
## 3 Mongeon, Philippe INFO6270
## 4 Spiteri, Louise   INFO6350
## 5 Spiteri, Louise   INFO6480</code></pre>
<p>Now I want to flatten my course column so that I have all the courses taught by the same instructor in a single row and separated with a “|.”</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="chapter-4---working-with-strings.html#cb35-1" aria-hidden="true" tabindex="-1"></a>t <span class="sc">%&gt;%</span> </span>
<span id="cb35-2"><a href="chapter-4---working-with-strings.html#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(instructor) <span class="sc">%&gt;%</span> </span>
<span id="cb35-3"><a href="chapter-4---working-with-strings.html#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">course =</span> <span class="fu">str_flatten</span>(course, <span class="st">&quot; | &quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb35-4"><a href="chapter-4---working-with-strings.html#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>()</span></code></pre></div>
<pre><code>## # A tibble: 2 x 2
## # Groups:   instructor [2]
##   instructor        course                       
##   &lt;chr&gt;             &lt;chr&gt;                        
## 1 Mongeon, Philippe INFO5500 | INO6540 | INFO6270
## 2 Spiteri, Louise   INFO6350 | INFO6480</code></pre>
</div>
</div>
</div>
<div id="subsetting-strings" class="section level3 unnumbered">
<h3>Subsetting strings</h3>
<div id="str_sub" class="section level4 unnumbered">
<h4>str_sub()</h4>
<p>Say you want to retrieve the first three characters of a postal code, you can do it with the str_sub() function</p>
<div id="vector-example-4" class="section level5 unnumbered">
<h5>Vector example</h5>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="chapter-4---working-with-strings.html#cb37-1" aria-hidden="true" tabindex="-1"></a>postal_code <span class="ot">&lt;-</span> <span class="st">&quot;B3H 4R2&quot;</span></span>
<span id="cb37-2"><a href="chapter-4---working-with-strings.html#cb37-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-3"><a href="chapter-4---working-with-strings.html#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="co"># get the first three characters of the postal code</span></span>
<span id="cb37-4"><a href="chapter-4---working-with-strings.html#cb37-4" aria-hidden="true" tabindex="-1"></a>postal_code <span class="sc">%&gt;%</span> </span>
<span id="cb37-5"><a href="chapter-4---working-with-strings.html#cb37-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_sub</span>(<span class="dv">1</span>,<span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] &quot;B3H&quot;</code></pre>
<p>You can also retrieve the last characters of the string using negative numbers. Let’s get the last three characters of the postal code.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="chapter-4---working-with-strings.html#cb39-1" aria-hidden="true" tabindex="-1"></a>postal_code <span class="sc">%&gt;%</span> </span>
<span id="cb39-2"><a href="chapter-4---working-with-strings.html#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_sub</span>(<span class="sc">-</span><span class="dv">3</span>,<span class="sc">-</span><span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] &quot;4R2&quot;</code></pre>
</div>
<div id="tibble-example-4" class="section level5 unnumbered">
<h5>Tibble example</h5>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="chapter-4---working-with-strings.html#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I create my tibble </span></span>
<span id="cb41-2"><a href="chapter-4---working-with-strings.html#cb41-2" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">postal_code =</span> <span class="fu">c</span>(<span class="st">&quot;B3H 4R2&quot;</span>, <span class="st">&quot;B3H 7K7&quot;</span>))</span>
<span id="cb41-3"><a href="chapter-4---working-with-strings.html#cb41-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-4"><a href="chapter-4---working-with-strings.html#cb41-4" aria-hidden="true" tabindex="-1"></a><span class="co"># I print my tibble</span></span>
<span id="cb41-5"><a href="chapter-4---working-with-strings.html#cb41-5" aria-hidden="true" tabindex="-1"></a>t</span></code></pre></div>
<pre><code>## # A tibble: 2 x 1
##   postal_code
##   &lt;chr&gt;      
## 1 B3H 4R2    
## 2 B3H 7K7</code></pre>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="chapter-4---working-with-strings.html#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I add two new columms with the first three digits and the last 3 digits of the postal code. </span></span>
<span id="cb43-2"><a href="chapter-4---working-with-strings.html#cb43-2" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> t <span class="sc">%&gt;%</span> </span>
<span id="cb43-3"><a href="chapter-4---working-with-strings.html#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">first_three_digits =</span> <span class="fu">str_sub</span>(postal_code, <span class="dv">1</span>, <span class="dv">3</span>),</span>
<span id="cb43-4"><a href="chapter-4---working-with-strings.html#cb43-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">last_three_digits =</span> <span class="fu">str_sub</span>(postal_code, <span class="sc">-</span><span class="dv">3</span>, <span class="sc">-</span><span class="dv">1</span>)) </span>
<span id="cb43-5"><a href="chapter-4---working-with-strings.html#cb43-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-6"><a href="chapter-4---working-with-strings.html#cb43-6" aria-hidden="true" tabindex="-1"></a><span class="co"># I print my new tibble</span></span>
<span id="cb43-7"><a href="chapter-4---working-with-strings.html#cb43-7" aria-hidden="true" tabindex="-1"></a>t</span></code></pre></div>
<pre><code>## # A tibble: 2 x 3
##   postal_code first_three_digits last_three_digits
##   &lt;chr&gt;       &lt;chr&gt;              &lt;chr&gt;            
## 1 B3H 4R2     B3H                4R2              
## 2 B3H 7K7     B3H                7K7</code></pre>
<p>Noticed how I created two new columns with the same mutate()? You can mutate as many things as you want in a mutate() function, just need to add a comma to separate each mutation.</p>
</div>
</div>
<div id="str_subset" class="section level4 unnumbered">
<h4>str_subset()</h4>
<p>The str_sub() function should not be confused with the str_subset() functions that returns the element of a vector that contain a string.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="chapter-4---working-with-strings.html#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I create a vector with course codes</span></span>
<span id="cb45-2"><a href="chapter-4---working-with-strings.html#cb45-2" aria-hidden="true" tabindex="-1"></a>course_codes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;INFO5500&quot;</span>, <span class="st">&quot;BUSI6500&quot;</span>, <span class="st">&quot;MGMT5000&quot;</span>, <span class="st">&quot;INFO6270&quot;</span>)</span>
<span id="cb45-3"><a href="chapter-4---working-with-strings.html#cb45-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-4"><a href="chapter-4---working-with-strings.html#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="co"># I print a vector of course codes that contain the pattern &quot;INFO&quot;</span></span>
<span id="cb45-5"><a href="chapter-4---working-with-strings.html#cb45-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str_subset</span>(course_codes, <span class="st">&quot;INFO&quot;</span>)</span></code></pre></div>
<p><strong>Important note:</strong> You should not try to use the str_subset() with a tibble. It is possible, but requires the combination of multiple functions, and it’s not something that you are likely to need to do anyways.</p>
</div>
</div>
<div id="locating-a-pattern-in-a-string" class="section level3 unnumbered">
<h3>Locating a pattern in a string</h3>
<div id="str_locate" class="section level4 unnumbered">
<h4>str_locate()</h4>
<p>The str_locate() function allows you to find the position of a pattern in a string. This can be useful, for instance, in combination with str_sub() if you want to extract the part of a string that comes before or after the pattern. Let’s explore the str_locate() function with a few examples.</p>
<div id="vector-examples" class="section level5 unnumbered">
<h5>Vector examples</h5>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="chapter-4---working-with-strings.html#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I create a string with an email</span></span>
<span id="cb46-2"><a href="chapter-4---working-with-strings.html#cb46-2" aria-hidden="true" tabindex="-1"></a>email <span class="ot">&lt;-</span> <span class="st">&quot;info@somewebsite.ca&quot;</span></span>
<span id="cb46-3"><a href="chapter-4---working-with-strings.html#cb46-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-4"><a href="chapter-4---working-with-strings.html#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="co"># I locat the @ character</span></span>
<span id="cb46-5"><a href="chapter-4---working-with-strings.html#cb46-5" aria-hidden="true" tabindex="-1"></a>email <span class="sc">%&gt;%</span> </span>
<span id="cb46-6"><a href="chapter-4---working-with-strings.html#cb46-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_locate</span>(<span class="st">&quot;@&quot;</span>)</span></code></pre></div>
<pre><code>##      start end
## [1,]     5   5</code></pre>
<p>You can see that the str_locate() returns a matrix with the beginning and the end of the “@” pattern in the email. If I want to get the part of the strings that come before the “@,” then I can do this:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="chapter-4---working-with-strings.html#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I get the first part of the email</span></span>
<span id="cb48-2"><a href="chapter-4---working-with-strings.html#cb48-2" aria-hidden="true" tabindex="-1"></a>email <span class="sc">%&gt;%</span> </span>
<span id="cb48-3"><a href="chapter-4---working-with-strings.html#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_sub</span>(<span class="dv">1</span>,<span class="fu">str_locate</span>(email,<span class="st">&quot;@&quot;</span>)[,<span class="dv">1</span>]<span class="sc">-</span><span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] &quot;info&quot;</code></pre>
<p>I did two things there:</p>
<ol style="list-style-type: decimal">
<li>I used <span class="math display">\[,1\]</span> to obtain the first column in the matrix which is where my pattern starts (the 5th position).</li>
<li>I substracted 1 because I don’t want to print characters 1 to 5, which would be “info@” but charachters 1 to 4.</li>
</ol>
<p>So my statement reads like this: give me the subset of the email string that starts at the first position and ends one position before the “@” pattern is located.</p>
<p>So I can get the part that comes after the pattern “@” like this:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="chapter-4---working-with-strings.html#cb50-1" aria-hidden="true" tabindex="-1"></a>email <span class="sc">%&gt;%</span> </span>
<span id="cb50-2"><a href="chapter-4---working-with-strings.html#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_sub</span>(<span class="fu">str_locate</span>(email,<span class="st">&quot;@&quot;</span>)[,<span class="dv">2</span>]<span class="sc">+</span><span class="dv">1</span>,<span class="sc">-</span><span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] &quot;somewebsite.ca&quot;</code></pre>
<p>This reads as give me the subset of the email string that starts one position after the location of the “@” pattern (str_locate(email,“@”)<span class="math display">\[,2\]</span>+1), and ends with the last character of the string (-1). Note that the “,-1” part is optional since by default the str_sub() function will output the rest of the string when not end position is provide.</p>
</div>
<div id="tibble-example-5" class="section level5 unnumbered">
<h5>Tibble example</h5>
<p>Let’s just repeant the same example but working with a tibble.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="chapter-4---working-with-strings.html#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I create a tibble than contains some emails</span></span>
<span id="cb52-2"><a href="chapter-4---working-with-strings.html#cb52-2" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">emails =</span> <span class="fu">c</span>(<span class="st">&quot;info@somewebsite.ca&quot;</span>,<span class="st">&quot;support@datascienceisfun.com&quot;</span>))</span>
<span id="cb52-3"><a href="chapter-4---working-with-strings.html#cb52-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-4"><a href="chapter-4---working-with-strings.html#cb52-4" aria-hidden="true" tabindex="-1"></a><span class="co"># I print the tibble</span></span>
<span id="cb52-5"><a href="chapter-4---working-with-strings.html#cb52-5" aria-hidden="true" tabindex="-1"></a>t</span></code></pre></div>
<pre><code>## # A tibble: 2 x 1
##   emails                      
##   &lt;chr&gt;                       
## 1 info@somewebsite.ca         
## 2 support@datascienceisfun.com</code></pre>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="chapter-4---working-with-strings.html#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I remove the part of the emails after the @</span></span>
<span id="cb54-2"><a href="chapter-4---working-with-strings.html#cb54-2" aria-hidden="true" tabindex="-1"></a>t <span class="sc">%&gt;%</span> </span>
<span id="cb54-3"><a href="chapter-4---working-with-strings.html#cb54-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">emails =</span> <span class="fu">str_sub</span>(emails, <span class="dv">1</span>, <span class="fu">str_locate</span>(emails,<span class="st">&quot;@&quot;</span>)[,<span class="dv">1</span>]<span class="sc">-</span><span class="dv">1</span>))</span></code></pre></div>
<pre><code>## # A tibble: 2 x 1
##   emails 
##   &lt;chr&gt;  
## 1 info   
## 2 support</code></pre>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="chapter-4---working-with-strings.html#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I remove the part of the emails before the @</span></span>
<span id="cb56-2"><a href="chapter-4---working-with-strings.html#cb56-2" aria-hidden="true" tabindex="-1"></a>t <span class="sc">%&gt;%</span> </span>
<span id="cb56-3"><a href="chapter-4---working-with-strings.html#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">emails =</span> <span class="fu">str_sub</span>(emails, <span class="fu">str_locate</span>(emails,<span class="st">&quot;@&quot;</span>)[,<span class="dv">2</span>]<span class="sc">+</span><span class="dv">1</span>))</span></code></pre></div>
<pre><code>## # A tibble: 2 x 1
##   emails              
##   &lt;chr&gt;               
## 1 somewebsite.ca      
## 2 datascienceisfun.com</code></pre>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="chapter-4---working-with-strings.html#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Let&#39;s make this a bit more complex, and print only the part between the &quot;@&quot; and the &quot;.&quot;</span></span>
<span id="cb58-2"><a href="chapter-4---working-with-strings.html#cb58-2" aria-hidden="true" tabindex="-1"></a>t <span class="sc">%&gt;%</span> </span>
<span id="cb58-3"><a href="chapter-4---working-with-strings.html#cb58-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">emails =</span> <span class="fu">str_sub</span>(emails, <span class="co"># strint to subset</span></span>
<span id="cb58-4"><a href="chapter-4---working-with-strings.html#cb58-4" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">str_locate</span>(emails,<span class="st">&quot;@&quot;</span>)[,<span class="dv">2</span>]<span class="sc">+</span><span class="dv">1</span>, <span class="co"># starting position</span></span>
<span id="cb58-5"><a href="chapter-4---working-with-strings.html#cb58-5" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">str_locate</span>(emails,<span class="st">&quot;</span><span class="sc">\\</span><span class="st">.&quot;</span>)[,<span class="dv">1</span>]<span class="sc">-</span><span class="dv">1</span>)) <span class="co"># ending position</span></span></code></pre></div>
<pre><code>## # A tibble: 2 x 1
##   emails          
##   &lt;chr&gt;           
## 1 somewebsite     
## 2 datascienceisfun</code></pre>
</div>
</div>
</div>
<div id="testing-strings" class="section level3 unnumbered">
<h3>Testing strings</h3>
<p>Rather than extracting parts of strings, or modifying strings, you may just want to test to see if a strings contains a specific pattern and get a logical (TRUE, FALSE) in return.</p>
<div id="str_detect" class="section level4 unnumbered">
<h4>str_detect()</h4>
<p>The str_detect() functions allows us to identify strings that contain a certain pattern.</p>
<div id="vector-example-5" class="section level5 unnumbered">
<h5>Vector example</h5>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="chapter-4---working-with-strings.html#cb60-1" aria-hidden="true" tabindex="-1"></a>postal_code <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;B3H 1H5&quot;</span>,<span class="st">&quot;B3H 382&quot;</span>,<span class="st">&quot;H2T 1H2&quot;</span>,<span class="st">&quot;J8P 9R2&quot;</span>)</span>
<span id="cb60-2"><a href="chapter-4---working-with-strings.html#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(postal_code, <span class="st">&quot;B3H&quot;</span>)</span></code></pre></div>
<pre><code>## [1]  TRUE  TRUE FALSE FALSE</code></pre>
<p>This can be useful if we want to filter a tibble based on pattern matches. Here’s an example where we have a list of postal codes and would like to keep only those who are in Halifax.</p>
</div>
<div id="tibble-example-6" class="section level5 unnumbered">
<h5>Tibble example</h5>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="chapter-4---working-with-strings.html#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I create a tibble with postal codes</span></span>
<span id="cb62-2"><a href="chapter-4---working-with-strings.html#cb62-2" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">postal_code =</span> <span class="fu">c</span>(<span class="st">&quot;B3H 1H5&quot;</span>,<span class="st">&quot;B3H 382&quot;</span>,<span class="st">&quot;H2T 1H2&quot;</span>,<span class="st">&quot;J8P 9R2&quot;</span>))</span>
<span id="cb62-3"><a href="chapter-4---working-with-strings.html#cb62-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-4"><a href="chapter-4---working-with-strings.html#cb62-4" aria-hidden="true" tabindex="-1"></a><span class="co"># I print the rows that for which the postal code contains the pattern &quot;B3H&quot;</span></span>
<span id="cb62-5"><a href="chapter-4---working-with-strings.html#cb62-5" aria-hidden="true" tabindex="-1"></a>t <span class="sc">%&gt;%</span> </span>
<span id="cb62-6"><a href="chapter-4---working-with-strings.html#cb62-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(postal_code,<span class="st">&quot;B3H&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 2 x 1
##   postal_code
##   &lt;chr&gt;      
## 1 B3H 1H5    
## 2 B3H 382</code></pre>
</div>
</div>
<div id="str_starts-and-str_ends" class="section level4 unnumbered">
<h4>str_starts() and str_ends()</h4>
<p>The str_starts() and str_ends() functions do the same thing as str_detect(), but look fpr the pattern specifically at the beginning or the end of the strings.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="chapter-4---working-with-strings.html#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I create a tibble with postal codes</span></span>
<span id="cb64-2"><a href="chapter-4---working-with-strings.html#cb64-2" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">postal_code =</span> <span class="fu">c</span>(<span class="st">&quot;B3H 1H5&quot;</span>,<span class="st">&quot;B3H 382&quot;</span>,<span class="st">&quot;H2T 1H2&quot;</span>,<span class="st">&quot;J8P 9R2&quot;</span>))</span>
<span id="cb64-3"><a href="chapter-4---working-with-strings.html#cb64-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-4"><a href="chapter-4---working-with-strings.html#cb64-4" aria-hidden="true" tabindex="-1"></a><span class="co"># I print the postal codes that begin with &quot;B3H&quot;</span></span>
<span id="cb64-5"><a href="chapter-4---working-with-strings.html#cb64-5" aria-hidden="true" tabindex="-1"></a>t <span class="sc">%&gt;%</span> </span>
<span id="cb64-6"><a href="chapter-4---working-with-strings.html#cb64-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_starts</span>(postal_code, <span class="st">&quot;B3H&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 2 x 1
##   postal_code
##   &lt;chr&gt;      
## 1 B3H 1H5    
## 2 B3H 382</code></pre>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="chapter-4---working-with-strings.html#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I print the postal codes that end with &quot;1H2&quot;</span></span>
<span id="cb66-2"><a href="chapter-4---working-with-strings.html#cb66-2" aria-hidden="true" tabindex="-1"></a>t <span class="sc">%&gt;%</span> </span>
<span id="cb66-3"><a href="chapter-4---working-with-strings.html#cb66-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_ends</span>(postal_code, <span class="st">&quot;1H2&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 1 x 1
##   postal_code
##   &lt;chr&gt;      
## 1 H2T 1H2</code></pre>
</div>
</div>
<div id="regular-expressions-regex" class="section level3 unnumbered">
<h3>Regular expressions (regex)</h3>
<p>Regular expressions are a powerful way to search for patterns in text. A full understanding of regex is far beyond the scope of this course, but you should at least be aware of them. Below is a very superficial introduction to regular expressions. The cheat sheet for the stringr (<a href="https://github.com/rstudio/cheatsheets/blob/main/strings.pdf" class="uri">https://github.com/rstudio/cheatsheets/blob/main/strings.pdf</a>) package is a great place to look for guidance on using regular expressions (as well as all other functions in the stringr package, several of which that I didn’t mention in this chapter but might still be useful). It shows a list of the basic character classes, and all the operators that you can use to search for patterns in strings, so remember that it’s there to help you.</p>
<div id="literal-expressions" class="section level4 unnumbered">
<h4>Literal expressions</h4>
<p>In the code examples above, we used several functions of the stringr package to search for patterns in strings (e.g., searching for the pattern “INFO” in a vector of strings.). “INFO” is a literal expression. . . We can also search for more than one pattern combined with the boolean operator OR (represented by “|” in a search pattern).</p>
</div>
<div id="character-classes" class="section level4 unnumbered">
<h4>Character classes</h4>
<p>Character classes allow you to search for a range of characters or types of patterns using <strong>character classes</strong> (e.g., numbers, punctuations, symbols, letters, or a user specified set or range of characters). These classes are represented by square brackets “[].”</p>
<div id="example-remove-unwanted-characters-from-strings" class="section level5 unnumbered">
<h5>Example: remove unwanted characters from strings</h5>
<p>You can use regular expressions to filter out of a string all the non-alphanumeric characters like this:</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="chapter-4---working-with-strings.html#cb68-1" aria-hidden="true" tabindex="-1"></a>messy_string <span class="ot">&lt;-</span> <span class="st">&quot; what-is%going*on/with!my(keyboard)&quot;</span></span>
<span id="cb68-2"><a href="chapter-4---working-with-strings.html#cb68-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-3"><a href="chapter-4---working-with-strings.html#cb68-3" aria-hidden="true" tabindex="-1"></a>messy_string <span class="sc">%&gt;%</span> </span>
<span id="cb68-4"><a href="chapter-4---working-with-strings.html#cb68-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(<span class="st">&quot;[^[:alnum:]]&quot;</span>,<span class="st">&quot; &quot;</span>) </span></code></pre></div>
<pre><code>## [1] &quot; what is going on with my keyboard &quot;</code></pre>
<p>Why does this work? Because:</p>
<ol style="list-style-type: decimal">
<li><span class="math display">\[:alnum:\]</span> is a character class containing all characters that are alphabetical or numerical (letters and numbers).</li>
<li><span class="math display">\[\^\]</span> means <strong>everything but</strong>.</li>
<li>So the statement reads: replace everything but alphanumeric characters with a space.</li>
</ol>
</div>
<div id="example-find-sequences-of-character-belonging-to-specific-classes" class="section level5 unnumbered">
<h5>Example: find sequences of character belonging to specific classes</h5>
<p>We can search for specific sequences of character classes, which can be useful to retrieve things like postal codes from a string.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="chapter-4---working-with-strings.html#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I create a vector with an address</span></span>
<span id="cb70-2"><a href="chapter-4---working-with-strings.html#cb70-2" aria-hidden="true" tabindex="-1"></a>address <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;5058 King St, Halifax, NS H2T 1J2&quot;</span>,<span class="st">&quot;427 Queen Avernue, Halifax, NS, B3H1H4&quot;</span>) </span>
<span id="cb70-3"><a href="chapter-4---working-with-strings.html#cb70-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-4"><a href="chapter-4---working-with-strings.html#cb70-4" aria-hidden="true" tabindex="-1"></a><span class="co"># I extract the postal code from the address  </span></span>
<span id="cb70-5"><a href="chapter-4---working-with-strings.html#cb70-5" aria-hidden="true" tabindex="-1"></a>address <span class="sc">%&gt;%</span> </span>
<span id="cb70-6"><a href="chapter-4---working-with-strings.html#cb70-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_extract</span>(<span class="st">&quot;[:alpha:][:digit:][:alpha:] ?[:digit:][:alpha:][:digit:]&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;H2T 1J2&quot; &quot;B3H1H4&quot;</code></pre>
<p>The pattern “<span class="math display">\[:alpha:\]</span><span class="math display">\[:digit:\]</span><span class="math display">\[:alpha:\]</span>” reads as : any letter, followed by any number, followed by any letter. The “<span class="math display">\[:digit:\]</span><span class="math display">\[:alpha:\]</span><span class="math display">\[:digit:\]</span>” patters reads as any number, followed by any letter, followed by any number.</p>
<p>You might have noticed that then there is a space and a question mark in between my two sets of three character classes. This reads as 0 or 1 space (see the quantifiers section in the stringr cheatsheet). This allows query to extract postal codes that are written with no space in between the two sets of three characters.</p>
</div>
<div id="example-search-for-spelling-variants" class="section level5 unnumbered">
<h5>Example: search for spelling variants</h5>
<p>Another convenient way of using character classes is when you want to match a word in a text that is or isn’t capitalized. Here’s an example.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="chapter-4---working-with-strings.html#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I create a tibble with 2 strings</span></span>
<span id="cb72-2"><a href="chapter-4---working-with-strings.html#cb72-2" aria-hidden="true" tabindex="-1"></a>t<span class="ot">&lt;-</span><span class="fu">tibble</span>(<span class="at">text =</span> <span class="fu">c</span>(<span class="st">&quot;Information management is great&quot;</span>, <span class="st">&quot;I love information management&quot;</span>, <span class="st">&quot;Wayne Gretzy was the best hockey player of all times&quot;</span>))</span>
<span id="cb72-3"><a href="chapter-4---working-with-strings.html#cb72-3" aria-hidden="true" tabindex="-1"></a><span class="co"># I print the tibble</span></span>
<span id="cb72-4"><a href="chapter-4---working-with-strings.html#cb72-4" aria-hidden="true" tabindex="-1"></a>t</span></code></pre></div>
<pre><code>## # A tibble: 3 x 1
##   text                                                
##   &lt;chr&gt;                                               
## 1 Information management is great                     
## 2 I love information management                       
## 3 Wayne Gretzy was the best hockey player of all times</code></pre>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="chapter-4---working-with-strings.html#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I want to select the texts that contain information management or Information management.</span></span>
<span id="cb74-2"><a href="chapter-4---working-with-strings.html#cb74-2" aria-hidden="true" tabindex="-1"></a>t <span class="sc">%&gt;%</span> </span>
<span id="cb74-3"><a href="chapter-4---working-with-strings.html#cb74-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(text, <span class="st">&quot;[Ii]nformation management&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 2 x 1
##   text                           
##   &lt;chr&gt;                          
## 1 Information management is great
## 2 I love information management</code></pre>
</div>
<div id="example-combining-mutliple-search-terms-with-boolean-or" class="section level5 unnumbered">
<h5>Example: combining mutliple search terms with “|” (boolean OR)</h5>
<p>Instead of using character classes, we could combine multiple search teams with the “|” that represents the boolean operator OR.</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="chapter-4---working-with-strings.html#cb76-1" aria-hidden="true" tabindex="-1"></a>t <span class="sc">%&gt;%</span> </span>
<span id="cb76-2"><a href="chapter-4---working-with-strings.html#cb76-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(text, <span class="st">&quot;information management|Information management&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 2 x 1
##   text                           
##   &lt;chr&gt;                          
## 1 Information management is great
## 2 I love information management</code></pre>
<p>This works. But even with just two variants, you can already tell that it makes longer statements to write.</p>
</div>
<div id="example-searching-for-a-range-of-character" class="section level5 unnumbered">
<h5>Example: searching for a range of character</h5>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="chapter-4---working-with-strings.html#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I create a tibble containing letters from a to g</span></span>
<span id="cb78-2"><a href="chapter-4---working-with-strings.html#cb78-2" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">letters =</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>,<span class="st">&quot;c&quot;</span>,<span class="st">&quot;d&quot;</span>,<span class="st">&quot;e&quot;</span>,<span class="st">&quot;f&quot;</span>,<span class="st">&quot;g&quot;</span>))</span>
<span id="cb78-3"><a href="chapter-4---working-with-strings.html#cb78-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-4"><a href="chapter-4---working-with-strings.html#cb78-4" aria-hidden="true" tabindex="-1"></a><span class="co"># I retrieve rows that contain letters from a to f</span></span>
<span id="cb78-5"><a href="chapter-4---working-with-strings.html#cb78-5" aria-hidden="true" tabindex="-1"></a>t <span class="sc">%&gt;%</span> </span>
<span id="cb78-6"><a href="chapter-4---working-with-strings.html#cb78-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(letters,<span class="st">&quot;[a-f]&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 6 x 1
##   letters
##   &lt;chr&gt;  
## 1 a      
## 2 b      
## 3 c      
## 4 d      
## 5 e      
## 6 f</code></pre>
<p>Again, we could have used “a|b|c|d|e|f” but this is less efficient. Here’s a similar example where we have lowercase and uppercase letters.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="chapter-4---working-with-strings.html#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I create a tibble containing letters from a to g in lowercase and uppercase.</span></span>
<span id="cb80-2"><a href="chapter-4---working-with-strings.html#cb80-2" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">letters =</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>,<span class="st">&quot;c&quot;</span>,<span class="st">&quot;d&quot;</span>,<span class="st">&quot;e&quot;</span>,<span class="st">&quot;f&quot;</span>,<span class="st">&quot;g&quot;</span>,</span>
<span id="cb80-3"><a href="chapter-4---working-with-strings.html#cb80-3" aria-hidden="true" tabindex="-1"></a>                        <span class="st">&quot;A&quot;</span>,<span class="st">&quot;B&quot;</span>,<span class="st">&quot;C&quot;</span>,<span class="st">&quot;D&quot;</span>,<span class="st">&quot;E&quot;</span>,<span class="st">&quot;F&quot;</span>,<span class="st">&quot;G&quot;</span>))</span>
<span id="cb80-4"><a href="chapter-4---working-with-strings.html#cb80-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-5"><a href="chapter-4---working-with-strings.html#cb80-5" aria-hidden="true" tabindex="-1"></a><span class="co"># I retrieve rows that contain the letters a to d in lowercase or uppercase</span></span>
<span id="cb80-6"><a href="chapter-4---working-with-strings.html#cb80-6" aria-hidden="true" tabindex="-1"></a>t <span class="sc">%&gt;%</span> </span>
<span id="cb80-7"><a href="chapter-4---working-with-strings.html#cb80-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(letters, <span class="st">&quot;[a-dA-D]&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 8 x 1
##   letters
##   &lt;chr&gt;  
## 1 a      
## 2 b      
## 3 c      
## 4 d      
## 5 A      
## 6 B      
## 7 C      
## 8 D</code></pre>
</div>
</div>
<div id="beware-of-the-dot-its-a-wild-card" class="section level4 unnumbered">
<h4>Beware of the dot, it’s a wild card</h4>
<p>When matching character patterns, the “.” means <strong>any character</strong>.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="chapter-4---working-with-strings.html#cb82-1" aria-hidden="true" tabindex="-1"></a>string <span class="ot">&lt;-</span> <span class="st">&quot;This is a string&quot;</span> </span>
<span id="cb82-2"><a href="chapter-4---working-with-strings.html#cb82-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-3"><a href="chapter-4---working-with-strings.html#cb82-3" aria-hidden="true" tabindex="-1"></a><span class="co"># I extract every character  </span></span>
<span id="cb82-4"><a href="chapter-4---working-with-strings.html#cb82-4" aria-hidden="true" tabindex="-1"></a>string <span class="sc">%&gt;%</span> </span>
<span id="cb82-5"><a href="chapter-4---working-with-strings.html#cb82-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_extract</span>(<span class="st">&quot;is.&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;is &quot;</code></pre>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="chapter-4---working-with-strings.html#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I replace every character with a space</span></span>
<span id="cb84-2"><a href="chapter-4---working-with-strings.html#cb84-2" aria-hidden="true" tabindex="-1"></a>string <span class="sc">%&gt;%</span> </span>
<span id="cb84-3"><a href="chapter-4---working-with-strings.html#cb84-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(<span class="st">&quot;.&quot;</span>,<span class="st">&quot; &quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;                &quot;</code></pre>
</div>
</div>
<div id="dealing-with-special-characters-in-strings" class="section level3 unnumbered">
<h3>Dealing with special characters in strings</h3>
<p>Here a some of the characters that you might come across when working with strings in R. When you want to insert these characters a string, you need to precede them with the escape character “\.” Here is a table adapted from the <a href="https://github.com/rstudio/cheatsheets/blob/main/strings.pdf">stringr cheatsheet</a>.</p>
<table>
<thead>
<tr class="header">
<th align="left">String</th>
<th align="left">Represents</th>
<th>How to search in a pattern</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">\.</td>
<td align="left">.</td>
<td>\\.</td>
</tr>
<tr class="even">
<td align="left">\!</td>
<td align="left">!</td>
<td>\\!</td>
</tr>
<tr class="odd">
<td align="left">\?</td>
<td align="left">?</td>
<td>\\?</td>
</tr>
<tr class="even">
<td align="left">\(</td>
<td align="left">(</td>
<td>\\(</td>
</tr>
<tr class="odd">
<td align="left">\)</td>
<td align="left">)</td>
<td>\\)</td>
</tr>
<tr class="even">
<td align="left">\{</td>
<td align="left">{</td>
<td>\\{</td>
</tr>
<tr class="odd">
<td align="left">\}</td>
<td align="left">}</td>
<td>\\}</td>
</tr>
<tr class="even">
<td align="left">\n</td>
<td align="left">newline</td>
<td>\\n</td>
</tr>
<tr class="odd">
<td align="left">\t</td>
<td align="left">tab</td>
<td>\\t</td>
</tr>
<tr class="even">
<td align="left">\\</td>
<td align="left">backslash \</td>
<td>\\\\</td>
</tr>
<tr class="odd">
<td align="left">\’</td>
<td align="left">apostrophe ’</td>
<td>\\’</td>
</tr>
<tr class="even">
<td align="left">\”</td>
<td align="left">quotation mark ”</td>
<td>\\”</td>
</tr>
<tr class="odd">
<td align="left">\`</td>
<td align="left">backtick `</td>
<td>\\`</td>
</tr>
</tbody>
</table>
<p>Here are just a few example to so you can see how R deals with these special characters.</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="chapter-4---working-with-strings.html#cb86-1" aria-hidden="true" tabindex="-1"></a>string <span class="ot">&lt;-</span> <span class="st">&quot;Dear diary</span><span class="sc">\n</span><span class="st">What is wrong with me</span><span class="sc">\n</span><span class="st">My code never works as I entend&quot;</span></span>
<span id="cb86-2"><a href="chapter-4---working-with-strings.html#cb86-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-3"><a href="chapter-4---working-with-strings.html#cb86-3" aria-hidden="true" tabindex="-1"></a><span class="co"># If we just print the string, we see it exactly as written.</span></span>
<span id="cb86-4"><a href="chapter-4---working-with-strings.html#cb86-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(string)</span></code></pre></div>
<pre><code>## [1] &quot;Dear diary\nWhat is wrong with me\nMy code never works as I entend&quot;</code></pre>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="chapter-4---working-with-strings.html#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="co"># The writeLines() function can be used to print the string where escaped characters are interpreted.</span></span>
<span id="cb88-2"><a href="chapter-4---working-with-strings.html#cb88-2" aria-hidden="true" tabindex="-1"></a><span class="fu">writeLines</span>(string)</span></code></pre></div>
<pre><code>## Dear diary
## What is wrong with me
## My code never works as I entend</code></pre>
<p>Let’s read a text file (.txt) in R and see what happens.</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="chapter-4---working-with-strings.html#cb90-1" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&quot;https://pmongeon.github.io/info6270/files/boring_story.txt&quot;</span></span>
<span id="cb90-2"><a href="chapter-4---working-with-strings.html#cb90-2" aria-hidden="true" tabindex="-1"></a><span class="fu">read_lines</span>(url) <span class="co"># reads the file and produces a vector with one element for each line</span></span></code></pre></div>
<pre><code>## [1] &quot;This is a \&quot;story\&quot; that I wrote just for the INFO6270 course.&quot;               
## [2] &quot;It&#39;s a bit of a boring story, but it&#39;s just an example. So please forgive me.&quot;
## [3] &quot;...and they were happy ever after.\tThe end.&quot;</code></pre>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="chapter-4---working-with-strings.html#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read_file</span>(url) <span class="co"># reads the file and procudes a vector with a single element containing the entire content</span></span></code></pre></div>
<pre><code>## [1] &quot;This is a \&quot;story\&quot; that I wrote just for the INFO6270 course.\nIt&#39;s a bit of a boring story, but it&#39;s just an example. So please forgive me.\n...and they were happy ever after.\tThe end.&quot;</code></pre>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="chapter-4---working-with-strings.html#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Let&#39;s read the whole file and print it with writeLines()</span></span>
<span id="cb94-2"><a href="chapter-4---working-with-strings.html#cb94-2" aria-hidden="true" tabindex="-1"></a><span class="fu">read_file</span>(url) <span class="sc">%&gt;%</span> </span>
<span id="cb94-3"><a href="chapter-4---working-with-strings.html#cb94-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">writeLines</span>()</span></code></pre></div>
<pre><code>## This is a &quot;story&quot; that I wrote just for the INFO6270 course.
## It&#39;s a bit of a boring story, but it&#39;s just an example. So please forgive me.
## ...and they were happy ever after.   The end.</code></pre>
</div>
<div id="summary" class="section level3 unnumbered">
<h3>Summary</h3>
<p>This chapter introduced you to the stringr package and the general principles of manipulating and matching character patterns in R. The goal was to give you enough of the basics so that you can fix small issues with strings in the data that you might encounter in this course, and in your professional or personal lives.</p>
</div>
</div>
<div id="homework-3" class="section level2 unnumbered">
<h2>Homework</h2>
<p>Your homework for this week is to complete <a href="https://pmongeon.github.io/info6270/files/assignments/info6270_lab3.r">lab #3</a>.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="chapter-3---reading-and-tidying-data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="chapter-5---r-markdown.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
